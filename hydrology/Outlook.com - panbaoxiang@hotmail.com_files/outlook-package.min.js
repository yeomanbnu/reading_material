/*!
 * Require JS 2.1.5 
 * Microsoft grants you the right to use these script files for the sole purpose of either: interacting through your browser with the Microsoft website, subject to the website’s terms of use; or (ii) using the files as included with a Microsoft product subject to that product’s license terms. Microsoft reserves all other rights to the files not expressly granted by Microsoft, whether by implication, estoppel or otherwise. The notices and licenses below are for informational purposes only. 
 *
 * Copyright (c) 2010-2011, The Dojo Foundation 
 * 
 * Provided for Informational Purposes Only 
 * MIT License 
 * Permission is hereby granted, free of charge, to any person obtaining 
 * a copy of this software and associated documentation files (the 
 * "Software"), to deal in the Software without restriction, including 
 * without limitation the rights to use, copy, modify, merge, publish, 
 * distribute, sublicense, and/or sell copies of the Software, and to 
 * permit persons to whom the Software is furnished to do so, subject to 
 * the following conditions: 
 * The above copyright notice and this permission notice shall be 
 * included in all copies or substantial portions of the Software. 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */

/*!
 RequireJS 2.1.5 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/jrburke/requirejs for details
*/

/*! © Microsoft and/or Skype 2014 */

/*! � Microsoft and/or Skype 2014 */

(function(){var requirejs,require,define;(function(aa){function I(e){return"[object Function]"===L.call(e)}function J(e){return"[object Array]"===L.call(e)}function y(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function M(e,t){if(e){var n;for(n=e.length-1;-1<n&&(!e[n]||!t(e[n],n,e));n-=1);}}function s(e,t){return ga.call(e,t)}function m(e,t){return s(e,t)&&e[t]}function G(e,t){for(var n in e)if(s(e,n)&&t(e[n],n))break}function R(e,t,n,r){return t&&G(t,function(t,i){if(n||!s(e,i))r&&"string"!=typeof t?(e[i]||(e[i]={}),R(e[i],t,n,r)):e[i]=t}),e}function u(e,t){return function(){return t.apply(e,arguments)}}function ba(e){if(!e)return e;var t=aa;return y(e.split("."),function(e){t=t[e]}),t}function B(e,t,n,r){return t=Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e),t.requireType=e,t.requireModules=r,n&&(t.originalError=n),t}function ha(e){function t(e,t,n){var r,i,s,o,u,a,f,l=t&&t.split("/");r=l;var c=k.map,h=c&&c["*"];if(e&&"."===e.charAt(0))if(t){r=m(k.pkgs,t)?l=[t]:l.slice(0,l.length-1),t=e=r.concat(e.split("/"));for(r=0;t[r];r+=1)if(i=t[r],"."===i)t.splice(r,1),r-=1;else if(".."===i){if(1===r&&(".."===t[2]||".."===t[0]))break;0<r&&(t.splice(r-1,2),r-=2)}r=m(k.pkgs,t=e[0]),e=e.join("/"),r&&e===t+"/"+r.main&&(e=t)}else 0===e.indexOf("./")&&(e=e.substring(2));if(n&&c&&(l||h)){t=e.split("/");for(r=t.length;0<r;r-=1){s=t.slice(0,r).join("/");if(l)for(i=l.length;0<i;i-=1)if(n=m(c,l.slice(0,i).join("/")))if(n=m(n,s)){o=n,u=r;break}if(o)break;!a&&h&&m(h,s)&&(a=m(h,s),f=r)}!o&&a&&(o=a,u=f),o&&(t.splice(0,u,o),e=t.join("/"))}return e}function n(e){A&&y(document.getElementsByTagName("script"),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===x.contextName)return t.parentNode.removeChild(t),!0})}function r(e){var t=m(k.paths,e);if(t&&J(t)&&1<t.length)return n(e),t.shift(),x.require.undef(e),x.require([e]),!0}function i(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function o(e,n,r,s){var o,u,a=null,f=n?n.name:null,l=e,c=!0,h="";return e||(c=!1,e="_@r"+(F+=1)),e=i(e),a=e[0],e=e[1],a&&(a=t(a,f,s),u=m(H,a)),e&&(a?h=u&&u.normalize?u.normalize(e,function(e){return t(e,f,s)}):t(e,f,s):(h=t(e,f,s),e=i(h),a=e[0],h=e[1],r=!0,o=x.nameToUrl(h))),r=a&&!u&&!r?"_unnormalized"+(q+=1):"",{prefix:a,name:h,parentMap:n,unnormalized:!!r,url:o,originalName:l,isDefine:c,id:(a?a+"!"+h:h)+r}}function a(e){var t=e.id,n=m(L,t);return n||(n=L[t]=new x.Module(e)),n}function f(e,t,n){var r=e.id,i=m(L,r);s(H,r)&&(!i||i.defineEmitComplete)?"defined"===t&&n(H[r]):a(e).on(t,n)}function c(e,t){var n=e.requireModules,r=!1;t?t(e):(y(n,function(t){if(t=m(L,t))t.error=e,t.events.error&&(r=!0,t.emit("error",e))}),!r)&&l.onError(e)}function h(){T.length&&(ia.apply(D,[D.length-1,0].concat(T)),T=[])}function p(e){delete L[e],delete M[e]}function d(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,y(e.depMaps,function(r,i){var s=r.id,o=m(L,s);o&&!e.depMatched[i]&&!n[s]&&(m(t,s)?(e.defineDep(i,H[s]),e.check()):d(o,t,n))}),n[r]=!0)}function v(){var e,t,i,s,o=(i=1e3*k.waitSeconds)&&x.startTime+i<(new Date).getTime(),u=[],a=[],f=!1,l=!0;if(!E){E=!0,G(M,function(i){e=i.map,t=e.id;if(i.enabled&&(e.isDefine||a.push(i),!i.error))if(!i.inited&&o)r(t)?f=s=!0:(u.push(t),n(t));else if(!i.inited&&i.fetched&&e.isDefine&&(f=!0,!e.prefix))return l=!1});if(o&&u.length)return i=B("timeout","Load timeout for modules: "+u,null,u),i.contextName=x.contextName,c(i);l&&y(a,function(e){d(e,{},{})}),(!o||s)&&f&&(A||da)&&!C&&(C=setTimeout(function(){C=0,v()},50)),E=!1}}function g(e){s(H,e[0])||a(o(e[0],null,!0)).init(e[1],e[2])}function b(e){var e=e.currentTarget||e.srcElement,t=x.onScriptLoad;return e.detachEvent&&!Y?e.detachEvent("onreadystatechange",t):e.removeEventListener("load",t,!1),t=x.onScriptError,(!e.detachEvent||Y)&&e.removeEventListener("error",t,!1),{node:e,id:e&&e.getAttribute("data-requiremodule")}}function w(){var e;for(h();D.length;){e=D.shift();if(null===e[0])return c(B("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));g(e)}}var E,S,x,N,C,k={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},L={},M={},_={},D=[],H={},j={},F=1,q=1;return N={require:function(e){return e.require?e.require:e.require=x.makeRequire(e.map)},exports:function(e){e.usingExports=!0;if(e.map.isDefine)return e.exports?e.exports:e.exports=H[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return k.config&&m(k.config,e.map.id)||{}},exports:H[e.map.id]}}},S=function(e){this.events=m(_,e.id)||{},this.map=e,this.shim=m(k.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},S.prototype={init:function(e,t,n,r){r=r||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=u(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,x.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();x.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],u(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;j[e]||(j[e]=!0,x.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id;t=this.depExports;var r=this.exports,i=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(1>this.depCount&&!this.defined){if(I(i)){if(this.events.error)try{r=x.execCb(n,i,t,r)}catch(s){e=s}else r=x.execCb(n,i,t,r);this.map.isDefine&&((t=this.module)&&void 0!==t.exports&&t.exports!==this.exports?r=t.exports:void 0===r&&this.usingExports&&(r=this.exports));if(e)return e.requireMap=this.map,e.requireModules=[this.map.id],e.requireType="define",c(this.error=e)}else r=i;this.exports=r,this.map.isDefine&&!this.ignore&&(H[n]=r,l.onResourceLoad)&&l.onResourceLoad(x,this.map,this.depMaps),p(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,n=e.id,r=o(e.prefix);this.depMaps.push(r),f(r,"defined",u(this,function(r){var i,h;h=this.map.name;var d=this.map.parentMap?this.map.parentMap.name:null,v=x.makeRequire(e.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){if(r.normalize&&(h=r.normalize(h,function(e){return t(e,d,!0)})||""),r=o(e.prefix+"!"+h,this.map.parentMap),f(r,"defined",u(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),h=m(L,r.id))this.depMaps.push(r),this.events.error&&h.on("error",u(this,function(e){this.emit("error",e)})),h.enable()}else i=u(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),i.error=u(this,function(e){this.inited=!0,this.error=e,e.requireModules=[n],G(L,function(e){0===e.map.id.indexOf(n+"_unnormalized")&&p(e.map.id)}),c(e)}),i.fromText=u(this,function(t,r){var u=e.name,f=o(u),h=O;r&&(t=r),h&&(O=!1),a(f),s(k.config,n)&&(k.config[u]=k.config[n]);try{l.exec(t)}catch(p){return c(B("fromtexteval","fromText eval for "+n+" failed: "+p,p,[n]))}h&&(O=!0),this.depMaps.push(f),x.completeLoad(u),v([u],i)}),r.load(e.name,v,i,k)})),x.enable(r,this),this.pluginMaps[r.id]=r},enable:function(){M[this.map.id]=this,this.enabling=this.enabled=!0,y(this.depMaps,u(this,function(e,t){var n,r;if("string"==typeof e){e=o(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e;if(n=m(N,e.id)){this.depExports[t]=n(this);return}this.depCount+=1,f(e,"defined",u(this,function(e){this.defineDep(t,e),this.check()})),this.errback&&f(e,"error",this.errback)}n=e.id,r=L[n],!s(N,n)&&r&&!r.enabled&&x.enable(e,this)})),G(this.pluginMaps,u(this,function(e){var t=m(L,e.id);t&&!t.enabled&&x.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){y(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},x={config:k,contextName:e,registry:L,defined:H,urlFetched:j,defQueue:D,Module:S,makeModuleMap:o,nextTick:l.nextTick,onError:c,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=k.pkgs,n=k.shim,r={paths:!0,config:!0,map:!0};G(e,function(e,t){r[t]?"map"===t?(k.map||(k.map={}),R(k[t],e,!0,!0)):R(k[t],e,!0):k[t]=e}),e.shim&&(G(e.shim,function(e,t){J(e)&&(e={deps:e}),(e.exports||e.init)&&!e.exportsFn&&(e.exportsFn=x.makeShimExports(e)),n[t]=e}),k.shim=n),e.packages&&(y(e.packages,function(e){e="string"==typeof e?{name:e}:e,t[e.name]={name:e.name,location:e.location||e.name,main:(e.main||"main").replace(ja,"").replace(ea,"")}}),k.pkgs=t),G(L,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=o(t))}),(e.deps||e.callback)&&x.require(e.deps||[],e.callback)},makeShimExports:function(e){return function(){var t;return e.init&&(t=e.init.apply(aa,arguments)),t||e.exports&&ba(e.exports)}},makeRequire:function(n,r){function i(t,u,f){var h,p;return r.enableBuildCallback&&u&&I(u)&&(u.__requireJsBuild=!0),"string"==typeof t?I(u)?c(B("requireargs","Invalid require call"),f):n&&s(N,t)?N[t](L[n.id]):l.get?l.get(x,t,n,i):(h=o(t,n,!1,!0),h=h.id,s(H,h)?H[h]:c(B("notloaded",'Module name "'+h+'" has not been loaded yet for context: '+e+(n?"":". Use require([])")))):(w(),x.nextTick(function(){w(),p=a(o(null,n)),p.skipMap=r.skipMap,p.init(t,u,f,{enabled:!0}),v()}),i)}return r=r||{},R(i,{isBrowser:A,toUrl:function(e){var r,i=e.lastIndexOf("."),s=e.split("/")[0];return-1!==i&&("."!==s&&".."!==s||1<i)&&(r=e.substring(i,e.length),e=e.substring(0,i)),x.nameToUrl(t(e,n&&n.id,!0),r,!0)},defined:function(e){return s(H,o(e,n,!1,!0).id)},specified:function(e){return e=o(e,n,!1,!0).id,s(H,e)||s(L,e)}}),n||(i.undef=function(e){h();var t=o(e,n,!0),r=m(L,e);delete H[e],delete j[t.url],delete _[e],r&&(r.events.defined&&(_[e]=r.events),p(e))}),i},enable:function(e){m(L,e.id)&&a(e).enable()},completeLoad:function(e){var t,n,i=m(k.shim,e)||{},o=i.exports;for(h();D.length;){n=D.shift();if(null===n[0]){n[0]=e;if(t)break;t=!0}else n[0]===e&&(t=!0);g(n)}n=m(L,e);if(!t&&!s(H,e)&&n&&!n.inited){if(k.enforceDefine&&(!o||!ba(o)))return r(e)?void 0:c(B("nodefine","No define call for "+e,null,[e]));g([e,i.deps||[],i.exportsFn])}v()},nameToUrl:function(e,t,n){var r,i,s,o,u,a;if(l.jsExtRegExp.test(e))o=e+(t||"");else{r=k.paths,i=k.pkgs,o=e.split("/");for(u=o.length;0<u;u-=1){if(a=o.slice(0,u).join("/"),s=m(i,a),a=m(r,a)){J(a)&&(a=a[0]),o.splice(0,u,a);break}if(s){e=e===s.name?s.location+"/"+s.main:s.location,o.splice(0,u,e);break}}o=o.join("/"),o+=t||(/\?/.test(o)||n?"":".js"),o=("/"===o.charAt(0)||o.match(/^[\w\+\.\-]+:/)?"":k.baseUrl)+o}return k.urlArgs?o+((-1===o.indexOf("?")?"?":"&")+k.urlArgs):o},load:function(e,t){l.load(x,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if("load"===e.type||ka.test((e.currentTarget||e.srcElement).readyState))P=null,e=b(e),x.completeLoad(e.id)},onScriptError:function(e){var t=b(e);if(!r(t.id))return c(B("scripterror","Script error",e,[t.id]))}},x.require=x.makeRequire(),x}var l,w,x,D,t,E,P,K,Q,fa,la=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,ma=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,ea=/\.js$/,ja=/^\.\//;w=Object.prototype;var L=w.toString,ga=w.hasOwnProperty,ia=Array.prototype.splice,A="undefined"!=typeof window&&!!navigator&&!!document,da=!A&&"undefined"!=typeof importScripts,ka=A&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,Y="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),F={},r={},T=[],O=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(I(requirejs))return;r=requirejs,requirejs=void 0}"undefined"!=typeof require&&!I(require)&&(r=require,require=void 0),l=requirejs=function(e,t,n,r){var i,s="_";return!J(e)&&"string"!=typeof e&&(i=e,J(t)?(e=t,t=n,n=r):e=[]),i&&i.context&&(s=i.context),(r=m(F,s))||(r=F[s]=l.s.newContext(s)),i&&r.configure(i),r.require(e,t,n)},l.config=function(e){return l(e)},l.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=l),l.version="2.1.5",l.jsExtRegExp=/^\/|:|\?|\.js$/,l.isBrowser=A,w=l.s={contexts:F,newContext:ha},l({}),y(["toUrl","undef","defined","specified"],function(e){l[e]=function(){var t=F._;return t.require[e].apply(t,arguments)}}),A&&(x=w.head=document.getElementsByTagName("head")[0],D=document.getElementsByTagName("base")[0])&&(x=w.head=D.parentNode),l.onError=function(e){throw e},l.load=function(e,t,n){var r=e&&e.config||{},i;if(A)return i=r.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script"),i.type=r.scriptType||"text/javascript",i.charset="utf-8",i.async=!0,i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),i.attachEvent&&!(i.attachEvent.toString&&0>i.attachEvent.toString().indexOf("[native code"))&&!Y?(O=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)):(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)),i.src=n,K=i,D?x.insertBefore(i,D):x.appendChild(i),K=null,i;if(da)try{importScripts(n),e.completeLoad(t)}catch(s){e.onError(B("importscripts","importScripts failed for "+t+" at "+n,s,[t]))}},A&&M(document.getElementsByTagName("script"),function(e){x||(x=e.parentNode);if(t=e.getAttribute("data-main"))return r.baseUrl||(E=t.split("/"),Q=E.pop(),fa=E.length?E.join("/")+"/":"./",r.baseUrl=fa,t=Q),t=t.replace(ea,""),r.deps=r.deps?r.deps.concat(t):[t],!0}),define=function(e,t,n){var r,i;"string"!=typeof e&&(n=t,t=e,e=null),J(t)||(n=t,t=[]),!t.length&&I(n)&&n.length&&(n.toString().replace(la,"").replace(ma,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t)),O&&((r=K)||(P&&"interactive"===P.readyState||M(document.getElementsByTagName("script"),function(e){if("interactive"===e.readyState)return P=e}),r=P),r&&(e||(e=r.getAttribute("data-requiremodule")),i=F[r.getAttribute("data-requirecontext")])),(i?i.defQueue:T).push([e,t,n])},define.amd={jQuery:!0},l.exec=function(b){return eval(b)},l(r)}})(this),define("vendor/require",function(){}),define("skyjs.console",[],function(){var e,t,n={},r=function(){};if(!window.console){t=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","memoryProfile","memoryProfileEnd","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],window.console={};for(e=0;e<t.length;e+=1)console[t[e]]=r}return window.console&&!window.console.time&&(window.console.time=function(){}),window.console&&!window.console.timeEnd&&(window.console.timeEnd=function(){}),window.console&&!window.console.profile&&(window.console.profile=function(){}),window.console&&!window.console.profileEnd&&(window.console.profileEnd=function(){}),n}),define("window",[],function(){var e=function(){};return window.console||(window.console={log:e,info:e,warn:e,error:e}),window}),define("skyjs",["window"],function(e){function n(){window.SkyJS=t.extend(window.SkyJS||{},t,!0)}function r(){return t.require=require,t.define=define,n(),window.SkyJS}var t={};return t.namespace=function(t){var n,r=t.split("."),i=e;for(n=0;n<r.length;n+=1)i=i[r[n]]=i[r[n]]||{};return i},t.extend=function(e,n,r){var i,s;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r&&typeof n[i]=="object"&&n[i]!==null?(s={},e[i]=t.extend(s,n[i])):e[i]=n[i]);return e},r()}),define("skyjs.global.event",[],function(){var e={};return e.callbacks=[],e.subscribe=function(n){return typeof n!="function"?!1:(e.callbacks.push(n),!0)},e.unsubscribe=function(n){if(typeof n!="function")return!1;var r=e.callbacks.indexOf(n);return r===-1?!1:(e.callbacks.splice(r,1),!0)},e.trigger=function(n){var r,i,s=e.callbacks.length;if(typeof n!="object")return!1;for(r=0;r<s;r+=1)i=e.callbacks[r],i(n)},e}),define("skyjs.module",["skyjs","skyjs.global.event"],function(e,t){var n={};return n.Event=function(){var e={};this.on=function(t,n){return e[t]||(e[t]=[]),e[t].push(n),this},this.once=function(e,t){var n=this,r;return r=function(){t.apply(n,arguments),n.off(e,r)},this.on(e,r)},this.off=function(t,n){var r,i=e[t]?e[t].length:0;if(n)for(r=i-1;r>=0;r-=1)e[t][r]===n&&e[t].splice(r,1);return(!n||e[t]&&e[t].length===0)&&delete e[t],this},this.trigger=function(n,r){var i,s=e[n]?e[n].length:0,o={};for(i=s-1;i>=0;i-=1)e[n]&&e[n][i](r);return o.name=n,r&&(o.data=r),t.trigger(o),this}},n.addEventsTo=function(t){return e.extend(t,new n.Event)},n}),define("skyjs.event",["skyjs.module"],function(e){var t={};return function(n){e.addEventsTo(t),n.addEventListener?(t.add=function(e,t,n){e.addEventListener(t,n,!1)},t.remove=function(e,t,n){e.removeEventListener(t,n)}):n.attachEvent&&(t.add=function(e,t,n){e.attachEvent("on"+t,n)},t.remove=function(e,t,n){e.detachEvent("on"+t,n)})}(window),t}),define("skyjs.cookie",[],function(){var e={};return function(t,n){var r;e.set=function(e,r,i,s,o,u){var a,f=t.encodeURIComponent(e)+"="+t.encodeURIComponent(r);i!==0&&(i instanceof Date||(a=new Date,a.setTime(a.getTime()+(i||30)*864e5),i=a),f+="; expires="+i.toUTCString()),s&&(f+="; domain="+s),o&&(f+="; path="+o),u&&(f+="; secure"),n.cookie=f},e.get=function(e){var r=(new RegExp("(^|; )"+t.encodeURIComponent(e)+"=([^;]*)")).exec(n.cookie);return r?t.decodeURIComponent(r[2]):null},e.erase=function(t,n,r){e.set(t,"",-1,n,r)},e.enabled=function(){return r===undefined&&(e.set("_cookietest","1"),r=!!e.get("_cookietest")),r}}(window,document),e}),define("skyjs.live.event",["skyjs.module"],function(e){var t={};return e.addEventsTo(t),t}),define("skyjs.live.api",["window"],function(e){var t,n={};return n.getContactInfo=function(){return{liveId:$Config.email,displayPictureUrl:t($WLXIM.user)}},n.getJsonBlobBySkypeId=function(t){if(e.$WLXIM){var n=$WLXIM.user.findContactBySkypeId(t);if(n)return $WLXIM.user.createSkypeInitializationInfo(n);throw"[SkyJS.Live.Api].getJsonBlobBySkypeId cannot create json blob for: "+t}},n.getUserNameFromSkypeContact=function(e){return e.fullName||e.contactFullName||e.nickname||(e.emailAddress?e.emailAddress.address:"")},n.getSkypeContactFromMWTBlob=function(e){var t,n,r,i,s=null;if(e.buddy.contacts){n=e.buddy.contacts.length;for(t=0;t<n;t+=1)if(e.buddy.contacts[t].addresses){i=e.buddy.contacts[t].addresses.length;for(r=0;r<i;r+=1){if(e.buddy.contacts[t].addresses[r].type===8)return e.buddy.contacts[t];if(e.buddy.contacts[t].addresses[r].type===1||e.buddy.contacts[t].addresses[r].type===20){s=e.buddy.contacts[t];break}}}}return s},t=function(){var t,n,r=$WLXIM.user.get_contact().get_linkedContacts(),i=r.get_count();for(t=0;t<i;t+=1){n=r.get_item(t);if(n.get_network().get_id()==="WL")return n.get_displayPictureUrl().toString()}},n}),define("skyjs.tools",["window"],function(e){var t={};return typeof Array.isArray=="function"?t.isArray=Array.isArray:t.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"},t.calculateDurationInSeconds=function(e,t){return Math.round((e-t)/1e3)},t.stopwatch=function(){var t,n={};return n.start=function(){return t=(new e.Date).getTime(),n},n.duration=function(){return t?(new e.Date).getTime()-t:0},n.durationSeconds=function(){return n.duration()/1e3},n},function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){if(this===undefined||this===null)throw new TypeError('"this" is null or not defined');var n,r=this.length>>>0;t=+t||0,Math.abs(t)===Infinity&&(t=0),t<0&&(t+=r,t<0&&(t=0));for(n=0;t<r;t+=1)if(this[t]===e)return t;return-1})}(),t.getUTCTimestamp=function(){var e=new Date;return e.getTime()},t}),define("skyjs.url",["window","skyjs","skyjs.tools"],function(e,t,n){var r,i={};return i.encodeParam=function(t){var n=t;return t===null||t===undefined||n!==t?"":e.encodeURIComponent(t)},i.decodeParam=function(t){return t?e.decodeURIComponent(t.replace(/\+/g,"%20")):t},i.getParams=function(t){var n={};return t=t||e.location.search,t.replace(/[?&]([^=&]+)(?:(=)([^&]*))?/g,function(e,t,r,s){return n[i.decodeParam(t)]=r?i.decodeParam(s):undefined,e}),n},i.getParam=function(e,t){return i.getParams(t)[e]||""},i.objectToQueryString=function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(!e[t]||typeof e[t]!="object")&&n.push(i.encodeParam(t)+"="+i.encodeParam(e[t]));return n.join("&")},i.urlBuilder=function(e,i,s){var o,u,a=e;i&&(a[a.length-1]!=="/"&&i[0]!=="/"&&(a+="/"),a+=i);if(n.isArray(s)){u={};for(o=0;o<s.length;o+=1)t.extend(u,s[o]);a=r(a,u)}else typeof s=="object"&&(a=r(a,s));return a},i.urlIsValid=function(t,n){return n.test(t)},r=function(e,t){return e=e.indexOf("?")===-1?e+"?":e,e+i.objectToQueryString(t)},i}),define("document",["window"],function(e){return e.document}),define("skyjs.postMessage",["window","document","skyjs.event"],function(e,t,n){var r={},i=0,s=0,o;return r.createChannel=function(e,t,u){var a,f,l,c,h={parent:{},iframe:{}},p={},d=+(new Date)+(i+=1);if(!r.isHostWhitelisted(e))throw new Error("Parent origin not allowed");return a={addIframeHandler:function(e,t){h.iframe[e]=t},addParentHandler:function(e,t){h.parent[e]=t},sendToParent:function(t){f(parent,t,e)},sendToIframe:function(e){var n=document.getElementById(u);if(!u||!n)return;f(n.contentWindow,e,t)},onParentRequest:function(e){h.parent[e.action]={success:e.handler}},onIframeRequest:function(e){h.iframe[e.action]={success:e.handler}},request:function(e){e.uid="uid_"+(s+=1),p[e.uid]={success:e.success,error:e.error};if(e.target==="parent")a.sendToParent(e);else{if(e.target!=="iframe")throw new TypeError("Target undefined");a.sendToIframe(e)}},destroy:function(){n.remove(window,"message",c)}},f=function(t,n,r){t.postMessage(JSON.stringify({code:n.code||200,message:n.message||"success",action:n.action,data:n.data,uid:n.uid,channelId:d,target:n.target}),r)},l=function(t,n){if(n.code===200&&t.success)if(n.uid){var r={data:n.data},i=n.target==="parent"?"sendToIframe":"sendToParent";r.success=function(e){a[i]({data:e,uid:n.uid})},r.error=function(e){a[i]({code:400,data:e,uid:n.uid})},t.success(r)}else t.success(n);else t.error&&t.error(n)},c=function(r){var i,s,u;if(!o(r.origin,e)&&!o(r.origin,t))return!1;try{i=JSON.parse(r.data)}catch(a){return}if(!i||!i.code)return!1;if(i.channelId===d)return!1;i.uid&&p[i.uid]&&(o(r.origin,e)||o(r.origin,t))?i.code===200?p[i.uid].success(i.data||null):p[i.uid].error&&p[i.uid].error(i.data||null):i.action&&(s=h.parent[i.action],s&&o(r.origin,e)&&l(s,i),u=h.iframe[i.action],u&&o(r.origin,t)&&l(u,i))},n.add(window,"message",c),a},o=function(t,n){return n==="*"||t===n},r.isHostWhitelisted=function(e,t){var n,r,i=["skype\\.(com|net)","live(-int|-ext)?\\.com"];if(t)for(n=0;n<t.length;n+=1)i.push(t[n]);for(n=0;n<i.length;n+=1)i[n]="("+i[n]+")";return r=new RegExp("^(http(s)?://)?([0-9a-z\\-\\.]+\\.)?("+i.join("|")+")?(:\\d+)?(/)?$","i"),r.test(e)},r}),define("skyjs.detect.supportedBrowsers",[],function(){var e={};return function(){e.OS={Windows:{msie:{min:8},firefox:{min:12},chrome:{min:19}},MacOS:{firefox:{min:12},chrome:{min:19},safari:{min:6}}}}(),e}),define("skyjs.detect",["window","skyjs.detect.supportedBrowsers"],function(e,t){var n,r={};return r.browserDetails=function(t){var n,i,s,o,u,a,f={};n=r.getNavigatorUserAgent(),i=(t||n).toLowerCase(),o=i.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i),s=function(t){return t.test(i)},s(/windows|win32/i)?f.OS="Windows":s(/macintosh|mac os x/i)?f.OS="MacOS":f.OS="Other",f.isOnWinRT=s(/ arm;/i),f.isOnWin8=s(/windows nt 6\.2;/i),o?(u=i.match(/version\/([\.\d]+)/i),f.name=o[1],f.version=parseFloat(u?u[1]:o[2]),f.name==="msie"&&s(/trident/)&&(a=parseFloat(i.match(/trident\/([\.\d]+)/i)[1]),f.version-a<4&&(f.version=a+4))):(f.name=e.navigator.appName,f.version=parseFloat(e.navigator.appVersion)),f.isIE11=s(/trident\/7\.0;/i)&&s(/ rv:11\.0/i),f.isIE11&&(f.name="msie",f.version=11);try{f.hasActiveXEnabled=Boolean(r.getActiveXObject("htmlfile"))}catch(l){f.hasActiveXEnabled=!1}return f.isIE10=s(/trident\/6\.0/i)&&s(/msie/i),f.isIE10modern=f.isIE10&&f.isOnWin8&&!f.hasActiveXEnabled,f.isIE64bits=s(/trident/)&&s(/win64/i),f.isOSXChrome64Bits=f.OS==="MacOS"&&f.version>=39,f},r.getNavigatorUserAgent=function(){return e.navigator.userAgent||""},r.isPluginInstallable=function(){return r.browser.name!=="msie"||!r.browser.isOnWinRT&&r.browser.hasActiveXEnabled},r.isBrowserConfigSupported=function(e){function o(){return n[s.OS]&&n[s.OS][s.name]}function u(){return s.version>=i.min}function a(){return!i.max||s.version<=i.max}function f(){var e;if(i.exc)for(e=0;e<i.exc.length;e+=1)if(s.version===i.exc[e])return!0;return!1}var n=t.OS,i,s=e||r.browser;return o()?(i=n[s.OS][s.name],u()&&a()&&!s.isIE64bits&&!s.isOSXChrome64Bits&&!f()):!1},r.hasSkypeClient=function(){var t,n;try{if(e.ActiveXObject&&r.getActiveXObject("Skype.Detection"))return!0}catch(i){}return t=r.getNavigatorMimeType("application/x-skype"),n=r.getNavigatorMimeType("application/x-skype-web-plugin-2"),typeof t=="object"||typeof n=="object"?!0:!1},r.getActiveXObject=function(t){return new e.ActiveXObject(t)},r.getNavigatorMimeType=function(t){var n=e.navigator.mimeTypes;return n[t]},n=function(){r.browser=r.browserDetails()},n(),r}),define("skyjs.rtc",["skyjs.detect","window","document"],function(e,t,n){function f(e){this.name="PluginError",this.message=e}var r={},i="skypewebplugin",s,o,u,a;return f.prototype=Error.prototype,r.createPlugin=function(e){o()&&r.removePlugin();var t=n.createElement("div");n.body.appendChild(t),t.innerHTML=s(i),u(e)},r.removePlugin=function(){var e=o();if(!e)throw new f("Not present");e.parentNode.parentNode.removeChild(e.parentNode),t.clearInterval(a)},r.getVersion=function(){t.navigator.plugins&&typeof t.navigator.plugins.refresh=="function"&&t.navigator.plugins.refresh(!1);var e,n=t.navigator.mimeTypes["application/x-skype-web-plugin-2"],r=n&&n.enabledPlugin?n.enabledPlugin.version:"";if(/^\d+(\.\d+)+$/.test(r))return r;e=o();try{return r=e.getVersion(),r}catch(i){return null}},s=function(n){var r="width: 0px; height: 0px; right: 0px; bottom: 0px; position: absolute;",i='<param name="L" value="ae2d36dbee900a2d1e107381cc9959da">';return e.browser.name==="msie"?'<object style="'+r+'" id="'+n+'" classid="CLSID:39D38FB8-13F8-4232-A409-01B920B0618C">'+i+"</object>":'<object style="'+r+'" id="'+n+'" type="application/x-skype-web-plugin-2">'+i+"</object>"},o=function(){return n.getElementById(i)},u=function(n){if(!n)return;var r=+(new Date),i;i=function(){var i=o(),s;i?(s=typeof i.startCallSequence,s!=="undefined"?(t.clearInterval(a),n(i)):+(new Date)-r>3e3&&(t.clearInterval(a),n(i))):t.clearInterval(a)},t.clearInterval(a),a=t.setInterval(i,20)},r}),define("error.const",[],function(){return{EVENTS:{generic:"error"},TYPES:{ajax:"AJAX error",browserNotSupported:"browser not supported",init:"Initialization error",MWTConversationInitFailure:"MWT Conversation init failure"}}}),define("skyjs.error",["skyjs.event","error.const"],function(e,t){var n={};return n.handle=function(n,r){var i=r||t.EVENTS.generic,s=!0;n.errorType===t.TYPES.ajax&&(s=n.trackError),s&&e.trigger(i,{vars:n})},n}),define("common.const",[],function(){return{TELEMETRY_SYSTEMS:{SKYPE_DATA:"telemetry.skypeData"},FLOWS:{bing:"bing",outlook:"outlook"},CALL_STATUS:{answeredInOtherEndpoint:"answeredInOtherEndpoint"},CALL_DATA:{callId:"callId"},EVENTS:{click:"click",contextmenu:"contextmenu",focus:"focus",mousedown:"mousedown",mousemove:"mousemove",mouseleave:"mouseleave",mouseout:"mouseout",mouseover:"mouseover",mouseOutBlur:"mouseout blur",mouseup:"mouseup",resize:"resize",initialized:"initialized",translationReady:"translationReady",translationLoaded:"translationLoaded",callSessionStarted:"callSessionStarted",callSessionAccepted:"callSessionAccepted",callSessionConnected:"callSessionConnected",callSessionCompleted:"callSessionCompleted",startCallClicked:"startCallClicked",CALL_STATE:{callFinished:"callFinished",callSetupComplete:"callSetupComplete",callSetupError:"callSetupError",callStarted:"callStarted",pluginStarted:"pluginStarted",pluginRunning:"pluginRunning",running:"running",skyjsPluginRunning:"skyjsPluginRunning"},CRS:{CRSinviteInvalid:"CRSinviteInvalid",CRSinviteValid:"CRSinviteValid"}},NOTIFICATIONS:{incomingCall:100,stopRinging:104},PATHS:{profileAvatar:"/profile/avatar",pluginInstallModal:"/assets/images/plugin-install-modal/",pluginInstallPopup:"/plugin-install-popup.html",linkingImages:"/assets/images/linking/",outsideWorldOutlook:"/assets/js-locale/OutsideWorldOutlook/"},HTTP_HEADERS:{swxSessionId:"SWX-SessionId",swxClientRetry:"SWX-ClientRetry",VALUES:{disabled:"disabled"}},KEY_CODES:{escape:27,tab:9},BROWSERS:{CHROME:"chrome",FIREFOX:"firefox",MSIE:"msie",SAFARI:"safari"},PLATFORMS:{WINDOWS:"Windows",MAC:"MacOS"},INSTALL_STEPS:{WINDOWS:{CHROME:{img1:"imgPluginInstallChromeWin1.jpg",img2:"imgPluginInstallChromeWin2.jpg",text1:"msg_pluginInstall_chrome_win_step1",text2:"msg_pluginInstall_chrome_win_step2"},FIREFOX:{img1:"imgPluginInstallFirefoxWin1.jpg",img2:"imgPluginInstallFirefoxWin2.jpg",text1:"msg_pluginInstall_firefox_win_step1",text2:"msg_pluginInstall_firefox_win_step2"},MSIE:{img1:"imgPluginInstallIE1.jpg",img2:"imgPluginInstallIE2.jpg",text1:"msg_pluginInstall_msie_step1",text2:"msg_pluginInstall_msie_step2"}},MAC:{SAFARI:{img1:"imgPluginInstallSafari1.jpg",img2:"imgPluginInstallSafari2.jpg",text1:"msg_pluginInstall_safari_step1",text2:"msg_pluginInstall_safari_step2"}}},SELECTORS:{installStep1Image:".pluginInstall_step1 img",installStep2Image:".pluginInstall_step2 img",installStep1Paragraph:".pluginInstall_step1 p",installStep2Paragraph:".pluginInstall_step2 p",continueCall:".continueCall",closeWindow:".closeWindow",deviceLinks:".getHeadsetBtn, .headsetsLink, .getWebcamBtn, .webcamsLink, .supportLink",callState:"#callstate"},AJAX_DATA_TYPES:{html:"html",json:"json",jsonp:"jsonp",script:"script",text:"text"},HTTP_VERBS:{connect:"CONNECT","delete":"DELETE",get:"GET",head:"HEAD",options:"OPTIONS",post:"POST",put:"PUT",trace:"TRACE",track:"TRACK"},FORM_ENCODING:{urlEncoded:"application/x-www-form-urlencoded"}}}),define("skyjs.net",["skyjs","skyjs.url","window","document","skyjs.error","common.const","error.const"],function(e,t,n,r,i,s,o){function E(e,t){var n,r;for(n in t)t.hasOwnProperty(n)&&(r=t[n],r!==undefined&&r!==null&&e.setRequestHeader(n,r))}function S(e){this.name="SkyJS.Net:JsonpException",this.message=e||""}var u,a,f,l,c,h,p,d,v,m,g,y,b=function(){},w={};return w.loadJS=function(e,t,n,i,s){var o,u=+(new Date),a=r.createElement("script"),f=r.head||r.getElementsByTagName("head")[0];f&&(o=function(){i&&a.parentNode&&a.parentNode.removeChild(a);if(s===!1)return},a.readyState?a.onreadystatechange=function(){if(a.readyState==="loaded"||a.readyState==="complete")a.onreadystatechange=null,o(),t&&t()}:a.onload=function(){a.onload=null,o(),t&&t()},a.onerror=function(){o(),n&&n()},a.async="async",a.src=e,f.insertBefore(a,f.firstChild))},w.ajax=function(r){var i,o,u,f=function(){};if(!r||typeof r!="object")return!1;i={acceptContentType:null,async:!0,cache:!1,data:"",dataType:s.AJAX_DATA_TYPES.json,dataTypeFromHeader:!1,dontSerializeData:!1,headers:{},isCrossDomain:!1,method:s.HTTP_VERBS.get,password:null,postDataType:s.FORM_ENCODING.urlEncoded,retryInstance:null,skipDataEncoding:!1,timeout:3e4,trackError:!0,url:n.location.href,user:null,withCredentials:"false",success:f,error:f,cancel:f,retryCallback:f};for(u in r)r.hasOwnProperty(u)&&i[u]===undefined&&delete r[u];return o=e.extend(i,r,!0),o.url=o.url.replace(/#.*/,""),o.method===s.HTTP_VERBS.get&&o.data&&(o.url=o.url+(/\?/.test(o.url)?"&":"?")+t.objectToQueryString(o.data)),a(o)},a=function(e){var r,i,s=+(new Date);if(!e.isCrossDomain||w.isBrowserCORSCapable())r=f(e),E(r,e.headers),r.onreadystatechange=function(){r&&r.readyState===4&&(u(r.status)?(r.onreadystatechange=b,d(e,r)):v(e,r),n.clearTimeout(i))};else{if(!p())return!1;r=l(e),r.onload=function(){d(e,r)},r.onerror=function(){v(e,r)}}if(!r)return!1;!e.dontSerializeData&&!e.skipDataEncoding&&(e.data=t.objectToQueryString(e.data));try{/POST|PUT/.test(e.method)?r.send(e.data):r.send(),i=n.setTimeout(function(){e.success=b,v(e,r,"timeout")},e.timeout)}catch(o){return r.onreadystatechange&&(r.onreadystatechange=b),r.onload&&(r.onload=b),v(e,r,o),!1}return r.options=e,r},p=function(){return w.getXDomainRequestObject()!==undefined},w.getXDomainRequestObject=function(){return new n.XDomainRequest},f=function(e){var t=w.getXHR();return t.open(e.method,e.url,e.async,e.user,e.password),e.withCredentials==="true"&&(t.withCredentials="true"),t.setRequestHeader("Content-Type",e.postDataType),e.acceptContentType&&t.setRequestHeader("Accept",e.acceptContentType),e.overrideMimeType&&t.overrideMimeType&&t.overrideMimeType(e.overrideMimeType),e.cache&&e.method==="GET"&&(t.setRequestHeader("If-Modified-Since","Sat, 01 Jan 1990 00:00:00 GMT"),t.setRequestHeader("Cache-Control","no-cache")),t},l=function(e){var t=w.getXDomainRequestObject();return t.open(e.method,e.url),t.ontimeout=b,t.onprogress=b,t},u=function(e){return/\b(2\d\d|1223)\b/.test(e)},d=function(e,t){var n,r,i=t.responseText;if(i){n=t.contentType||t.getResponseHeader("Content-Type");if(!e.dataTypeFromHeader&&e.dataType==="json"||/\/json/i.test(n)&&e.dataType!=="jsonp")try{r=JSON.parse(i)}catch(s){v(e,t,"Could not parse JSON in response, "+i+", "+s)}else r=i}e.success(r,"success",t)},w.isBrowserCORSCapable=function(){return w.getXHR().withCredentials!==undefined},w.getXHR=function(){if(n.XMLHttpRequest)return new n.XMLHttpRequest;if(n.ActiveXObject)return new n.ActiveXObject("Microsoft.XMLHTTP")},S.prototype=Error.prototype,w.jsonp=function(e){var r,i,s,o,u,a,f,l=+(new Date);e=e||{},o=e.jsonpCallback||"skyjsjsonp"+ +(new Date),i=(e.data?t.objectToQueryString(e.data)+"&":"")+(e.jsonp||"callback")+"="+o,r=e.url+(/\?/.test(e.url)?"&":"?")+i,u=function(){e.retry-=1,typeof e.retryCallback=="function"&&e.retryCallback(e.retry),w.jsonp(e)},a=function(t){n[o]&&(n[o]=null),n.clearTimeout(s),e.success.apply(null,t)},f=function(){n[o]&&(n[o]=null),n.clearTimeout(s),e.retry>0?u():v(e,{},"JSONP error",400)},n[o]=function(){arguments.length===0?f():a(arguments)},w.loadJS(r,b,f,!0,!1),s=n.setTimeout(f,e.timeout||2e4)},v=function(e,t,n,r){if(c(e,t)&&y(t.status,n)){e.retryInstance.setMaxRetriesReached(function(){m(e,t,n,r)}),e.retryInstance.retry(function(){a(e)});return}m(e,t,n,r)},m=function(e,t,n,r){var s={errorType:o.TYPES.ajax,requestURL:e.url,trackError:e.trackError,message:t.responseText||n||"No error message",code:t.status||r||"No HTTP status code"};typeof e.error=="function"&&e.error(s),i.handle(s)},y=function(e,t){return parseInt(e,10)>=500||t==="timeout"},c=function(e,t){return g(e)&&!h(t)},g=function(e){return e.hasOwnProperty("retryInstance")&&e.retryInstance!==null&&typeof e.retryInstance.retry=="function"},h=function(e){return e.getResponseHeader(s.HTTP_HEADERS.swxClientRetry)===s.HTTP_HEADERS.VALUES.disabled},w}),define("skyjs.skype.plugin.const",[],function(){return{EVENTS:{downloadPlugin:"downloadPlugin",PluginUnsupportedOS:"PluginUnsupportedOS",downloadPluginCallback:"downloadPluginCallback",initializeSuccess:"initializeSuccess",notifyNeedImprint:"notifyNeedImprint",notifyLoginSuccess:"notifyLoginSuccess",notifyLoginFailure:"notifyLoginFailure",notifyMyVideoSizeChange:"notifyMyVideoSizeChange",notifyRemoteVideoSizeChange:"notifyRemoteVideoSizeChange",notifyMyVideoChange:"notifyMyVideoChange",notifyCallParticipantVideoChange:"notifyCallParticipantVideoChange",notifyCallConnected:"notifyCallConnected",notifyCallFinished:"notifyCallFinished",notifyMicDevListChange:"notifyMicDevListChange",notifyCamDevListChange:"notifyCamDevListChange",notifySpeakerDevListChange:"notifySpeakerDevListChange",notifyError:"notifyError",notifyCreditBalanceChange:"notifyCreditBalanceChange",notifyWindowStateChange:"notifyWindowStateChange",notifyParticipantListChange:"notifyParticipantListChange",setupComplete:"setupComplete",resizing:"resizing",callDurationChanged:"callDurationChanged"},FLOWS:{incoming:"in",outgoing:"out"}}}),define("settings",[],function(){var e={},t={},n={rendezvousBingBaseUrl:"rendezvous.bing.baseUrl",rendezvousBuildVersionRequestedMod:"rendezvous.build.version.requested.MOD",rendezvousCdnUrl:"rendezvous.cdn.url",rendezvousCrsUrl:"rendezvous.crs.url",rendezvousEnvId:"rendezvous.envid",rendezvousMwt6LoaderDogfood:"rendezvous.mwt6.loader.dogfood",rendezvousMwt6LoaderInt:"rendezvous.mwt6.loader.int",rendezvousMwt6LoaderProd:"rendezvous.mwt6.loader.prod",rendezvousMwtLoader:"rendezvous.mwt.loader",rendezvousPluginDetailsUrlMac:"rendezvous.plugin.detailsURL.mac",rendezvousPluginDetailsUrlWindows:"rendezvous.plugin.detailsURL.windows",rendezvousPluginDetailsUrlRtcMac:"rendezvous.plugin.detailsURLrtc.mac",rendezvousPluginDetailsUrlRtcWindows:"rendezvous.plugin.detailsURLrtc.windows",rendezvousPluginMinimumMac:"rendezvous.plugin.minimum.mac",rendezvousPluginMinimumWindows:"rendezvous.plugin.minimum.windows",rendezvousRegistrarApiRegisterUrl:"rendezvous.registrar.api.registerurl",rendezvousSkypeDataUrl:"rendezvous.skypeData.url",rendezvousSkypeStaticContentUrl:"rendezvous.skype.static.content.url",rendezvousSkypeWebExperienceApiContactsAccept:"rendezvous.skypewebexperience.api.contacts.accept",rendezvousSkypeWebExperienceApiContactsAdd:"rendezvous.skypewebexperience.api.contacts.add",rendezvousSkypeWebExperienceApiContactsDecline:"rendezvous.skypewebexperience.api.contacts.decline",rendezvousSkypeWebExperienceApiContactsBlock:"rendezvous.skypewebexperience.api.contacts.block",rendezvousSkypeWebExperienceApiContactsList:"rendezvous.skypewebexperience.api.contacts.list",rendezvousSkypeWebExperienceApiContactsUnblock:"rendezvous.skypewebexperience.api.contacts.unblock",rendezvousSkypeWebExperienceHost:"rendezvous.skypewebexperience.host",rendezvousSkypeWebExperienceSwxLiteHost:"rendezvous.skypewebexperience.swxlite.host",rendezvousSkypeWebExperienceSwxLiteCdnUrl:"rendezvous.skypewebexperience.swxlite.cdn.url",rendezvousSkypeWebExperienceSsoUrl:"rendezvous.skypewebexperience.sso.url",rendezvousSkypeWebExperienceSsoWindowWidth:"rendezvous.skypewebexperience.sso.window.width",rendezvousSkypeWebExperienceSsoWindowHeight:"rendezvous.skypewebexperience.sso.window.height",rendezvousSkypeWebExperienceSsoReturnUrl:"rendezvous.skypewebexperience.sso.returnUrl",rendezvousSkypeWebExperienceSsoLoggedInUrl:"rendezvous.skypewebexperience.sso.loggedInUrl",rendezvousSkypeWebExperienceCallTokenPath:"rendezvous.skypewebexperience.api.calltoken.path",rendezvousSkypeWebExperienceGetUicPath:"rendezvous.skypewebexperience.api.getUic.path",rendezvousSkypeWebExperienceLoginPath:"rendezvous.skypewebexperience.api.login.path",rendezvousSkypeWebExperienceInitializationPath:"rendezvous.skypewebexperience.api.initialization.path",rendezvousSkypeWebExperienceRefreshPath:"rendezvous.skypewebexperience.api.refresh.path",rendezvousSkypeWebExperienceRegisterPresencePath:"rendezvous.skypewebexperience.api.register.presence.path",rendezvousSkypeWebExperienceGetCredentialsPath:"rendezvous.skypewebexperience.api.getcredentials.path",rendezvousSkypeWebExperienceSetCredentialsPath:"rendezvous.skypewebexperience.api.setcredentials.path",rendezvousSkypeWebExperienceSkypeHost:"rendezvous.skypewebexperience.skype.host",rendezvousSkypeWebExperienceUrl:"rendezvous.skypewebexperience.url",rendezvousSkypeWebExperienceUsermapPath:"rendezvous.skypewebexperience.api.usermap.path",rendezvousTpcApiSasUrl:"rendezvous.tpc.api.sasurl",rendezvousTpcServiceUrl:"rendezvous.tpc.service.url",rendezvousTelemetryPath:"rendezvous.telemetry.path",rendezvousTrouterUrl:"rendezvous.trouter.url",rendezvousUmApiAccessToken:"rendezvous.um.api.accesstoken",rendezvousUmApiContactsAcceptRequest:"rendezvous.um.api.contacts.acceptrequest",rendezvousUmApiContactsBlockContact:"rendezvous.um.api.contacts.blockcontact",rendezvousUmApiContactsDeclineRequest:"rendezvous.um.api.contacts.declinerequest",rendezvousUmApiContactsGetPending:"rendezvous.um.api.contacts.getpending",rendezvousUmApiContactsSendRequest:"rendezvous.um.api.contacts.sendrequest",rendezvousUmApiContactsUnblockContact:"rendezvous.um.api.contacts.unblockcontact",rendezvousUmApiLoginUic:"rendezvous.um.api.loginuic",rendezvousUmApiPluginLoaderDomain:"rendezvous.um.api.pluginLoaderDomain",rendezvousUmApiPluginLoaderVersion:"rendezvous.um.api.pluginLoaderVersion",rendezvousUmApiSkypeToken:"rendezvous.um.api.skypetoken",rendezvousUmApiTechnical:"rendezvous.um.api.technical",rendezvousUmApiUsermap:"rendezvous.um.api.usermap",rendezvousUmApiUsers:"rendezvous.um.api.users",rendezvousRetryTimeToIncrement:"rendezvous.retry.timeToIncrement",rendezvousRetryExponentialFactor:"rendezvous.retry.exponentialFactor",rendezvousRetryMaxRetries:"rendezvous.retry.maxRetries",rendezvousLiveApiUri:"rendezvous.live.api.uri"};return t[n.rendezvousBingBaseUrl]="http://www.bing.com",t[n.rendezvousBuildVersionRequestedMod]="3-14-1802",t[n.rendezvousCdnUrl]="https://az598575.vo.msecnd.net/3-14-1802",t[n.rendezvousCrsUrl]="https://rendezservice.skype.com",t[n.rendezvousEnvId]="PRODUCTION",t[n.rendezvousMwt6LoaderDogfood]="https://secure.wlxrs.com/_D/F$Live.SiteContent.Messenger/6.2.2236/loader.cxp.dogfood.js",t[n.rendezvousMwt6LoaderInt]="https://js.wlxrs-int.com/_D/F$Live.SiteContent.Messenger/6.2.2236/loader.cxp.int.js",t[n.rendezvousMwt6LoaderProd]="https://secure.wlxrs.com/_D/F$Live.SiteContent.Messenger/6.2.2236/loader.cxp.js",t[n.rendezvousMwtLoader]="https://js2.wlxrs.com/_D/F$Live.SiteContent.Messenger/5.4.1723/loader.cxp.js",t[n.rendezvousPluginDetailsUrlMac]="https://az379195.vo.msecnd.net/public/catalog/outlook-com-plugin/update-mac.json",t[n.rendezvousPluginDetailsUrlWindows]="https://az379195.vo.msecnd.net/public/catalog/outlook-com-plugin/update-win.json",t[n.rendezvousPluginDetailsUrlRtcMac]="https://az379195.vo.msecnd.net/public/catalog/outlook-com-plugin/update-mac.json",t[n.rendezvousPluginDetailsUrlRtcWindows]="https://az379195.vo.msecnd.net/public/catalog/outlook-com-plugin/update-win.json",t[n.rendezvousPluginMinimumMac]="2.13.0",t[n.rendezvousPluginMinimumWindows]="2.13.0",t[n.rendezvousRegistrarApiRegisterUrl]="https://prod.registrar.skype.com/v2/registrations",t[n.rendezvousSkypeDataUrl]="https://pipe.skype.com/Client/2.0/",t[n.rendezvousSkypeStaticContentUrl]="https://skypewebexperience.skype.com/content/3-14-1802",t[n.rendezvousSkypeWebExperienceApiContactsAccept]="/v1/users/{USERID}/contacts/accept/{CONTACTID}",t[n.rendezvousSkypeWebExperienceApiContactsAdd]="/v1/users/{USERID}/contacts/add/{CONTACTID}",t[n.rendezvousSkypeWebExperienceApiContactsBlock]="/v1/users/{USERID}/contacts/block/{CONTACTID}",t[n.rendezvousSkypeWebExperienceApiContactsDecline]="/v1/users/{USERID}/contacts/decline/{CONTACTID}",t[n.rendezvousSkypeWebExperienceApiContactsList]="/v1/users/{USERID}/contacts/requests",t[n.rendezvousSkypeWebExperienceApiContactsUnblock]="/v1/users/{USERID}/contacts/unblock/{CONTACTID}",t[n.rendezvousSkypeWebExperienceLoginPath]="/v1/User/Login",t[n.rendezvousSkypeWebExperienceInitializationPath]="/v1/User/Initialization",t[n.rendezvousSkypeWebExperienceRefreshPath]="/v1/User/RefreshPresence",t[n.rendezvousSkypeWebExperienceRegisterPresencePath]="/v1/User/RegisterPresence",t[n.rendezvousSkypeWebExperienceGetCredentialsPath]="/v1/WebLogin/GetCredentials",t[n.rendezvousSkypeWebExperienceSetCredentialsPath]="/v1/WebLogin/SetCredentials",t[n.rendezvousSkypeWebExperienceCallTokenPath]="/v1/WebLogin/CallToken",t[n.rendezvousSkypeWebExperienceHost]="https://skypewebexperience.live.com",t[n.rendezvousSkypeWebExperienceSwxLiteHost]="https://skypewebexperience.skype.com",t[n.rendezvousSkypeWebExperienceSwxLiteCdnUrl]="https://skypewebexperience.skype.com/v1/client/lite",t[n.rendezvousSkypeWebExperienceSsoUrl]="https://login.skype.com/login?application=swx&return_url={returnUrl}&frmrgtpe=2",t[n.rendezvousSkypeWebExperienceSsoWindowWidth]="500",t[n.rendezvousSkypeWebExperienceSsoWindowHeight]="400",t[n.rendezvousSkypeWebExperienceSsoReturnUrl]="https://skypewebexperience.skype.com/v1/WebLogin/Login?redirectUrl={loggedInUrl}",t[n.rendezvousSkypeWebExperienceSsoLoggedInUrl]="https://skypewebexperience.skype.com/v1/client/lite/swxlite-sso-logincomplete.html?openerOrigin={openerOrigin}",t[n.rendezvousSkypeWebExperienceGetUicPath]="/v1/User/Uic",t[n.rendezvousSkypeWebExperienceUrl]="https://skypewebexperience.live.com/content/3-14-1802",t[n.rendezvousSkypeWebExperienceSkypeHost]="https://skypewebexperience.skype.com",t[n.rendezvousSkypeWebExperienceUsermapPath]="/v1/UserMapping/UserMap",t[n.rendezvousTpcApiSasUrl]="https://prod.tpc.skype.com/v1/policies",t[n.rendezvousTpcServiceUrl]="https://skypewebexperience.skype.com/v1/BrowserDetection/TPC",t[n.rendezvousTelemetryPath]="assets/javascript/telemetry/",t[n.rendezvousTrouterUrl]="https://go.trouter.io/v2/a",t[n.rendezvousUmApiAccessToken]="https://api.skype.com/rps/access-token",t[n.rendezvousUmApiContactsSendRequest]="https://api.skype.com/users/{USERID}/contacts/auth-request/{CONTACTID}",t[n.rendezvousUmApiContactsAcceptRequest]="https://api.skype.com/users/{USERID}/contacts/auth-request/{CONTACTID}/accept",t[n.rendezvousUmApiContactsDeclineRequest]="https://api.skype.com/users/{USERID}/contacts/auth-request/{CONTACTID}/decline",t[n.rendezvousUmApiContactsBlockContact]="https://api.skype.com/users/{USERID}/contacts/{CONTACTID}/block",t[n.rendezvousUmApiContactsGetPending]="https://api.skype.com/users/{USERID}/contacts/auth-request",t[n.rendezvousUmApiContactsUnblockContact]="https://api.skype.com/users/{USERID}/contacts/{CONTACTID}/unblock",t[n.rendezvousUmApiLoginUic]="https://uic.login.skype.com/login/uic",t[n.rendezvousUmApiPluginLoaderDomain]="https://uic.login.skype.com",t[n.rendezvousUmApiPluginLoaderVersion]="3-14-1802",t[n.rendezvousUmApiSkypeToken]="https://uic.login.skype.com/skypetoken/mapping-container",t[n.rendezvousUmApiTechnical]="https://api.skype.com/users/technical",t[n.rendezvousUmApiUsermap]="https://api.skype.com/partners/999/usermap",t[n.rendezvousUmApiUsers]="https://api.skype.com/users",t[n.rendezvousRetryTimeToIncrement]="1000",t[n.rendezvousRetryExponentialFactor]="2",t[n.rendezvousRetryMaxRetries]="1",t[n.rendezvousLiveApiUri]="[[rendezvous.live.api.uri]]",e.get=function(e){return t[e]},e.set=function(e,n){n&&(t[e]=n)},e.KEYS=n,e}),define("skyjs.skype.plugin",["window","skyjs","skyjs.module","skyjs.detect","skyjs.url","skyjs.rtc","skyjs.net","skyjs.skype.plugin.const","settings"],function(e,t,n,r,i,s,o,u,a){function T(){return e.insideWorld||null}function N(e,t){var n={func:e,parameters:t||{}},r=T().javascriptCall(JSON.stringify(n)),i;if(r)return i=JSON.parse(r).parameters,i}function C(){var e;try{e=N("getVersion"),e&&y.compareVersion(e.version,"2.5")>=0?y.APIversion=2:y.APIversion=1}catch(t){y.APIversion=1}}function k(e){f.state=e}var f,l,c,h,p,d,v,m,g=r.browser,y={},b,w,E,S,x;return n.addEventsTo(y),y.APIversion=1,y.config={pluginFileURL:{Windows:a.get(a.KEYS.rendezvousPluginDetailsUrlWindows),MacOS:a.get(a.KEYS.rendezvousPluginDetailsUrlMac)},latestPluginDetectOptions:{activeXObjName:"Skype.SkypeWebPlugin.2",mimeType:"application/x-skype-web-plugin-2",mimeDescription:"SkypeWebPlugin Video Calling Plugin"},oldPluginDetectOptions:{activeXObjName:"Skype.SkypeWebPlugin.1",mimeType:"application/skype-web-plugin",mimeDescription:"SkypeWebPlugin Video Calling Plugin"}},y.SkypePlugin={isInstalled:!1,details:{}},e.navigator!==undefined&&(p=function(t,n){var r={},i=e.navigator;return i&&(i.plugins&&typeof i.plugins.refresh=="function"&&i.plugins.refresh(!1),t&&i.mimeTypes&&typeof i.mimeTypes.length=="number"&&i.mimeTypes.length?i.mimeTypes[t]&&i.mimeTypes[t].enabledPlugin&&(r=i.mimeTypes[t].enabledPlugin):n&&i.plugins&&typeof i.plugins.length=="number"&&i.plugins.length&&(r=i.plugins[n])),r||null}),y.isPluginInstalled=function(){var e,t,n=w(),r={};t=E(n),e=t.pluginObj||{},r.activex=t.isActiveX;try{r.description=e.description||"[Unknown]",r.filename=e.filename||"[Unknown]",r.name=e.name||"[Unknown]",r.version=e.version||"[Unknown]"}catch(i){r.description="[Unknown]",r.filename="[Unknown]",r.name="[Unknown]",r.version="[Unknown]"}return y.SkypePlugin.details=r,y.SkypePlugin.details.description!=="[Unknown]"||r.activex?(y.SkypePlugin.isInstalled=!0,!0):(y.SkypePlugin.isInstalled=!1,!1)},w=function(){var e={};return e.activeXObjNames=[y.config.latestPluginDetectOptions.activeXObjName,y.config.oldPluginDetectOptions.activeXObjName],e.mimeTypesAndDescriptions=[{mimeType:y.config.latestPluginDetectOptions.mimeType,mimeDescription:y.config.latestPluginDetectOptions.mimeType},{mimeType:y.config.oldPluginDetectOptions.mimeType,mimeDescription:y.config.oldPluginDetectOptions.mimeType}],e},E=function(e){var t,n=!1;return t=S(e.activeXObjNames),t&&(n=!0),t||(t=x(e.mimeTypesAndDescriptions)),{pluginObj:t,isActiveX:n}},S=function(t){var n,r,i;if(e.ActiveXObject||g.isIE11===!0||g.isIE10===!0)for(n=0;n<t.length;n+=1){r=t[n];try{i=new e.ActiveXObject(r);if(i!==undefined)return i}catch(s){}}return null},x=function(e){var t,n,r,i;for(t=0;t<e.length;t+=1){r=e[t].mimeType,i=e[t].mimeDescription;if(p){n=p(r,i);if(n&&n.description)return n}}return null},d=function(){y.processVersion(function(e){var t;g.OS==="MacOS"?t=a.get(a.KEYS.rendezvousPluginMinimumMac):t=a.get(a.KEYS.rendezvousPluginMinimumWindows),y.compareVersion(e,t)<0?y.isOutdatedFlag=1:y.isOutdatedFlag=0})},y.validatePluginVersion=function(e,t){function n(n){n&&n.version?y.isOutdatedFlag=y.compareVersion(e,n.version)<0?!0:!1:y.isOutdatedFlag=!1,t&&t()}y.getCurrentPluginDetails({success:function(e){n(e)},error:function(){n()}})},y.downloadPlugin=function(){y.trigger(u.EVENTS.downloadPlugin),y.getCurrentPluginDetails({success:function(t){i.getParam("id")==="bing"&&g.OS==="Windows"?t.download_url="https://az379195.vo.msecnd.net/public/download/win/SkypeWebPlugin-2.3.12417.17599.msi":i.getParam("id")==="bing"&&g.OS==="MacOS"&&(t.download_url="https://az379195.vo.msecnd.net/public/download/mac/SkypeWebPlugin-2.3.12417.17599.pkg"),e.location=t.download_url,y.startCheckInstall()},error:function(){return y.trigger(u.EVENTS.PluginUnsupportedOS),!1}})},y.startCheckInstall=function(){y.downloadPlugin.timeout=4e3,l=e.setTimeout(function(){y.downloadPlugin.checkInstall()},y.downloadPlugin.timeout)},y.downloadPlugin.checkInstall=function(){var t=y.isPluginInstalled();typeof l=="number"&&e.clearTimeout(l),t&&!y.isOutdatedFlag?y.trigger(u.EVENTS.downloadPluginCallback):t&&y.isOutdatedFlag?(d(),l=e.setTimeout(function(){y.downloadPlugin.checkInstall()},y.downloadPlugin.timeout)):l=e.setTimeout(function(){y.downloadPlugin.checkInstall()},y.downloadPlugin.timeout)},f={callerId:"",calleeId:"",skypeId:"",callId:"",nodeInfo:"",localCameraOn:!1,remoteCameraOn:!1,soundState:!0,callConnected:!1,state:"undefined",t:""},y.init=function(){var t;T()?(C(),e.clearTimeout(t),y.trigger(u.EVENTS.initializeSuccess)):(e.clearTimeout(t),t=e.setTimeout(y.init,200))},y.getCallData=function(){return y.APIversion===1?T().getCallData():N("getCallData").data},y.getState=function(){return f.state},y.getParam=function(e){return f[e]===undefined?null:f[e]},y.setParam=function(e,t){f[e]=t},y.isMicOn=function(){return y.getParam("soundState")},y.isOutgoing=function(){return y.getParam("type")===u.FLOWS.outgoing},y.isLocalCameraOn=function(){return y.getParam("localCameraOn")},y.isRemoteCameraOn=function(){return y.getParam("remoteCameraOn")},y.setWindowSize=function(e,t,n,r,i){if(y.APIversion===1)T().setWindowSize(e,String(t),String(n),String(r),String(i));else{var s={position:e,h_margin:t,v_margin:n,w:r,h:i};N("setWindowSize",s)}},y.setWindowMode=function(e){y.APIversion===1?T().setWindowMode(e):N("setWindowMode",{mode:e})},y.setup=function(){v={notifyNeedImprint:function(e){if(y.getState()==="connected")return!1;y.trigger(u.EVENTS.notifyNeedImprint,{id:e.id,key:e.key})},notifyLoginSuccess:function(e){k("logged"),y.isOutgoing()||y.awaitCall(),y.trigger(u.EVENTS.notifyLoginSuccess)},notifyLoginFailure:function(e){k("unauthorized"),y.trigger(u.EVENTS.notifyLoginFailure)},notifyMyVideoSizeChange:function(e){y.trigger(u.EVENTS.notifyMyVideoSizeChange,{width:e.w,height:e.h})},notifyRemoteVideoSizeChange:function(e){y.trigger(u.EVENTS.notifyRemoteVideoSizeChange,{width:e.w,height:e.h})},notifyMyVideoChange:function(e){y.trigger(u.EVENTS.notifyMyVideoChange,{running:e.running,available:e.available})},notifyCallParticipantVideoChange:function(e){y.setParam("remoteCameraOn",e.running),y.trigger(u.EVENTS.notifyCallParticipantVideoChange,{running:e.running,available:e.available,participantId:e.participantId})},notifyCallConnected:function(e){y.setParam("callConnected",!0),k("connected"),h(),y.trigger(u.EVENTS.notifyCallConnected,e.id)},notifyCallFinished:function(e){y.setParam("callConnected",!1),k("finished"),y.trigger(u.EVENTS.notifyCallFinished,{id:e.id,status:e.status})},notifyMicDevListChange:function(e){y.micDevList=m(e.names),y.trigger(u.EVENTS.notifyMicDevListChange,0)},notifyCamDevListChange:function(e){var t;y.camDevList=m(e.names),t=y.camDevList.length-1,y.trigger(u.EVENTS.notifyCamDevListChange,t)},notifySpeakerDevListChange:function(e){y.speakerDevList=m(e.names),y.trigger(u.EVENTS.notifySpeakerDevListChange,0)},notifyError:function(e){y.trigger(u.EVENTS.notifyError,{type:e.type,reason:e.reason})},notifyCreditBalanceChange:function(e){y.trigger(u.EVENTS.notifyCreditBalanceChange,{currency:e.currency,balance:e.balance,precision:e.precision})},notifyWindowStateChange:function(e){y.trigger(u.EVENTS.notifyWindowStateChange,{active:e.active||e.state})},notifyParticipantListChange:function(e){y.trigger(u.EVENTS.notifyParticipantListChange,{participant:e.participant,fullname:e.fullname,join:e.join})}},e.javascriptNotification=function(e){if(y.APIversion===2){var t;try{t=JSON.parse(e)}catch(n){return!1}v[t.func]&&v[t.func](t.parameters)}},y.APIversion===1&&(e.notifyNeedImprint=function(e,t){v.notifyNeedImprint({id:e,key:t})},e.notifyLoginSuccess=function(e){v.notifyLoginSuccess({id:e})},e.notifyLoginFailure=function(e){v.notifyLoginFailure({id:e})},e.notifyMyVideoSizeChange=function(e,t){v.notifyMyVideoSizeChange({w:e,h:t})},e.notifyRemoteVideoSizeChange=function(e,t){v.notifyRemoteVideoSizeChange({w:e,h:t})},e.notifyMyVideoChange=function(e,t){v.notifyMyVideoChange({running:e,available:t})},e.notifyCallParticipantVideoChange=function(e,t,n){v.notifyCallParticipantVideoChange({running:n,available:t,participantId:e})},e.notifyCallConnected=function(e){v.notifyCallConnected({id:e})},e.notifyCallFinished=function(e,t){v.notifyCallFinished({id:e,status:t})},e.notifyMicDevListChange=function(e,t){v.notifyMicDevListChange({names:t,index:e})},e.notifyCamDevListChange=function(e,t){v.notifyCamDevListChange({names:t,index:e})},e.notifySpeakerDevListChange=function(e,t){v.notifySpeakerDevListChange({names:t,index:e})},e.notifyError=function(e,t){v.notifyError({type:t,reason:e})},e.notifyCreditBalanceChange=function(e,t,n){v.notifyCreditBalanceChange({currency:e,balance:t,precision:n})},e.notifyWindowStateChange=function(e){v.notifyWindowStateChange({active:e})});var n,r,s,o,a=y.getCallData();if(!a)return;s=i.getParams("?"+a);for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(o=n);t.extend(f,s),r=+s.sts,r&&(o=1),y.trigger(u.EVENTS.setupComplete)},y.getVersion=function(){return y.APIversion===1?y.getParam("pv"):N("getVersion").version},y.processVersion=function(e){if(!y.isPluginInstalled()){e(null);return}b=s.getVersion(),/^\d+(\.\d+)+$/.test(b)?e(b):s.createPlugin(function(){b=s.getVersion(),e(b),s.removePlugin()})},y.getCurrentPluginDetails=function(e){var n=function(){},r={};e=t.extend({success:n,error:n},e||{}),o.jsonp({jsonpCallback:"getskypepluginversion",url:y.config.pluginFileURL[g.OS],success:function(t){r.version=t.version.join("."),r.download_url=t.download_url,r.size=t.size,r.sha1_checksum=t.sha1_checksum,r.effective_date=t.effective_date,e.success(r)},error:function(){}})},y.compareVersion=function(e,t){if(e===undefined||e===null)return-1;if(e===t)return 0;var n=e.split("."),r=t.split("."),i=Math.min(n.length,r.length),s,o;for(s=0;s<i;s+=1){o=n[s]-r[s];if(o>0)return 1;if(o<0)return-1}return n.length>r.length?1:n.length<r.length?-1:0},y.login=function(){k("logging");if(y.APIversion===1)T().tryLogin(y.getParam("calleeId"),"false");else{var e={id:y.getParam("calleeId"),save:!1};N("tryLogin",e)}},y.loginWithToken=function(e){if(y.APIversion===1)T().login(y.getParam("calleeId"),e);else{var t={id:y.getParam("calleeId"),token:e};N("login",t)}},y.sendDtmf=function(e){y.APIversion===1?T().sendDtmf(e):N("sendDtmf",{code:e})},y.startCall=function(e,n){var r,i="",s="",o=y.getParam("flowName");e=e||"WL",k("connecting"),o==="outlook-out"?e==="WL"&&y.getParam("liveId")?(i="1:"+y.getParam("liveId"),s=i):s=y.getParam("calleeId"):o==="bing"?(s=y.getParam("callerId"),i=""):t.Messenger?i="CID="+t.Messenger.cidToHex(y.getParam("inviteeCid")):i="",y.APIversion===2||n&&y.compareVersion(y.getVersion(),"2.3.12355.17491")>=0?(r={caller:y.getParam("calleeId"),callee:y.getParam("callerId"),nonce:i,convo_id:s,origin:n||"",video:!1},N("startCall",r)):T().startCall(y.getParam("calleeId"),y.getParam("callerId"),i,s)},y.answerCall=function(){var e=y.getParam("payload")?JSON.parse(y.getParam("payload")):{};y.APIversion===1?T().answerCall():N("answerCall")},y.show=function(){y.APIversion===1?T().showUI():N("showUI")},y.getCameraDevicesList=function(){var e,t;return y.APIversion===1?(t=T().getCameraDevicesList(),t instanceof Array?e=t:e=t.toArray()):e=N("getCameraDevicesList"),e},y.getSpeakerDevicesList=function(){var e,t;return y.APIversion===1?(t=T().getSpeakerDevicesList(),t instanceof Array?e=t:e=t.toArray()):e=N("getSpeakerDevicesList"),e},y.getMicrophoneDevicesList=function(){var e,t;return y.APIversion===1?(t=T().getMicrophoneDevicesList(),t instanceof Array?e=t:e=t.toArray()):e=N("getMicrophoneDevicesList"),e},y.startViewParticipantVideo=function(){y.APIversion===1?T().startViewParticipantVideo():N("startViewParticipantVideo")},y.stopViewParticipantVideo=function(){y.APIversion===1?T().stopViewParticipantVideo():N("stopViewParticipantVideo")},y.startSendingMyVideo=function(){y.APIversion===1?T().startSendingMyVideo():N("startSendingMyVideo"),y.setParam("localCameraOn",!0),y.setParam("enableVideo",1)},y.stopSendingMyVideo=function(){y.APIversion===1?T().stopSendingMyVideo():N("stopSendingMyVideo"),y.setParam("localCameraOn",!0),y.setParam("enableVideo",0)},y.toggleCamera=function(e){y.getState()==="connected"&&(e?y.startSendingMyVideo():y.stopSendingMyVideo())},y.toggleMute=function(e){y.APIversion===1?T().muteCall(String(e)):N("muteCall",{mute:e}),y.setParam("soundState",!e)},y.endCall=function(e){y.APIversion===1?T().endCall(y.getParam("callId")):N("endCall"),e&&e()},y.awaitCall=function(){var e=JSON.parse(y.getParam("payload")),t;y.APIversion===1?T().awaitCall(y.getParam("callerId"),y.getParam("calleeId"),e.nsp,e.gp):(t={caller:y.getParam("callerId"),callee:y.getParam("calleeId"),node_payload:e.nsp,generic_payload:e.gp},N("awaitCall",t))},y.setOnTop=function(e){y.APIversion===1?T().setAlwaysOnTop(e?"true":"false"):N("setAlwaysOnTop",{ontop:e})},y.startResizing=function(e){e=t.extend({minWidth:800,minHeight:600,maxWidth:-1,maxHeight:-1},e||{});if(y.APIversion===1)T().startResizingConstrained(String(e.minWidth),String(e.minHeight),String(e.maxWidth),String(e.maxHeight));else{var n={minw:e.minWidth,minh:e.minHeight,maxw:e.maxWidth,maxh:e.maxHeight};N("setWindowConstrain",n),N("startResizing",{location:8})}y.trigger(u.EVENTS.resizing)},y.startDragging=function(){y.APIversion===1?T().startDragging():N("startDragging")},y.setVideoRect=function(e,t,n,r){if(y.APIversion===1)T().setVideoRect(String(e),String(t),String(n),String(r));else{var i={x:e,y:t,w:n,h:r};N("setVideoRect",i)}},y.setPreviewRect=function(e,t,n,r){if(y.APIversion===1)T().setPreviewRect(String(e),String(t),String(n),String(r));else{var i={x:e,y:t,w:n,h:r};N("setPreviewRect",i)}},y.setCamera=function(e){y.APIversion===1?T().setCamera(String(e)):N("setCamera",{index:e})},y.setMicrophone=function(e){y.APIversion===1?T().setMicrophone(String(e)):N("setMicrophone",{index:e})},y.setSpeaker=function(e){y.APIversion===1?T().setSpeaker(String(e)):N("setSpeaker",{index:e})},y.closeWindow=function(){y.APIversion===1?T().closeWindow():N("closeWindow")},c={seconds:0,minutes:0,hours:0},h=function(){var t=+(new Date),n;n=function(){var r=+(new Date)-t,i=Math.floor(r/1e3);c.seconds=i%60,c.minutes=Math.floor(i/60)%60,c.hours=Math.floor(i/3600),y.trigger(u.EVENTS.callDurationChanged,c),y.getState()==="connected"&&e.setTimeout(n,1e3-r%1e3+10)},n()},y.getCurrentCallDuration=function(){return c},m=function(e){var t;return e instanceof Array?t=e:t=e.toArray(),t},y}),define("replacements",["window","document","skyjs.module","skyjs.net","common.const"],function(e,t,n,r,i){var s,o={};return o.Lang={},o.String={},o.Translations={},n.addEventsTo(o.Lang),o.initialized=!1,o.Lang.supportedLanguages=["en-us","en-gb","en","ar","ar-sa","ar-iq","ar-eg","ar-ly","ar-dz","ar-ma","ar-tn","ar-om","ar-ye","ar-sy","ar-jo","ar-lb","ar-kw","ar-ae","ar-bh","ar-qa","bg","ca","ca-es","zh-tw","zh-hk","zh-cn","zh-sg","cs","da","nl","nl-be","et","fi","fr","fr-be","fr-ca","fr-ch","fr-lu","de-ch","de-at","de-lu","de-li","de","el","he","hu","hr","id","it","it-ch","ja","ko","lv","lt","no","pl","pt-br","pt","ro","ro-mo","ro-ro","ru","ru-mo","es","es-ar","es-gt","es-cr","es-pa","es-do","es-mx","es-ve","es-co","es-pe","es-ec","es-cl","es-uy","es-py","es-bo","es-sv","es-hn","es-ni","es-pr","sl","sk","sr-latn","sv","sv-fi","th","tr","uk","vi","cs-cz","zh-hant","zh-hans","es-es","sv-se","sv-sv","fr-fr"],t.querySelectorAll?o.Lang.getElementsByAttribute=function(e,t,n,r){if(!r)return e.querySelectorAll(t+"["+n+"]");if(r)return e.querySelectorAll(t+"["+n+'="'+r+'"]')}:o.Lang.getElementsByAttribute=function(e,t,n,r){var i,s,o,u=[],a=t==="*"&&e.all?e.all:e.getElementsByTagName(t),f=r!==undefined?new RegExp("(^|\\s)"+r+"(\\s|$)"):null,l=a.length;for(i=0;i<l;i+=1)s=a[i],o=s.getAttribute&&s.getAttribute(n),typeof o=="string"&&o.length>0&&(r===undefined||f&&f.test(o))&&u.push(s);return a=undefined,u},o.Lang.init=function(e,t){return o.Lang.localeUrl=e,o.Lang.checkLanguage(t),o.Lang.loadLanguageFile(),o.Lang.webLang},o.Lang.loadLanguageFile=function(){r.loadJS(s,function(){},function(){})},e.SkyJSTranslationsLoaded=function(e){if(e===undefined)return!1;o.Lang.jsonResult=e,o.Lang.trigger(i.EVENTS.translationLoaded),o.Lang.translateAll(o.String.convertAll),o.initialized=!0,o.Lang.trigger(i.EVENTS.translationReady,{data:e})},o.Lang.checkLanguage=function(t){t||(e.navigator.systemLanguage?t=e.navigator.systemLanguage:e.navigator.userLanguage?t=e.navigator.userLanguage:t=e.navigator.language),o.Lang.webLang||(o.Lang.webLang=t.toLowerCase()),o.Lang.webLang!==""&&o.Lang.convertDialects(o.Lang.webLang)&&o.Lang.checkSupport(o.Lang.webLang)?s=o.Lang.localeUrl+o.Lang.webLang+".js":s=o.Lang.localeUrl+"en.js"},o.Lang.changeLanguage=function(e){if(o.Lang.webLang===e)return;o.Lang.webLang=e,o.Lang.init(o.Lang.localeUrl)},function(e){o.Lang.translatePhrase=function(n){if(!o.Lang.jsonResult)e.push(n);else{var r,i=o.Lang.getElementsByAttribute(t,"*","data-trans"),s=o.Lang.jsonResult[n],u=i.length;if(!s)return;for(r=0;r<u;r+=1)i[r].getAttribute("data-trans")===n&&(s.indexOf("{")>=0&&(s=o.String.convertPhrase(s,o.String.getVariables())),i[r].innerHTML=s)}},o.Lang.translateDeferredPhrases=function(){var t,n=e.length;for(t=0;t<n;t+=1)o.Lang.translatePhrase(e[t])},o.Lang.on(i.EVENTS.translationReady,function(){o.Lang.translateDeferredPhrases()})}([]),o.Lang.translateAll=function(e){var n,r=o.Lang.getElementsByAttribute(t,"*","data-trans"),i=r.length,s,u,a,f;for(n=0;n<i;n+=1)s=o.Lang.jsonResult[r[n].getAttribute("data-trans")],s?r[n].innerHTML=s:r[n].innerHTML="text to be translated...";r=o.Lang.getElementsByAttribute(t,"*","data-transattributes"),i=r.length;for(n=0;n<i;n+=1){f=r[n],u=JSON.parse(f.getAttribute("data-transattributes"));if(u)for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(s=o.Lang.jsonResult[u[a]],s&&(f[a]=s))}e&&e()},o.Lang.checkSupport=function(e){o.Lang.supportedLanguages||(o.Lang.supportedLanguages=["en-us"]);var t,n=o.Lang.supportedLanguages.length;for(t=0;t<n;t+=1)if(e===o.Lang.supportedLanguages[t])return!0;return!1},o.Lang.convertDialects=function(e){switch(e.toLowerCase()){case"ar-sa":case"ar-iq":case"ar-eg":case"ar-ly":case"ar-dz":case"ar-ma":case"ar-tn":case"ar-om":case"ar-ye":case"ar-sy":case"ar-jo":case"ar-lb":case"ar-kw":case"ar-ae":case"ar-bh":case"ar-qa":case"ar-ar":o.Lang.webLang="ar";break;case"cz":case"cs-cz":o.Lang.webLang="cs";break;case"zh-hk":case"zh-hant":o.Lang.webLang="zh-tw";break;case"zh-sg":case"zh-hans":o.Lang.webLang="zh-cn";break;case"nl-be":case"nl-nl":o.Lang.webLang="nl";break;case"en-us":o.Lang.webLang="en";break;case"fr-be":case"fr-ca":case"fr-ch":case"fr-lu":case"fr-fr":o.Lang.webLang="fr";break;case"de-ch":case"de-at":case"de-lu":case"de-li":case"de-de":o.Lang.webLang="de";break;case"it-ch":case"it-it":o.Lang.webLang="it";break;case"pl-pl":o.Lang.webLang="pl";break;case"pt-pt":o.Lang.webLang="pt";break;case"ro-mo":case"ro-ro":o.Lang.webLang="ro";break;case"ru-mo":case"ru-ru":o.Lang.webLang="ru";break;case"ca-es":o.Lang.webLang="ca";break;case"es-ar":case"es-gt":case"es-cr":case"es-pa":case"es-do":case"es-mx":case"es-ve":case"es-co":case"es-pe":case"es-ec":case"es-cl":case"es-uy":case"es-py":case"es-bo":case"es-sv":case"es-hn":case"es-ni":case"es-pr":case"es-es":case"eu-es":o.Lang.webLang="es";break;case"sv-fi":case"sv-se":case"sv-sv":o.Lang.webLang="sv";break;case"sr":case"sr-cyrl":o.Lang.webLang="sr-latn";break;default:o.Lang.webLang=e}return o.Lang.webLang},o.Lang.getCurrentLanguage=function(){return o.Lang.webLang},o.Lang.printf=function(e){var t,n,r,i,s,o;if(e===undefined)return!1;n=arguments,r=n.length,i=e,s=/\{([^}]+)\}/g,o=s.exec(e);for(t=1;t<r;t+=1)o&&(i=i.replace("{"+o[1]+"}",n[t]),o=s.exec(e));return i},o.Lang.translateFromElement=function(e,n){typeof e=="string"&&(e=t.getElementById(e)),typeof n=="string"&&(n=[n]);if(!e||typeof e=="object"&&e.nodeType===1)return!1;var r,i,s,u,a,f;return r=o.Lang.jsonResult[e.getAttribute("data-trans")],e.getAttribute("data-trans")!==null&&r!==undefined?(n&&n.length>0?(s=[r],u=s.concat(n),i=o.Lang.printf.apply(null,u)):i=r,a=e.getAttribute("data-placeholder"),f=e.innerText||e.textContent,e.childNodes.length>0&&a===f&&(e.textContent?e.textContent=i:e.innerText=i),i):!1},o.Lang.translateFromID=function(e){var t;return typeof o.Lang.jsonResult!="object"?"":(t=o.Lang.jsonResult[e],t?(t=o.String.convertPhrase(t,o.String.getVariables()),t):"")},o.String.convertAll=function(){var e=o.Lang.getElementsByAttribute(t,"*","data-trans"),n,r,i=[];for(n=0;n<e.length;n+=1)i[n]=e[n].innerHTML;for(r=0;r<i.length;r+=1)i[r].indexOf("{")!==-1&&(e[r].innerHTML=o.String.convertPhrase(i[r],o.String.getVariables()))},o.String.convertPhrase=function(e,t){if(!t||typeof t!="object")return e;var n;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e=e.replace(new RegExp(n,"g"),t[n]).replace(/\{/g,"").replace(/\}/g,""));return e},o.String.getVariables=function(){return{INVITER:'<span class="user-name"></span>',SKYPE_ACCOUNT:'<span class="skype-account"></span>',LINK_RESTART_MANUALLY:'<a href="#" class="fontLink linkStyle1 addTitle restart-plugin-download">',LINK_TERMS:'<a href="http://www.skype.com/'+o.Lang.webLang+'/legal/tou" target="_blank" class="fontDefault fontLink linkStyle1 addTitle">',LINK_PRIVACY:'<a href="http://www.skype.com/'+o.Lang.webLang+'/legal/privacy" class="fontDefault fontLink linkStyle1 addTitle" target="_blank">',LINK_MERGE:'<a href="#skype_account_to_merge" class="fontDefault fontLink actionNext linkStyle1 addTitle" id="already-merged-back-btn-2">',LINK_NEW_ACCOUNT:'<a href="https://login.skype.com/account/signup-form?return_url=http://www.skype.com/go/buy-credit%3Fflow=client" target="_blank" class="fontDefault fontLink actionNext linkStyle1 addTitle">',LINK_LICENSE_INFO:'<a href="thirdpartynotices.html" target="_blank" class="fontDefault fontLink new-window addTitle">',LINK_GET_FULL_APP:'<a href="http://www.skype.com/go/wlmdownload/?intcmp=rendezvous-call-upgrade" class="fontLink addTitle" target="_blank">',LINK_GET_SKYPE_APP:'<a href="http://www.skype.com/download" class="fontLink linkStyle1 addTitle" target="_blank">',LINK_HEADSETS:'<a href="http://shop.skype.com/headsets" class="fontLink linkStyle1 notDraggable headsetsLink addTitle" target="_blank">',LINK_WEBCAM:'<a href="http://shop.skype.com/webcams/" class="fontLink linkStyle1 notDraggable webcamsLink addTitle" target="_blank">',LINK_SUPPORT:'<a href="http://support.skype.com" class="fontLink linkStyle1 notDraggable supportLink addTitle" target="_blank">',LINK_END:"</a>"}},o}),define("sound",["settings"],function(e){var t={};return function(n){function i(e,t,r,i){var s,o;return s=n.createElement("audio"),s.setAttribute("no-controls",""),s.setAttribute("preload","auto"),s.setAttribute("id",e),o=n.createElement("source"),o.setAttribute("src",t),o.setAttribute("type",i),s.appendChild(o),r&&s.setAttribute("loop","loop"),s}function s(e){var t=!1,r=n.createElement("audio");if(e)try{t=!!r.canPlayType(e)}catch(i){}return t}var r;r=function(t,r,o){var u,a=e.get(e.KEYS.rendezvousCdnUrl)+"/"+t,f,l=s("audio/ogg"),c=s("audio/mp3");l?u=i(r,a+".ogg",o,"audio/ogg"):c?u=i(r,a+".mp3",o,"audio/mp3"):(u=n.createElement("bgsound"),u.setAttribute("src",a+".wav"),u.setAttribute("id",r),o?u.setAttribute("loop","-1"):u.setAttribute("loop","1")),n.body.appendChild(u);try{f=n.getElementById(r),f&&(l||c)&&f.play()}catch(h){}this.destroy=function(){f&&(f.parentNode&&f.parentNode.removeChild(f),f=null)},u=null},t.init=function(e,t,n){return new r(e,t,n)}}(document),t}),define("skyjs.guid",[],function(){function t(e){var t=e.toString(16),n=4-t.length,r;for(r=0;r<n;r+=1)t="0"+t;return t}var e={};return e.create=function(){var e=new Array(8),n,r;for(r=0;r<e.length;r+=2)n=Math.floor(Math.random()*4294967296),e[r]=t(n&65535),e[r+1]=t(n>>>16),r+1===3&&(e[r+1]="4"+e[r+1].substring(1));return e[0]+e[1]+"-"+e[2]+"-"+e[3]+"-"+e[4]+"-"+e[5]+e[6]+e[7]},e}),define("skyjs.session",["skyjs.guid","skyjs.url","skyjs.skype.plugin"],function(e,t,n){function s(e){var n=t.getParam(e)||null;return n}function o(e){var t=n.getParam(e)||null;return t}function u(e){if(!e)return;var t,n;for(t in r.KEYS)r.KEYS.hasOwnProperty(t)&&(n=r.KEYS[t],e.hasOwnProperty(n)&&!i.hasOwnProperty(n)&&(i[n]=e[n]))}function a(){i.hasOwnProperty(r.KEYS.SESSIONID)||(i[r.KEYS.SESSIONID]=e.create())}var r={},i={};return r.KEYS={SESSIONID:"sessionid",HOSTPROPERTY:"hostproperty"},r.getProperty=function(e){return i[e]=i[e]||s(e)||o(e)||null,i.hasOwnProperty(e)?i[e]:null},r.getSessionId=function(){return r.getProperty(r.KEYS.SESSIONID)},r.getData=function(){var e,t,n,i={};for(e in r.KEYS)r.KEYS.hasOwnProperty(e)&&(t=r.KEYS[e],n=r.getProperty(t),n!=="undefined"&&(i[t]=n));return i},r.init=function(e){u(e),a()},r}),define("live.const",[],function(){return{EVENTS:{aftershow:"aftershow",browserNotSupported:"browserNotSupported",callEnded:"callEnded",callSetupComplete:"callSetupComplete",callSetupError:"callSetupError",callStarted:"callStarted",completeWithSuccess:"completeWithSuccess",declineCall:"declineCall",errorScreenOW:"errorScreenOW",externalPluginInstallSetupCompletePage:"externalPluginInstallSetupCompletePage",externalPluginInstallPluginInstallPageStart:"externalPluginInstallPluginInstallPageStart",externalPluginInstallPluginInstallPageInstalled:"externalPluginInstallPluginInstallPageInstalled",externalPluginInstallGetStartedPage:"externalPluginInstallGetStartedPage",externalPluginInstallAlreadyInstalled:"externalPluginInstallAlreadyInstalled",externalPluginInstallTermsOfUsePage:"externalPluginInstallTermsOfUsePage",getLiveAccessTokenError:"getLiveAccessTokenError",getLiveAccessTokenSuccess:"getLiveAccessTokenSuccess",incomingNotificationTimeout:"incomingNotificationTimeout",initialization:"initialization",initError:"initError",initializeTests:"initializeTests",installModalInit:"installModalInit",installPopupInit:"installPopupInit",initCallbackCalled:"initCallbackCalled",initStarted:"initStarted",linkingCancelSignIn:"linkingCancelSignIn",linkingExisting:"linkingExisting",linkingLearnMore:"linkingLearnMore",linkingStarted:"linkingStarted",linkingSuccess:"linkingSuccess",linkingNewToSkype:"linkingNewToSkype",linkingNoPopupInit:"linkingNoPopupInit",linkingSignIn:"linkingSignIn",linkingProblemSignIn:"linkingProblemSignIn",linkingCompleted:"linkingCompleted",mappingSuccess:"mappingSuccess",MWTDataRequested:"MWTDataRequested",olABtestDifferentLocationsStart:"olABtestDifferentLocationsStart",olABtestDifferentLocationsEnd:"olABtestDifferentLocationsEnd",olPluginDownloadABTestA:"olPluginDownloadABTestA",olPluginDownloadABTestB:"olPluginDownloadABTestB",pluginAcceptCall:"pluginAcceptCall",pluginInstallCancelled:"PluginInstallCancelled",pluginInstallConfirm:"PluginInstallConfirm",pluginInstallDontStartCall:"PluginInstallDontStartCall",pluginInstallStartCall:"PluginInstallStartCall",pluginInstallStarted:"PluginInstallStarted",pluginInstallFinished:"PluginInstallFinished",pluginInstallEvent:"pluginInstallEvent",pluginInstallIframeEvent:"pluginInstallIframeEvent",pluginSetupAborted:"pluginSetupAborted",pluginSetupComplete:"pluginSetupComplete",pluginSetupRunning:"pluginSetupRunning",pluginSetupStarted:"pluginSetupStarted",pluginSetupTimeout:"pluginSetupTimeout",pluginVersion:"pluginVersion",skyJsInitStarted:"skyJsInitStarted",startCall:"startCall",startDownloadPlugin:"startDownloadPlugin",sweInitComplete:"sweInitComplete",userSignedOut:"userSignedOut"},PATHS:{pluginInstallModal:"/assets/images/plugin-install-modal/",pluginInstallPopup:"/plugin-install-popup.html",outsideWorldOutlook:"/assets/js-locale/OutsideWorldOutlook/",linkingImages:"/assets/images/linking/"},URLS:{outlook:"https://www.outlook.com/",liveAccessTokenIframe:"/live-access-token-iframe.html"}}}),define("skyjs.live.ui",["skyjs.module","skyjs.cookie","skyjs.live.event","skyjs.live.api","skyjs.event","skyjs.url","skyjs.postMessage","skyjs.skype.plugin","replacements","sound","skyjs.session","live.const","common.const","settings"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){var d={};return function(v,m,g){var y,b,w,E,S,x=!1,T="en",N,C,k,L,A,O,M;e.addEventsTo(d),S=function(){+t.get("skyjsTabActive")!==d.tabID&&t.set("skyjsTabActive",d.tabID)},i.add(g,"mouseover",S),d.tabID=+t.get("skyjsTabId")+1,t.set("skyjsTabId",d.tabID),t.set("skyjsTabActive",d.tabID),t.erase("skyjsIsToastDisplayed"),d.openAccountLinking=function(e,t,o){var u,a=window.document.getElementById(e),f=r.getContactInfo(),h,d;f.trouterPublicUrl=t,f.lang=o,u=s.urlBuilder(p.get(p.KEYS.rendezvousSkypeStaticContentUrl),"linking.html",[f,l.getData()]),a.setAttribute("href",u),a.onclick=function(){return h=window.open(u,"accountLinking","width=640,height=505,location=0"),!1},d=function(){h&&h.close()},i.add(window,"unload",d),n.on(c.EVENTS.userSignedOut,d)},d.setupLang=function(e){return T=a.Lang.init(p.get(p.KEYS.rendezvousCdnUrl)+"/assets/js-locale/OutsideWorldOutlook/",e),T},a.Lang.on(h.EVENTS.translationReady,function(e){d.Translations=e.data,x=!0}),N=function(e,t,n,r,i){C(e,"outlook-in",Number(t),n,r,i)},d.installPluginForOutgoingCall=function(e,t,n,r,i){C(e,"outlook-out",Number(t),n,r,i)},C=function(e,t,n,r,o,u){var a,f;i.trigger(c.EVENTS.pluginSetupStarted),e&&t&&r&&o?(a=s.urlBuilder(p.get(p.KEYS.rendezvousSkypeStaticContentUrl),"plugin_installation_flow.html",[{callerName:e,flowType:t,lang:T,pluginOutdated:n,liveUserCID:u},l.getData()]),d.createModal('<iframe id="outlook-skypeplugin-modaldialog" src="'+a+'" width="100%" height="445" scrolling="no" frameborder="0"></iframe>',r,o)):f=!0},d.checkToast=function(){return!!g.getElementById("outlook-skypeplugin-toast")},d.destroyToast=function(e){d.checkToast()&&(d.Toast.incomingSound&&d.Toast.incomingSound.destroy(),e&&(d.Toast.endCallSound=new f.init("assets/sounds/hangup","skype_sound_hangup",!1)),d.Toast&&d.Toast.dismiss())},d.createToast=function(e,n,r,i){var s,o,u=A("msg_skype_call")||"";if(d.checkToast())return;e=e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&amp;/,"&").replace(/&/g,"&amp;").replace(/</g,"&lt;"),y=wLive.Controls.Notifications.createToast({title:"",content:'<div id="outlook-skypeplugin-toast"><div id="outlook-skypeplugin-toast-info" class="toast-info" tabindex="-1" role="region"><strong id="callerName">'+e+"</strong><p>"+u+'</p></div><div class="toast-callControls"><ul><li><a href="#" role="button" class="toast-videoCallBtn" id="toast-videoCallBtn">Start video call</a></li><li><a href="#" role="button" class="toast-audioCallBtn" id="toast-audioCallBtn">Start voice call</a></li><li><a href="#" role="button" class="toast-endCallBtn" id="toast-endCallBtn">Decline call</a></li></ul></div></div>',sourceIcon:p.get(p.KEYS.rendezvousCdnUrl)+"/assets/images/blank.png",options:{backgroundColor:"#00AFF0",timeout:"Long",dismissOnInsideClick:!1,priority:"Normal",moreCss:"SkyJSToast"}}),y.buttons=function(){v("#toast-videoCallBtn").on(h.EVENTS.click,function(){return d.destroyToast(!1),N(e,n,r.acceptWithVideo(),r.decline,i),!1}),v("#toast-audioCallBtn").on(h.EVENTS.click,function(){return d.destroyToast(!1),N(e,n,r.acceptWithAudio(),r.decline,i),!1}),v("#toast-endCallBtn").on(h.EVENTS.click,function(){return d.destroyToast(!0),r.decline(),!1})},y.display={show:function(){if(t.get("skyjsIsToastDisplayed")>0)var e=!0;else d.tabID!==+t.get("skyjsTabActive")?m.setTimeout(y.display.show,1e3):(t.set("skyjsIsToastDisplayed",+(new Date)),d.Toast.incomingSound=new f.init("assets/sounds/incoming","skype_sound_incoming",!0),v(y).on(c.EVENTS.aftershow,y.buttons),y.show().then(function(e){e.timedOut&&r.timeout&&(r.timeout(),d.Toast.incomingSound.destroy())}),y.display.update())},update:function(){t.set("skyjsIsToastDisplayed",+(new Date)),o=m.setTimeout(y.display.update,2e3)},check:function(){+(new Date)- +t.get("skyjsIsToastDisplayed")>5e3?y.display.reset():s=m.setTimeout(y.display.check,5e3)},reset:function(){t.erase("skyjsIsToastDisplayed"),m.clearTimeout(o),m.clearTimeout(s)}},d.Toast=y,d.css=L(),d.css.onload=function(){y.display.show(),y.display.check(),g.getElementById("outlook-skypeplugin-toast-info").focus()},g.body.appendChild(d.css)},k=function(){return!!g.getElementById("outlook-skypeplugin-modaldialog")},M=function(){k()&&d.modalDialogInstance.dismiss()},d.createModal=function(e,t,r){if(k())return;w=o.createChannel([m.location.protocol,m.location.host].join("//"),"*",""),w.addIframeHandler("cancel_closeModalDialog",{success:function(){M(),w.destroy(),r()}}),w.addIframeHandler("cancel_pluginInstalled",{success:function(){M(),w.destroy(),u.isInstalledFlag=!0,r()}}),w.addIframeHandler("installationCompleted_startCall",{success:function(){M(),w.destroy(),t()}}),w.addIframeHandler("pluginInstallIframeEvent",{success:function(e){n.trigger(e.data.name,{vars:e.data.vars||{}})}}),b=wLive.Controls.Notifications.createModalDialog({title:"",content:e,options:{dismissOnButtonClick:!1,moreCss:"SkyJSModalDialog"}}),d.modalDialogInstance=b,d.css?d.modalDialogInstance.show():(d.css=L(),d.css.onload=function(){d.modalDialogInstance.show()},g.body.appendChild(d.css))},d.createFlyout=function(e){var t,n,r,i;d.displayFlyout=function(e){var t=wLive.Controls.Notifications.createFlyout({content:e.content,anchor:e.anchor,buttons:{action:e.buttons.actionLabel},options:e.options});t.show().then(function(t){t.buttonClicked==="action"&&e.buttons.actionTrigger()})},n={content:this.content,anchor:g.getElementById("messageListContainerWrapper"),width:340,buttons:{actionLabel:this.actionLabel,actionTrigger:function(){m.open("http://www.skype.com/go/wlmdownload/?intcmp=rendezvous_outlook-call-upgrade","_blank")}},options:{moreCss:"SkyJSFlyout"}},r={content:this.content,anchor:g.getElementById("messageListContainerWrapper"),width:340,buttons:{actionLabel:this.actionLabel,actionTrigger:function(){m.open("ms-windows-store:PDP?PFN=Microsoft.SkypeApp_kzf8qxf38zg5c","_blank")}},options:{moreCss:"SkyJSFlyout"}},e==="msg_rollback"?(E=A(e),i=A("btn_download_skype"),n.content=O(e,E,"Oops, something went wrong. Looks like Skype with Outlook is not available at the moment. Please try again later or download the full Skype app now."),n.buttons.actionLabel=O("btn_download_skype",i,"Download Skype"),t=n):e==="msg_skype_for_metro"&&(E=A(e),r.content=O(e,E,"Sorry, Skype for Outlook.com doesn't work with this browser. Please download the latest version of Skype for Windows 8 to get the best experience."),r.buttons.actionLabel=O("btn_get_skype_for_metro",i,"Get Skype for Windows RT"),t=r),d.displayFlyout(t)},L=function(){var e=g.createElement("link");return e.href=p.get(p.KEYS.rendezvousCdnUrl)+"/assets/css/skyjstoast.css",e.rel="stylesheet",e.media="screen",e.type="text/css",e},A=function(e){return x&&d.Translations.hasOwnProperty(e)&&v.each(d.Translations,function(t,n){t===e&&(e=n)}),e},O=function(e,t,n){return t!==e?t:n}}(jQuery,window,document),d}),define("skyjs.iframe",["document","skyjs.url","skyjs.session"],function(e,t,n){var r,i={};return r=function(e,r){return t.urlBuilder(e,null,[{sts:+(new Date)},n.getData(),r])},i.createIframe=function(t,n,i){var s=e.getElementById(t),o=e.body||e.getElementsByTagName("body")[0];s&&s.parentNode.removeChild(s),o&&(s=e.createElement("iframe"),s.id=t,s.src=r(n,i),s.width="0",s.height="0",s.style.border="0",s.style.position="absolute",s.style.top="0",s.style.left="0",e.body.appendChild(s))},i}),define("skyjs.buffer",[],function(){var e=function(e,t){if(!e)throw{name:"Buffer error",message:"Required callback not passed to constructor"};if(typeof e!="function")throw{name:"Buffer error",message:"Callback is not a method"};if(t&&typeof t!="number")throw{name:"Buffer error",message:"retryTimeout parameter is not numerical"}};return function(t,n){var r,i,s=this,o=[],u=null;e(t,n),r=function(){while(o.length>0){if(!t(o[0])){u=window.setTimeout(r,n||1e3);break}u&&s.resetTimer(),o.shift()}},i=function(){var e=n?n/1e3:1,t=e>1?" seconds":" second";return"[SkyJSBuffer] object not pushed, retry in "+e+t},s.resetTimer=function(){window.clearTimeout(u),u=null},s.add=function(e){if(typeof e!="object"||e===null)return!1;o.push(e),r()},s.getBuffered=function(){return o},s.getTimer=function(){return u}}}),define("telemetry/telemetry",["skyjs.iframe","skyjs.postMessage","skyjs.global.event","skyjs.buffer","settings"],function(e,t,n,r,i){var s={};return function(o){function c(){u=t.createChannel(f,i.get(i.KEYS.rendezvousSkypeWebExperienceHost),"telemetryIframe"),u.addIframeHandler("telemetry-iframe-ready",{success:function(){l=!0}})}function h(){return{origin:f,dynamicConfig:JSON.stringify(o.dynamicConfig||{})}}function p(e){var t,n,r,i;a={};if(!e)return;for(n in e)if(e.hasOwnProperty(n)){r=e[n];for(t=0;t<=r.length;t+=1)i=r[t],a[i]=a[i]||[],a[i].push(n)}}function d(e){var t;return!e||!e.name?!1:(e.telemetrySystems=a[e.name]||[],t=e.telemetrySystems.length!==0,t)}function v(e){n.subscribe(function(t){d(t)&&e.add(t)})}function m(t){var n,o,u=h();o=new r(s.trackEvent),v(o),t=t?"-"+t:"",n=i.get(i.KEYS.rendezvousSkypeWebExperienceUrl)+"/telemetry-iframe"+t+".html",e.createIframe("telemetryIframe",n,u),c()}var u,a={},f=[window.location.protocol,window.location.host].join("//"),l=!1;o=o||{},s.trackEvent=function(e){return l?(u.sendToIframe({action:"trackEvent",data:e}),!0):!1},s.init=function(e){p(e.eventsToTrack),m(e.flowName)}}(window.SkyJS),s}),define("live.telemetry.init",["common.const","live.const","error.const"],function(e,t,n){var r={};return r[e.TELEMETRY_SYSTEMS.SKYPE_DATA]=[t.EVENTS.pluginInstallStarted,t.EVENTS.pluginInstallFinished,t.EVENTS.pluginInstallCancelled,t.EVENTS.pluginInstallConfirm,t.EVENTS.pluginInstallDontStartCall,t.EVENTS.pluginInstallStartCall,t.EVENTS.linkingStarted,t.EVENTS.linkingExisting,t.EVENTS.linkingNewToSkype,t.EVENTS.linkingLearnMore,t.EVENTS.linkingSignIn,t.EVENTS.linkingCancelSignIn,t.EVENTS.linkingProblemSignIn,t.EVENTS.linkingCompleted,t.EVENTS.initialization,e.EVENTS.callSessionAccepted,e.EVENTS.callSessionStarted,e.EVENTS.callSessionCompleted,n.EVENTS.generic],{eventsToTrack:r,flowName:e.FLOWS.outlook}}),define("skyjs.registrar",["skyjs.net","skyjs.cookie","skyjs.tools","settings"],function(e,t,n,r){var i={};return function(s){var o,u,a;i.registerPresence=function(n,f,l,c){var h,p,d;f=f||3900,d=function(){s.clearTimeout(a),a=s.setTimeout(function(){i.registerPresence(n,f,l,!0)},(f-300)*1e3)},h={url:r.get(r.KEYS.rendezvousRegistrarApiRegisterUrl)},p=JSON.stringify({transports:{TROUTER:[{ttl:f,context:"",path:n}]},registrationId:o(),nodeId:"",clientDescription:{languageId:"en-US",platform:"Outlook.com",templateKey:"Outlook.com:Rendezvous_1.0",aesKey:""}}),e.isBrowserCORSCapable()?(h.success=function(e){c||l.success(e,u),d()},h.error=function(e,t){l.error(e,t)},h.withCredentials="true",h.data=p,h.skipDataEncoding=!0,h.method="POST",h.postDataType="application/json",h.acceptContentType="application/json",e.ajax(h)):(h.data={skpvrf:t.get("skpvrf"),input:p},h.success=function(e,t){t===202||t===200?(e=e||{},e.registrationId=u,e.trouterUrl=n,l.success(e,t)):l.error(e,t)},h.error=function(e,t){l.error(e,t)},h.jsonpCallback="callback",h.method="GET",h.contentType="application/javascript;charset=utf8",h.dataType="jsonp",e.jsonp(h))},i.deleteAllPresences=function(e){var r,s,o,u;e||(e=t.get("storedRegistrarIDs"));try{e=JSON.parse(e)}catch(a){return}if(n.isArray(e)&&e.length){for(s=0,o=e.length;s<o;s+=1){u=e[s];for(r in u)if(Object.prototype.hasOwnProperty.call(u,r)){i.deletePresence(u[r].registrationId,u[r].trouterUrl);break}}t.erase("storedRegistrarIDs")}e=r=s=o=u=null},i.deletePresence=function(n,i,s){if(!n)return!1;s||(s=3600);var o=JSON.stringify({transports:{TROUTER:[{ttl:s,context:"",path:i}]},registrationId:n,nodeId:"",clientDescription:{languageId:"en-US",platform:"Outlook.com",templateKey:"Outlook.com:Rendezvous_1.0",aesKey:""}}),u={url:r.get(r.KEYS.rendezvousCdnUrl)+"/registrationID"};e.isBrowserCORSCapable()?(u.success=function(){},u.error=function(){},u.withCredentials="true",u.data=o,u.skipDataEncoding=!0,u.method="DELETE",u.postDataType="application/json",u.acceptContentType="application/json",e.ajax(u)):(u.data={skpvrf:t.get("skpvrf"),input:o},u.success=function(){},u.error=function(){},u.method="DELETE",u.contentType="application/javascript;charset=utf8",u.dataType="jsonp",e.jsonp(u))},o=function(){return u=(+(new Date)).toString(36)+Math.random().toString(36).slice(2),u}}(window),i}),function(e,t){var n=e;n.version="0.9.6",n.protocol=1,n.transports=[],n.j=[],n.sockets={},n.connect=function(e,r){var s=n.util.parseUri(e),o,u,a;return t&&t.location&&(s.protocol=s.protocol||t.location.protocol.slice(0,-1),s.host=s.host||(t.document?t.document.domain:t.location.hostname),s.port=s.port||t.location.port),o=n.util.uniqueUri(s),a={host:s.host,secure:"https"==s.protocol,port:s.port||("https"==s.protocol?443:80),query:s.query||""},n.util.merge(a,r),(a["force new connection"]||!n.sockets[o])&&(u=new n.Socket(a)),!a["force new connection"]&&u&&(n.sockets[o]=u),u=u||n.sockets[o],u.of(s.path.length>1?s.path:"")}}("object"==typeof module?module.exports:this.io={},this),function(e,t){var n=e.util={},r=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],s;n.parseUri=function(e){for(var t=r.exec(e||""),n={},s=14;s--;)n[i[s]]=t[s]||"";return n},n.uniqueUri=function(e){var n=e.protocol,r=e.host,i=e.port;return"document"in t?(r=r||document.domain,i=i||(n=="https"&&document.location.protocol!=="https:"?443:document.location.port)):(r=r||"localhost",i||n!="https"||(i=443)),(n||"http")+"://"+r+":"+(i||80)},n.query=function(e,t){var r=n.chunkQuery(e||""),i=[],s;n.merge(r,n.chunkQuery(t||""));for(s in r)r.hasOwnProperty(s)&&i.push(s+"="+r[s]);return i.length?"?"+i.join("&"):""},n.chunkQuery=function(e){for(var t={},n=e.split("&"),r=0,i=n.length,s;r<i;++r)s=n[r].split("="),s[0]&&(t[s[0]]=s[1]);return t},s=!1,n.load=function(e){if("document"in t&&document.readyState==="complete"||s)return e();n.on(t,"load",e,!1)},n.on=function(e,t,n,r){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener&&e.addEventListener(t,n,r)},n.request=function(e){if(e&&"undefined"!=typeof XDomainRequest)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&(!e||n.ua.hasCORS))return new XMLHttpRequest;if(!e)try{return new(window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}return null},"undefined"!=typeof window&&n.load(function(){s=!0}),n.defer=function(e){if(!n.ua.webkit||"undefined"!=typeof importScripts)return e();n.load(function(){setTimeout(e,100)})},n.merge=function(e,t,r,i){var s=i||[],o=typeof r=="undefined"?2:r;for(var u in t)t.hasOwnProperty(u)&&n.indexOf(s,u)<0&&(typeof e[u]=="object"&&o?n.merge(e[u],t[u],o-1,s):(e[u]=t[u],s.push(t[u])));return e},n.mixin=function(e,t){n.merge(e.prototype,t.prototype)},n.inherit=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},n.intersect=function(e,t){for(var r=[],i=e.length>t.length?e:t,s=e.length>t.length?t:e,o=0,u=s.length;o<u;o++)~n.indexOf(i,s[o])&&r.push(s[o]);return r},n.indexOf=function(e,t,n){for(var r=e.length,n=n<0?n+r<0?0:n+r:n||0;n<r&&e[n]!==t;n++);return r<=n?-1:n},n.toArray=function(e){for(var t=[],n=0,r=e.length;n<r;n++)t.push(e[n]);return t},n.ua={},n.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var e=new XMLHttpRequest}catch(t){return!1}return e.withCredentials!=undefined}(),n.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent)}("undefined"!=typeof io?io:module.exports,this),function(e,t){function n(){}e.EventEmitter=n,n.prototype.on=function(e,n){return this.$events||(this.$events={}),this.$events[e]?t.util.isArray(this.$events[e])?this.$events[e].push(n):this.$events[e]=[this.$events[e],n]:this.$events[e]=n,this},n.prototype.addListener=n.prototype.on,n.prototype.once=function(e,t){function n(){r.removeListener(e,n),t.apply(this,arguments)}var r=this;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,n){var r,i,s,o;if(this.$events&&this.$events[e])if(r=this.$events[e],t.util.isArray(r)){for(i=-1,s=0,o=r.length;s<o;s++)if(r[s]===n||r[s].listener&&r[s].listener===n){i=s;break}if(i<0)return this;r.splice(i,1),r.length||delete this.$events[e]}else(r===n||r.listener&&r.listener===n)&&delete this.$events[e];return this},n.prototype.removeAllListeners=function(e){return this.$events&&this.$events[e]&&(this.$events[e]=null),this},n.prototype.listeners=function(e){return this.$events||(this.$events={}),this.$events[e]||(this.$events[e]=[]),t.util.isArray(this.$events[e])||(this.$events[e]=[this.$events[e]]),this.$events[e]},n.prototype.emit=function(e){var n,r,i,s,o;if(!this.$events||(n=this.$events[e],!n))return!1;if(r=Array.prototype.slice.call(arguments,1),"function"==typeof n)n.apply(this,r);else{if(!t.util.isArray(n))return!1;for(i=n.slice(),s=0,o=i.length;s<o;s++)i[s].apply(this,r)}return!0}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(n,t){function u(e){return e<10?"0"+e:e}function l(e){return isFinite(e.valueOf())?e.getUTCFullYear()+"-"+u(e.getUTCMonth()+1)+"-"+u(e.getUTCDate())+"T"+u(e.getUTCHours())+":"+u(e.getUTCMinutes())+":"+u(e.getUTCSeconds())+"Z":null}function c(e){return h.lastIndex=0,h.test(e)?'"'+e.replace(h,function(e){var t=a[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function e(t,n){var s,o,u,a,h=i,p,d=n[t];d instanceof Date&&(d=l(t)),typeof r=="function"&&(d=r.call(n,t,d));switch(typeof d){case"string":return c(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d)return"null";if(i+=f,p=[],Object.prototype.toString.apply(d)==="[object Array]"){for(a=d.length,s=0;s<a;s+=1)p[s]=e(s,d)||"null";return u=p.length===0?"[]":i?"[\n"+i+p.join(",\n"+i)+"\n"+h+"]":"["+p.join(",")+"]",i=h,u}if(r&&typeof r=="object")for(a=r.length,s=0;s<a;s+=1)typeof r[s]=="string"&&(o=r[s],u=e(o,d),u&&p.push(c(o)+(i?": ":":")+u));else for(o in d)Object.prototype.hasOwnProperty.call(d,o)&&(u=e(o,d),u&&p.push(c(o)+(i?": ":":")+u));return u=p.length===0?"{}":i?"{\n"+i+p.join(",\n"+i)+"\n"+h+"}":"{"+p.join(",")+"}",i=h,u}}var o;if(t&&t.parse)return n.JSON={parse:t.parse,stringify:t.stringify};o=n.JSON={};var s=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i,f,a={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},r;o.stringify=function(t,n,s){var o;if(i="",f="",typeof s=="number")for(o=0;o<s;o+=1)f+=" ";else typeof s=="string"&&(f=s);if(r=n,!n||typeof n=="function"||typeof n=="object"&&typeof n.length=="number")return e("",{"":t});throw new Error("JSON.stringify")},o.parse=function(n,t){function r(e,n){var i,s,o=e[n];if(o&&typeof o=="object")for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(s=r(o,i),s!==undefined?o[i]=s:delete o[i]);return t.call(e,n,o)}var i;if(n=String(n),s.lastIndex=0,s.test(n)&&(n=n.replace(s,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse")}}("undefined"!=typeof io?io:module.exports,typeof JSON!="undefined"?JSON:undefined),function(e,t){var n=e.parser={},r=n.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],i=n.reasons=["transport not supported","client not handshaken","unauthorized"],s=n.advice=["reconnect"],o=t.JSON,u=t.util.indexOf,a;n.encodePacket=function(e){var t=u(r,e.type),n=e.id||"",a=e.endpoint||"",l=e.ack,c=null,h,p,d,v;switch(e.type){case"error":h=e.reason?u(i,e.reason):"",p=e.advice?u(s,e.advice):"",(h!==""||p!=="")&&(c=h+(p!==""?"+"+p:""));break;case"message":e.data!==""&&(c=e.data);break;case"event":d={name:e.name},e.args&&e.args.length&&(d.args=e.args),c=o.stringify(d);break;case"json":c=o.stringify(e.data);break;case"connect":e.qs&&(c=e.qs);break;case"ack":c=e.ackId+(e.args&&e.args.length?"+"+o.stringify(e.args):"")}return v=[t,n+(l=="data"?"+":""),a],c!==null&&c!==undefined&&v.push(c),v.join(":")},n.encodePayload=function(e){var t="",n,r,i;if(e.length==1)return e[0];for(n=0,r=e.length;n<r;n++)i=e[n],t+="\ufffd"+i.length+"\ufffd"+e[n];return t},a=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/,n.decodePacket=function(e){var t=e.match(a),n;if(!t)return{};var u=t[2]||"",e=t[5]||"",l={type:r[t[1]],endpoint:t[4]||""};u&&(l.id=u,l.ack=t[3]?"data":!0);switch(l.type){case"error":t=e.split("+"),l.reason=i[t[0]]||"",l.advice=s[t[1]]||"";break;case"message":l.data=e||"";break;case"event":try{n=o.parse(e),l.name=n.name,l.args=n.args}catch(c){}l.args=l.args||[];break;case"json":try{l.data=o.parse(e)}catch(c){}break;case"connect":l.qs=e||"";break;case"ack":if(t=e.match(/^([0-9]+)(\+)?(.*)/),t&&(l.ackId=t[1],l.args=[],t[3]))try{l.args=t[3]?o.parse(t[3]):[]}catch(c){}}return l},n.decodePayload=function(e){var t,r,i;if(e.charAt(0)=="\ufffd"){for(t=[],r=1,i="";r<e.length;r++)e.charAt(r)=="\ufffd"?(t.push(n.decodePacket(e.substr(r+1).substr(0,i))),r+=Number(i)+1,i=""):i+=e.charAt(r);return t}return[n.decodePacket(e)]}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t){function n(e,t){this.socket=e,this.sessid=t}e.Transport=n,t.util.mixin(n,t.EventEmitter),n.prototype.onData=function(e){var n,r,i;if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),e!==""&&(n=t.parser.decodePayload(e),n&&n.length))for(r=0,i=n.length;r<i;r++)this.onPacket(n[r]);return this},n.prototype.onPacket=function(e){return(this.socket.setHeartbeatTimeout(),e.type=="heartbeat")?this.onHeartbeat():(e.type=="connect"&&e.endpoint==""&&this.onConnect(),e.type=="error"&&e.advice=="reconnect"&&(this.open=!1),this.socket.onPacket(e),this)},n.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var e=this;this.closeTimeout=setTimeout(function(){e.onDisconnect()},this.socket.closeTimeout)}},n.prototype.onDisconnect=function(){return this.close&&this.open&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},n.prototype.onConnect=function(){return this.socket.onConnect(),this},n.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},n.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},n.prototype.packet=function(e){this.send(t.parser.encodePacket(e))},n.prototype.onHeartbeat=function(){this.packet({type:"heartbeat"})},n.prototype.onOpen=function(){this.open=!0,this.clearCloseTimeout(),this.socket.onOpen()},n.prototype.onClose=function(){var e=this;this.open=!1,this.socket.onClose(),this.onDisconnect()},n.prototype.prepareUrl=function(){var e=this.socket.options;return this.scheme()+"://"+e.host+":"+e.port+"/"+e.resource+"/"+t.protocol+"/"+this.name+"/"+this.sessid},n.prototype.ready=function(e,t){t.call(this)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,n){function r(e){if(this.options={port:80,secure:!1,document:"document"in n?document:!1,resource:"socket.io",transports:t.transports,"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":Infinity,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!0,"auto connect":!0,"flash policy port":10843},t.util.merge(this.options,e),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||t.util.ua.hasCORS)){var r=this;t.util.on(n,"unload",function(){r.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function i(){}e.Socket=r,t.util.mixin(r,t.EventEmitter),r.prototype.of=function(e){return this.namespaces[e]||(this.namespaces[e]=new t.SocketNamespace(this,e),e!==""&&this.namespaces[e].packet({type:"connect"})),this.namespaces[e]},r.prototype.publish=function(){var e,t;this.emit.apply(this,arguments);for(t in this.namespaces)this.namespaces.hasOwnProperty(t)&&(e=this.of(t),e.$emit.apply(e,arguments))},r.prototype.handshake=function(e){function n(t){t instanceof Error?r.onError(t.message):e.apply(null,t.split(":"))}var r=this,s=this.options,o=["http"+(s.secure?"s":"")+":/",s.host+":"+s.port,s.resource,t.protocol,t.util.query(this.options.query,"t="+ +(new Date))].join("/"),a,f,l;this.isXDomain()&&!t.util.ua.hasCORS?(a=document.getElementsByTagName("script")[0],f=document.createElement("script"),f.src=o+"&jsonp="+t.j.length,a.parentNode.insertBefore(f,a),t.j.push(function(e){n(e),f.parentNode.removeChild(f)})):(l=t.util.request(),l.open("GET",o,!0),l.withCredentials=!0,l.onreadystatechange=function(){l.readyState==4&&(l.onreadystatechange=i,l.status==200?n(l.responseText):r.reconnecting||r.onError(l.responseText))},l.send(null))},r.prototype.getTransport=function(e){for(var n=e||this.transports,r=0,i;i=n[r];r++)if(t.Transport[i]&&t.Transport[i].check(this)&&(!this.isXDomain()||t.Transport[i].xdomainCheck()))return new t.Transport[i](this,this.sessionid);return null},r.prototype.connect=function(e){if(this.connecting)return this;var n=this;return this.handshake(function(r,i,s,o){function u(e){if(n.transport&&n.transport.clearTimeouts(),n.transport=n.getTransport(e),!n.transport)return n.publish("connect_failed");n.transport.ready(n,function(){n.connecting=!0,n.publish("connecting",n.transport.name),n.transport.open(),n.options["connect timeout"]&&(n.connectTimeoutTimer=setTimeout(function(){if(!n.connected&&(n.connecting=!1,n.options["try multiple transports"])){n.remainingTransports||(n.remainingTransports=n.transports.slice(0));for(var e=n.remainingTransports;e.length>0&&e.splice(0,1)[0]!=n.transport.name;);e.length?u(e):n.publish("connect_failed")}},n.options["connect timeout"]))})}n.sessionid=r,n.closeTimeout=s*1e3,n.heartbeatTimeout=i*1e3,n.transports=o?t.util.intersect(o.split(","),n.options.transports):n.options.transports,n.setHeartbeatTimeout(),u(n.transports),n.once("connect",function(){clearTimeout(n.connectTimeoutTimer),e&&typeof e=="function"&&e()})}),this},r.prototype.setHeartbeatTimeout=function(){clearTimeout(this.heartbeatTimeoutTimer);var e=this;this.heartbeatTimeoutTimer=setTimeout(function(){e.transport.onClose()},this.heartbeatTimeout)},r.prototype.packet=function(e){return this.connected&&!this.doBuffer?this.transport.packet(e):this.buffer.push(e),this},r.prototype.setBuffer=function(e){this.doBuffer=e,!e&&this.connected&&this.buffer.length&&(this.transport.payload(this.buffer),this.buffer=[])},r.prototype.disconnect=function(){if(this.connected||this.connecting)this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted");return this},r.prototype.disconnectSync=function(){var e=t.util.request(),n=this.resource+"/"+t.protocol+"/"+this.sessionid;e.open("GET",n,!0),this.onDisconnect("booted")},r.prototype.isXDomain=function(){var e=n.location.port||("https:"==n.location.protocol?443:80);return this.options.host!==n.location.hostname||this.options.port!=e},r.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},r.prototype.onOpen=function(){this.open=!0},r.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},r.prototype.onPacket=function(e){this.of(e.endpoint).onPacket(e)},r.prototype.onError=function(e){e&&e.advice&&e.advice==="reconnect"&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",e&&e.reason?e.reason:e)},r.prototype.onDisconnect=function(e){var t=this.connected,n=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1,(t||n)&&(this.transport.close(),this.transport.clearTimeouts(),t&&(this.publish("disconnect",e),"booted"!=e&&this.options.reconnect&&!this.reconnecting&&this.reconnect()))},r.prototype.reconnect=function(){function e(){if(n.connected){for(var e in n.namespaces)n.namespaces.hasOwnProperty(e)&&""!==e&&n.namespaces[e].packet({type:"connect"});n.publish("reconnect",n.transport.name,n.reconnectionAttempts)}clearTimeout(n.reconnectionTimer),n.removeListener("connect_failed",t),n.removeListener("connect",t),n.reconnecting=!1,delete n.reconnectionAttempts,delete n.reconnectionDelay,delete n.reconnectionTimer,delete n.redoTransports,n.options["try multiple transports"]=i}function t(){if(n.reconnecting){if(n.connected)return e();if(n.connecting&&n.reconnecting)return n.reconnectionTimer=setTimeout(t,1e3);n.reconnectionAttempts++>=r?n.redoTransports?(n.publish("reconnect_failed"),e()):(n.on("connect_failed",t),n.options["try multiple transports"]=!0,n.transport=n.getTransport(),n.redoTransports=!0,n.connect()):(n.reconnectionDelay<s&&(n.reconnectionDelay*=2),n.connect(),n.publish("reconnecting",n.reconnectionDelay,n.reconnectionAttempts),n.reconnectionTimer=setTimeout(t,n.reconnectionDelay))}}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var n=this,r=this.options["max reconnection attempts"],i=this.options["try multiple transports"],s=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(t,this.reconnectionDelay),this.on("connect",t)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function n(e,t){this.socket=e,this.name=t||"",this.flags={},this.json=new r(this,"json"),this.ackPackets=0,this.acks={}}function r(e,t){this.namespace=e,this.name=t}e.SocketNamespace=n,t.util.mixin(n,t.EventEmitter),n.prototype.$emit=t.EventEmitter.prototype.emit,n.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},n.prototype.packet=function(e){return e.endpoint=this.name,this.socket.packet(e),this.flags={},this},n.prototype.send=function(e,t){var n={type:this.flags.json?"json":"message",data:e};return"function"==typeof t&&(n.id=++this.ackPackets,n.ack=!0,this.acks[n.id]=t),this.packet(n)},n.prototype.emit=function(e){var t=Array.prototype.slice.call(arguments,1),n=t[t.length-1],r={type:"event",name:e};return"function"==typeof n&&(r.id=++this.ackPackets,r.ack="data",this.acks[r.id]=n,t=t.slice(0,t.length-1)),r.args=t,this.packet(r)},n.prototype.disconnect=function(){return this.name===""?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},n.prototype.onPacket=function(e){function n(){r.packet({type:"ack",args:t.util.toArray(arguments),ackId:e.id})}var r=this,i;switch(e.type){case"connect":this.$emit("connect");break;case"disconnect":this.name===""?this.socket.onDisconnect(e.reason||"booted"):this.$emit("disconnect",e.reason);break;case"message":case"json":i=["message",e.data],e.ack=="data"?i.push(n):e.ack&&this.packet({type:"ack",ackId:e.id}),this.$emit.apply(this,i);break;case"event":i=[e.name].concat(e.args),e.ack=="data"&&i.push(n),this.$emit.apply(this,i);break;case"ack":this.acks[e.ackId]&&(this.acks[e.ackId].apply(this,e.args),delete this.acks[e.ackId]);break;case"error":e.advice?this.socket.onError(e):e.reason=="unauthorized"?this.$emit("connect_failed",e.reason):this.$emit("error",e.reason)}},r.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},r.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,n){function r(){t.Transport.apply(this,arguments)}e.websocket=r,t.util.inherit(r,t.Transport),r.prototype.name="websocket",r.prototype.open=function(){var e=t.util.query(this.socket.options.query),r=this,s;return s||(s=n.MozWebSocket||n.WebSocket),this.websocket=new s(this.prepareUrl()+e),this.websocket.onopen=function(){r.onOpen(),r.socket.setBuffer(!1)},this.websocket.onmessage=function(e){r.onData(e.data)},this.websocket.onclose=function(){r.onClose(),r.socket.setBuffer(!0)},this.websocket.onerror=function(e){r.onError(e)},this},r.prototype.send=function(e){return this.websocket.send(e),this},r.prototype.payload=function(e){for(var t=0,n=e.length;t<n;t++)this.packet(e[t]);return this},r.prototype.close=function(){return this.websocket.close(),this},r.prototype.onError=function(e){this.socket.onError(e)},r.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},r.check=function(){return"WebSocket"in n&&!("__addTask"in WebSocket)||"MozWebSocket"in n},r.xdomainCheck=function(){return!0},t.transports.push("websocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t,n){function r(e){e&&(t.Transport.apply(this,arguments),this.sendBuffer=[])}function i(){}e.XHR=r,t.util.inherit(r,t.Transport),r.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},r.prototype.payload=function(e){for(var n=[],r=0,i=e.length;r<i;r++)n.push(t.parser.encodePacket(e[r]));this.send(t.parser.encodePayload(n))},r.prototype.send=function(e){return this.post(e),this},r.prototype.post=function(e){function t(){this.readyState==4&&(this.onreadystatechange=i,s.posting=!1,this.status==200?s.socket.setBuffer(!1):s.onClose())}function r(){this.onload=i,s.socket.setBuffer(!1)}var s=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),n.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=r:this.sendXHR.onreadystatechange=t,this.sendXHR.send(e)},r.prototype.close=function(){return this.onClose(),this},r.prototype.request=function(e){var n=t.util.request(this.socket.isXDomain()),r=t.util.query(this.socket.options.query,"t="+ +(new Date));if(n.open(e||"GET",this.prepareUrl()+r,!0),e=="POST")try{n.setRequestHeader?n.setRequestHeader("Content-type","text/plain;charset=UTF-8"):n.contentType="text/plain"}catch(i){}return n},r.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},r.check=function(e,r){try{var i=t.util.request(r),s=n.XDomainRequest&&i instanceof XDomainRequest,o=e&&e.options&&e.options.secure?"https:":"http:",u=o!=n.location.protocol;if(i&&(!s||!u))return!0}catch(a){}return!1},r.xdomainCheck=function(){return r.check(null,!0)}}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t,n){function r(){t.Transport.XHR.apply(this,arguments)}function i(){}e["xhr-polling"]=r,t.util.inherit(r,t.Transport.XHR),t.util.merge(r,t.Transport.XHR),r.prototype.name="xhr-polling",r.prototype.open=function(){var e=this;return t.Transport.XHR.prototype.open.call(e),!1},r.prototype.get=function(){function e(){this.readyState==4&&((this.onreadystatechange=i,this.status==200)?(s.onData(this.responseText),s.get()):s.onClose())}function t(){this.onload=i,this.onerror=i,s.onData(this.responseText),s.get()}function r(){s.onClose()}if(this.open){var s=this;this.xhr=this.request(),n.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=t,this.xhr.onerror=r):this.xhr.onreadystatechange=e,this.xhr.send(null)}},r.prototype.onClose=function(){if(t.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=i;try{this.xhr.abort()}catch(e){}this.xhr=null}},r.prototype.ready=function(e,n){var r=this;t.util.defer(function(){n.call(r)})},t.transports.push("xhr-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t,n){function r(){t.Transport["xhr-polling"].apply(this,arguments),this.index=t.j.length;var e=this;t.j.push(function(t){e._(t)})}var i=n.document&&"MozAppearance"in n.document.documentElement.style;e["jsonp-polling"]=r,t.util.inherit(r,t.Transport["xhr-polling"]),r.prototype.name="jsonp-polling",r.prototype.post=function(e){function n(){r(),i.socket.setBuffer(!1)}function r(){i.iframe&&i.form.removeChild(i.iframe);try{f=document.createElement('<iframe name="'+i.iframeId+'">')}catch(e){f=document.createElement("iframe"),f.name=i.iframeId}f.id=i.iframeId,i.form.appendChild(f),i.iframe=f}var i=this,s=t.util.query(this.socket.options.query,"t="+ +(new Date)+"&i="+this.index);if(!this.form){var o=document.createElement("form"),u=document.createElement("textarea"),a=this.iframeId="socketio_iframe_"+this.index,f;o.className="socketio",o.style.position="absolute",o.style.top="0px",o.style.left="0px",o.style.display="none",o.target=a,o.method="POST",o.setAttribute("accept-charset","utf-8"),u.name="d",o.appendChild(u),document.body.appendChild(o),this.form=o,this.area=u}this.form.action=this.prepareUrl()+s,r(),this.area.value=t.JSON.stringify(e);try{this.form.submit()}catch(l){}this.iframe.attachEvent?f.onreadystatechange=function(){i.iframe.readyState=="complete"&&n()}:this.iframe.onload=n,this.socket.setBuffer(!0)},r.prototype.get=function(){var e=this,n=document.createElement("script"),r=t.util.query(this.socket.options.query,"t="+ +(new Date)+"&i="+this.index),s;this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),n.async=!0,n.src=this.prepareUrl()+r,n.onerror=function(){e.onClose()},s=document.getElementsByTagName("script")[0],s.parentNode.insertBefore(n,s),this.script=n,i&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},r.prototype._=function(e){return this.onData(e),this.open&&this.get(),this},r.prototype.ready=function(e,n){var r=this;if(!i)return n.call(this);t.util.load(function(){n.call(r)})},r.check=function(){return"document"in n},r.xdomainCheck=function(){return!0},t.transports.push("jsonp-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(){function e(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(t+"="+e[t]);return n.join("&")}function t(e){for(var t={},n=["name","message","description","number","fileName","lineNumber","stack"],r,i=0;i<n.length;i++)r=n[i],r in e&&(t[r]=e[r]);return JSON.stringify(t)}function n(e){return typeof e=="string"?e:""}function r(){}var i="v2",s={},o="2014.8.26";s.createServer=function(s,a){function l(e,t){var n={level:e,message:t,connectionId:U,connectedClientId:M?M.ccid:""};$.log(JSON.stringify(n))}function c(e,t){return t||(t=e.indexOf("?")!==-1?"&":"?"),e.indexOf("ccid=")<0?e+t+"ccid="+q+(R?"&dom="+R:""):e+(R?t+"dom="+R:"")}function h(e){var t=e.lastIndexOf("/a");return e.substring(0,t)+"/h"}function p(){return O.xhr?O.xhr:K?XMLHttpRequest:window.XDomainRequest||XMLHttpRequest}function d(e,n,r,i){try{var s=p(),o=new s;O.xhr||XMLHttpRequest&&o instanceof XMLHttpRequest?o.onreadystatechange=function(){o.readyState===4&&(o.status>=200&&o.status<300?r(o.responseText):(Y.error("HTTP status "+o.status+" "+o.statusText+" in post to "+e+": "+o.responseText),i()))}:(o.onload=function(){var t=/^([0-9]{3}).*/g.exec(o.responseText),n=t?t[1]:200;n>=200&&n<300?r(o.responseText):(Y.error("HTTP status "+n+" in post to "+e+": "+o.responseText),i())},o.onerror=i),o.open("POST",e,!0),o.setRequestHeader&&(o.setRequestHeader("Content-Type","text/plain"),O.userAgent&&o.setRequestHeader("User-Agent",O.userAgent)),typeof window!="undefined"&&window&&window.XDomainRequest&&o instanceof window.XDomainRequest?(o.onprogress=function(){},o.ontimeout=function(){},setTimeout(function(){try{o.send(n)}catch(r){Y.error("Exception in post to "+e+": "+t(r)),i()}},0)):o.send(n)}catch(u){Y.error("Exception in post to "+e+": "+t(u)),i()}}function v(e){var t=1+(Math.random()-.5)*.4,n=1e3*Math.pow(2,e)*t;return n=Math.round(n),Math.min(12e4,n)}function m(e,n,r){function i(n){try{clearTimeout(f),f=null,a||(Y.debug("done: "+e),r(n))}catch(i){Y.error("exception in done: "+t(i))}}function s(){try{a||(Y.debug("go: "+e),d(e,n,i,o))}catch(r){Y.error("exception in go: "+t(r))}}function o(){try{Y.error("error for: "+e),a||(f=setTimeout(s,v(u)),u++)}catch(n){Y.error("exception in errorHandler: "+t(n))}}var u=0,a=!1,f;return s(),function(){a=!0,f&&(Y.debug("stop: "+e),clearTimeout(f))}}function g(e){A.url=e,A.urlPath=e.replace(/https?:\/\/([A-z0-9\:\$\-\_\.\+\!\*\'\(\)\,]*)\//,"/")}function y(e){try{var n=null;if(e)if(e.issuer)if(e.se)if(e.sp)if(e.sr)if(e.sig)if(P)n="server closed";else if(_)n="already have authorization data";else try{Y.debug("got authorization: "+JSON.stringify(e))}catch(r){n="unable to parse authorization data, error: "+t(r)}else n="Invalid authz data: missing sig";else n="Invalid authz data: missing sr";else n="Invalid authz data: missing sp";else n="Invalid authz data: missing se";else n="Invalid authz data: missing issuer";else n="received null authorization data";n?Y.error(n):(_=e,k())}catch(i){Y.error("exception in authorized: "+t(i))}}function b(e){try{M=JSON.parse(e),U=M.id||"",M.healthUrl?j=M.healthUrl:(j=h(B),Y.warn("No healthUrl property found when parsing allocation.")),!q&&M.ccid&&(q=M.ccid,B=c(B),j=c(j),Y.debug("connected client id set{connectedClientId:"+q+"}")),$.auth(M.connId,y)}catch(n){Y.error("authorization error: "+t(n))}}function w(){Y.debug("allocating new connection"),_=undefined,F(),F=m(B,"",b)}function E(){Y.debug("reconnectToOldServer"),H=!1,I(),I=m(j,"",function(){P||(Y.debug("reconnecting with old allocation"),k())})}function S(e,n){try{if(n&&n.socketNumber!==z){Y.debug("not reconnecting on an old socket");return}if(P){$.disconnected();return}e&&Y.debug("Last connection failed, reason: "+e),J.reconnectAttempts++,$.reconnecting(),P||(H?E():w())}catch(r){Y.error("exception in maybeReconnect: "+t(r))}}function x(){if(D)try{D.emit("ping",function(){})}catch(e){Y.error("unable to send ping, error: "+t(e))}}function T(){N(),D&&W==="websocket"&&(X=setInterval(x,12e4))}function N(){X&&(clearInterval(X),X=null)}function C(){V&&(clearTimeout(V),V=null)}function k(){var n=O.ioOptions||{},r,s=!1;n["force new connection"]=!0,n.reconnect=!1,_.r=M.instance,_.v=i,_.p=M.instancePort,n.query=c(e(_),"&"),n.requireMtls===!0&&(r=n.query.indexOf("&")!==-1?"&":"?",n.query+=r+"auth=true"),r=n.query.indexOf("&")!==-1?"&":"?",n.query+=r+"tc="+encodeURI(JSON.stringify(G)),Y.debug("connecting to "+M.socketio+"?"+n.query),L(),C(),V=setTimeout(function(){s?Y.debug("reconnecting preempted while connecting"):S()},12e4),D=(O.io||io).connect(M.socketio,n),D.socketNumber=++z,D.on("connect",function(){s=!1;try{C();var e,n;if(P){D&&D.disconnect();return}e=M.url,n=A.url!==e,H=!0,Y.debug("connected: "+e),g(e),T(),$.ready(e,n)}catch(r){Y.error("exception in socket.on connect: "+t(r))}}),D.on("connecting",function(e){s=!0,Y.debug("connecting using transportType: "+e),W=e}),D.on("connect_failed",function(e){s=!1,N(),C(),Y.debug("connect_failed"),S(e,this)}),D.on("disconnect",function(){s=!1,N(),C(),Y.debug("disconnected"),S(null,this)}),D.on("reconnect",function(){s=!1,T(),Y.debug("reconnect")}),D.on("reconnect_failed",function(e){s=!1,N(),C(),Y.debug("reconnect_failed"),S(e,this)}),D.on("reconnecting",function(){s=!0,N(),Y.debug("reconnecting")}),D.on("error",function(e){var t,n;N(),Y.error("error from socket.io: "+e),t=this,s?Y.debug("reconnecting preempted while connecting"):(n=v(J.reconnectAttempts),Y.debug("Reconnect in "+n+" msecs..."),C(),V=setTimeout(function(){S(e,t)},n))}),D.on("message",function(e){try{var n=null,r,i,s=new Date;try{e=JSON.parse(e)}catch(o){Y.error("unable to parse request, error: "+t(o)+", request:"+e)}e.url&&e.url.indexOf(A.urlPath)===0&&(e.shortUrl="/"+e.url.substring(A.urlPath.length)),Y.debug("request: "+JSON.stringify(e)),e.on=function(t,r){t==="data"?n=r:t==="end"&&(n(e.body),r())},r={id:e.id,status:200,headers:{},body:""},i={writeHead:function(e,t){r.status=e,r.headers=t},write:function(e){r.body+=e},end:function(n){if(n&&(r.body+=n),r.headers=r.headers||{},e.headers&&e.headers["trouter-request"]&&!r.headers["trouter-request"]&&(r.headers["trouter-request"]=e.headers["trouter-request"]),r.headers["trouter-client"]=JSON.stringify({cd:new Date-s}),Y.debug("response: "+JSON.stringify(r)),D)try{D.send(JSON.stringify(r))}catch(i){Y.error("unable to send data on response.end, err: "+t(i))}}},$.request(e,i)}catch(u){Y.error("exception in socket.on message: "+t(u))}})}function L(){if(D){for(var e=0;e<Q.length;e++)D.removeAllListeners(Q[e]);try{D.disconnect(),Y.debug("cleared previous socket"),D=null,W=undefined}catch(n){Y.error("exception in disconnecting previous socket: "+t(n))}}}var A={},O=a||{},M,_,D,P=!0,H=!1,B,j,F=r,I=r,q="",R="",U="",z=0,W,X=null,V=null,$={auth:r,ready:r,request:r,disconnected:r,reconnecting:r,log:r},J={reconnectAttempts:0},K=function(){if(O.xhr)return!1;var e=new XMLHttpRequest;return"withCredentials"in e?!0:!1}(),Q=["connecting","connect_failed","disconnect","reconnect","reconnect_failed","reconnecting","error","message"],G={cv:o},Y;return O&&O.clientInfo&&(G.hr=n(O.clientInfo.hr),G.ua=n(O.clientInfo.ua),G.v=n(O.clientInfo.v)),typeof window!="undefined"&&window.location&&(R=window.location.hostname),Y={debug:function(e){l("debug",e)},warn:function(e){l("warn",e)},error:function(e){l("error",e)}},typeof s=="function"&&($.request=s),A.on=function(e,t){return $[e]||Y.warn("assigning a callback that is not used: "+e),$[e]=t,A},A.close=function(){try{P=!0,D&&(D.disconnect(),D=undefined),C(),F(),I(),M=undefined,B=undefined,_=undefined,W=undefined}catch(e){Y.error("exception in close: "+t(e))}},A.open=function(e){try{return B?(Y.error("server.open failed, already open"),null):e?(P=!1,B=e,J.reconnectAttempts=0,w(),A):(Y.error("server.open failed, invalid trouterUrl: "+e),null)}catch(n){return Y.error("exception in open: "+t(n)),null}},A.getServerState=function(){return{connectionId:U,connectedClientId:q,domId:R,url:M?M.url:"",surl:M?M.surl:""}},A},(typeof exports!="undefined"?exports:window).trouter=s}(),define("vendor/trouterclient",function(e){return function(){var t,n;return t||e.trouter}}(this)),define("skyjs.trouter",["skyjs.url","vendor/trouterclient","settings","skyjs.net","skyjs.session"],function(e,t,n,r,i){var s,o={};return o.create=function(r){var i=t.createServer(null,s()),o,u;return i.on("auth",function(e,t){o=t,i.getServerState()&&i.getServerState().url?(u=i.getServerState().url,r.notifyAuthNeeded({connectionId:e,publicUrl:u})):r.onDisconnected()}),i.on("ready",function(e,t){r.onReady({publicUrl:e,isNewUrl:t})}),i.on("request",function(t,n){if(t.method==="POST")r.onRequest({request:t,response:n});else if(t.method==="GET"){var i=null;t.shortUrl.indexOf("/?d=")===0&&(i=JSON.parse(e.decodeParam(t.shortUrl.substr(4)))),r.onGetRequest(i,n)}}),i.on("disconnected",function(){r.onDisconnected()}),i.on("reconnecting",function(){r.onReconnecting()}),i.on("log",function(e){r.onLog({message:e})}),{authenticateSAS:function(e){o(e)},open:function(e){i.open(e||n.get(n.KEYS.rendezvousTrouterUrl))},close:function(){i.close()}}},o.sendGetRequest=function(e,t,n,i){t.ts=+(new Date);var s={url:e,isCrossDomain:!0,method:"GET",success:function(e){n&&n(e)},error:i,trackError:!1,data:{d:JSON.stringify(t)}};r.ajax(s)},s=function(){return{clientInfo:{ua:i.getProperty(i.KEYS.HOSTPROPERTY),v:n.get(n.KEYS.rendezvousBuildVersionRequestedMod)}}},o}),define("skyjs.notifications",["skyjs.registrar","skyjs.event","skyjs.cookie","skyjs.trouter"],function(e,t,n,r){var i={};return function(s){var o;i=function(e){var i=function(){},u=this,a,f,l={registrationId:null,trouterUrl:null},c;t.add(s,"unload",function(){u.saveRegistrarPresence(l)}),u.setPresenceTTL=function(t){if(!t||isNaN(Number(t)))return;c&&s.clearTimeout(c),c=s.setTimeout(function(){e.presenceTTLExpired()},t)},u.saveRegistrarPresence=function(e){if(!l.registrationId)return!1;var t=JSON.parse(n.get("storedRegistrarIDs"));t?t.push(e):t=[e],n.set("storedRegistrarIDs",JSON.stringify(t)),o()},u.getTrouterData=function(){return f},u.setRegistrationId=function(e){a=e,l.registrationId=e},u.getRegistrationId=function(){return a},u.authenticate=function(e){u.instance.authenticateSAS(e)},u.destroy=function(){s.clearTimeout(c),u.instance.close()},u.instance=r.create({notifyAuthNeeded:function(t){u.instance.needAuth=!0,f=t,l.trouterUrl=f.trouterUrl,e.trouterAuthNeeded(),s.TEST=e.onDisconnected,s.trouterData=t},onReady:function(t){u.ready=!0,u.instance.needAuth=!1,e.ready(t)},onRequest:function(t){t.response.writeHead(200,{"content-type":"text/plain"}),t.response.end(""),e.onRequest(JSON.parse(t.request.body))},onGetRequest:function(t,n){e.messageHandlers&&e.messageHandlers[t.action]&&e.messageHandlers[t.action](t,n)},onDisconnected:e.onDisconnected||i,onReconnecting:e.onReconnecting||i,onLog:e.onLog||i}),u.instance.open()},o=function(){e.deleteAllPresences();var n=function(){e.deleteAllPresences()};s.setInterval(n,3e5)}}(window),i}),define("skyjs.call.state",["window","skyjs.module","skyjs.cookie","skyjs.skype.plugin","common.const"],function(e,t,n,r,i){function l(){s.trigger(i.EVENTS.CALL_STATE.callFinished,o),a=!1,o=null,s.resetPluginTab()}var s={},o=null,u,a,f;return t.addEventsTo(s),s.setPluginTab=function(){return f=!0,f},s.resetPluginTab=function(){return f=!1,f},s.setCallDuration=function(e){return e&&(o=e),o},s.isRunning=function(){var e=n.get(i.EVENTS.CALL_STATE.skyjsPluginRunning);return Boolean(e)},s.setup=function(){s.running(15),u=e.setTimeout(s.setup,5e3)},s.endSetup=function(){e.clearTimeout(u)},s.running=function(e){var t,r;s.endSetup(),t=new Date,r=e||10,n.set(i.EVENTS.CALL_STATE.skyjsPluginRunning,1,new Date(t.setSeconds(t.getSeconds()+r)))},s.reset=function(){s.endSetup(),n.erase(i.EVENTS.CALL_STATE.skyjsPluginRunning),l()},s.pluginStateCheck=function(){var t=!1,n=s.isRunning();return n?(a||(s.trigger(i.EVENTS.CALL_STATE.callStarted),f||s.trigger(i.EVENTS.CALL_STATE.pluginStarted)),a=!0,s.trigger(i.EVENTS.CALL_STATE.running,o),t=!0):a&&(l(),t=!0),e.setTimeout(s.pluginStateCheck,2e3),t},s.handlePluginState=function(){s.isRunning()?s.trigger(i.EVENTS.CALL_STATE.running,o):(f=!0,s.running())},s}),define("skyjs.call.data",["skyjs"],function(e){var t={};return t=function(t){var n={};e.extend(n,t),this.get=function(e){if(e){if(n[e]===undefined)throw new TypeError("Unable to get "+e+" from callData");return n[e]}},this.set=function(e,t){n[e]=t},this.getCallData=function(){return n}},t}),define("skyjs.live.callsetup",["skyjs.module","skyjs.live.api","skyjs.call.data","common.const","settings","skyjs.skype.plugin.const"],function(e,t,n,r,i,s){var o,u,a,f,l={},c={};return e.addEventsTo(l),l.handleIncoming=function(e,o,c){var h=JSON.parse(t.getJsonBlobBySkypeId(e.callerId)),p=t.getSkypeContactFromMWTBlob(h),d=t.getUserNameFromSkypeContact(p);f=new n({nrt:+(new Date),callerId:e.callerId,callId:e.convoCallId,callerName:d,flowName:"outlook-in",type:s.FLOWS.incoming,mwtData:{mwtNetworkId:u(e),mwtJsonBlob:t.getJsonBlobBySkypeId(e.callerId),mwtEnv:o},payload:JSON.stringify({gp:e.gp,nsp:e.nsp,callerName:d}),calleeCID:h.buddy.contacts[0].cid,callerCID:h.cid,version:i.get(i.KEYS.rendezvousUmApiPluginLoaderVersion),codeversion:i.get(i.KEYS.rendezvousBuildVersionRequestedMod)}),a(c,function(e){f.set("calleeId",e),e?l.trigger(r.EVENTS.CALL_STATE.callSetupComplete,f):l.trigger(r.EVENTS.CALL_STATE.callSetupError,f)})},l.handleOutgoing=function(e,o,u,c,h,p,d){var v=JSON.parse(c),m=t.getSkypeContactFromMWTBlob(v);f=new n({type:s.FLOWS.outgoing,callId:"",callerId:e,calleeId:"",calleeCID:o,callerCID:v.cid,flowName:"outlook-out",enableVideo:u?1:0,nrt:"",mwtData:{mwtJsonBlob:c,mwtNetworkId:h,mwtEnv:p},callerName:t.getUserNameFromSkypeContact(m),version:i.get(i.KEYS.rendezvousUmApiPluginLoaderVersion),codeversion:i.get(i.KEYS.rendezvousBuildVersionRequestedMod)}),a(d,function(e){f.set("calleeId",e),e?l.trigger(r.EVENTS.CALL_STATE.callSetupComplete,f):l.trigger(r.EVENTS.CALL_STATE.callSetupError,f)})},l.shouldStopRinging=function(t){return c[t]===!0},l.setCallToStopRinging=function(t){c[t]=!0},u=function(t){return t&&t.conversationId&&!/^1:.+@.+/.test(t.conversationId)?"SKYPE":"WL"},a=function(t,n){o?n(o):t({action:"usermap-request",target:"iframe",success:function(e){n(e)},error:function(){n(null)}})},l}),define("skyjs.live.pluginsetup",["window","skyjs.module","skyjs.live.event","skyjs.live.ui","skyjs.skype.plugin","skyjs.detect","skyjs.event","live.const","common.const","settings","skyjs.skype.plugin.const"],function(e,t,n,r,i,s,o,u,a,f,l){function h(e,t){i.processVersion(function(n){i.validatePluginVersion(n,function(){c.trigger(u.EVENTS.pluginVersion,{vars:{pluginVersion:n}}),t(e,n)})})}function p(e,t){r.installPluginForOutgoingCall(e.get("callerName"),t,function(){o.trigger(a.EVENTS.startCallClicked),c.trigger(u.EVENTS.pluginSetupRunning),i.isInstalledFlag=!0,c.trigger(u.EVENTS.pluginSetupComplete,e)},function(){c.trigger(u.EVENTS.pluginSetupAborted)},e.get("callerCID"))}function d(t,n){var s=function(n){i.isInstalledFlag=!0,c.trigger(u.EVENTS.pluginSetupAborted),t.set("enableVideo",n?"1":"0");if(t.get("nrt")+5e4>+(new Date))t.set("flowName","outlook-in-auto"),c.trigger(u.EVENTS.pluginSetupComplete,t);else{t.set("payload",null),t.set("flowName","outlook-out"),t.set("type",l.FLOWS.outgoing),t.set("callId",null);var r=t.get("nrt")+5e4- +(new Date);t.set("nrt",null),e.setTimeout(function(){c.trigger(u.EVENTS.pluginSetupComplete,t)},r)}};r.createToast(t.get("callerName"),n,{acceptWithVideo:function(){return c.trigger(u.EVENTS.pluginAcceptCall),c.trigger(u.EVENTS.pluginSetupRunning),r.Toast.display.reset(),function(){s(!0)}},acceptWithAudio:function(){return c.trigger(u.EVENTS.pluginAcceptCall),c.trigger(u.EVENTS.pluginSetupRunning),r.Toast.display.reset(),function(){s(!1)}},decline:function(){c.trigger(u.EVENTS.declineCall),c.trigger(u.EVENTS.pluginSetupAborted),r.Toast.display.reset()},timeout:function(){c.trigger(u.EVENTS.pluginSetupTimeout),r.Toast.display.reset(),c.trigger("incomingNotificationTimeout")}},t.get("callerCID"))}var c={};return t.addEventsTo(c),c.init=function(e){var t=i.isPluginInstalled(),n=e.get("type")===l.FLOWS.outgoing?p:d;i.setParam("flowName",a.FLOWS.outlook),t?h(e,function(){i.isOutdatedFlag?n(e,1):c.trigger(u.EVENTS.pluginSetupComplete,e)}):i.isInstalledFlag?c.trigger(u.EVENTS.pluginSetupComplete,e):n(e,0)},c}),define("skyjs.live.rollout",[],function(){var e={},t,n,r,i,s,o,u;return e.isEnabled=function(t,n){var r,i,s,o;try{SkyJS.Live.Rollout&&SkyJS.Live.Rollout.Data?o=SkyJS.Live.Rollout.Data:o=SkyJS.Outlook.Rollout.Data||null;if(t&&n){r=e.getUserPercentPoint(t),i=u(n);if(o){s=o[i],s||(s=o.ROW);if(s)return{is:s.current>0&&r<=s.current,was:s.maximum>0&&r<=s.maximum}}}}catch(a){}return{is:!1,was:!1}},e.getPackageUrl=function(t,n){var r,i,s,o,a;try{a=SkyJS.Live.Version.Data||null;if(t&&n&&a)return r=e.getUserPercentPoint(t),i=u(n),s=a[i],s&&r<=s.overridepercentage?o=a[i].version:o=a.DEFAULT.version,"++rendezvous.cdn.server.url++/"+o+"/assets/javascript/outlook-package.min.js"}catch(f){}return null},e.getUserPercentPoint=function(t){var n=e.hashBytes(e.decToBytesInt64(t));return n/4294967295*100},e.decToBytesInt64=function(e){return e.charAt(0)==="-"?s(o(i(e.slice(1)))):o(i(e))},e.hashBytes=function(e){return t(n(e))},e.hashString=function(e){return t(r(e))},t=function(e){var t=2654435769,n=2654435769,r=0,i;i=function(){t=t-n-r^r>>>13,n=n-r-t^t<<8,r=r-t-n^n>>>13,t=t-n-r^r>>>12,n=n-r-t^t<<16,r=r-t-n^n>>>5,t=t-n-r^r>>>3,n=n-r-t^t<<10,r=r-t-n^n>>>15};while(e.bytes_left()>=12)t+=e.read_int(),n+=e.read_int(),r+=e.read_int(),i();return r+=e.total_bytes(),t+=e.read_int(),n+=e.read_int(),r+=e.read_int()<<8,i(),r<0?r+4294967296:r},n=function(e){var t=0;return{read_int:function(){var n=0;return t<e.length&&(n+=e[t]&255,t+=1),t<e.length&&(n+=(e[t]&255)<<8,t+=1),t<e.length&&(n+=(e[t]&255)<<16,t+=1),t<e.length&&(n+=(e[t]&255)<<24,t+=1),n},bytes_left:function(){return e.length-t},total_bytes:function(){return e.length}}},r=function(e){var t=0;return{read_int:function(){var n=0;return t<e.length&&(n+=e.charCodeAt(t),t+=1),t<e.length&&(n+=e.charCodeAt(t)<<16,t+=1),n},bytes_left:function(){return 2*(e.length-t)},total_bytes:function(){return 2*e.length}}},i=function(e){var t,n,r=[0],i;for(t=0;t<e.length;t+=1){i=+e.charAt(t);for(n=0;n<r.length;n+=1)r[n]=r[n]*10+i,i=r[n]>>8,r[n]&=255;while(i>0)r.push(i&255),i>>=8}return r.reverse()},s=function(e){var t,n=1;for(t=e.length-1;t>=0;t-=1)e[t]=(e[t]^255)+n,n=e[t]>>8,e[t]&=255;return e},o=function(e){var t=e.slice(-8);while(t.length<8)t.unshift(0);return t},u=function(e){var t=e.match(/^[a-z]+-([a-z]+)$/i);return t?t[1].toUpperCase():e.toUpperCase()},e}),define("skyjs.live.contacts",[],function(){var e={};return e.setup=function(e,t){e.isContactApiAvailable=!0,e.sendRequest=function(e){t({action:"contact-send",target:"iframe",data:e.data,success:e.success,error:e.error})},e.acceptRequest=function(e){t({action:"contact-accept",target:"iframe",data:e.data,success:e.success,error:e.error})},e.declineRequest=function(e){t({action:"contact-decline",target:"iframe",data:e.data,success:e.success,error:e.error})},e.blockContact=function(e){t({action:"contact-block",target:"iframe",data:e.data,success:e.success,error:e.error})},e.unblockContact=function(e){t({action:"contact-unblock",target:"iframe",data:e.data,success:e.success,error:e.error})},e.getList=function(e){t({action:"contact-getlist",target:"iframe",data:e.data,success:e.success,error:e.error})}},e}),define("skyjs.live.init",["window","skyjs","skyjs.module","skyjs.event","skyjs.live.ui","telemetry/telemetry","live.telemetry.init","skyjs.cookie","skyjs.notifications","skyjs.call.state","skyjs.live.callsetup","skyjs.skype.plugin","skyjs.live.pluginsetup","skyjs.postMessage","skyjs.iframe","skyjs.live.rollout","skyjs.detect","skyjs.tools","skyjs.live.contacts","skyjs.skype.plugin","skyjs.session","skyjs.error","settings","live.const","common.const","error.const"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N){var C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q,G,Y,Z,et,tt,nt,rt,it,st,ot,ut,at=0,ft="skyjsInitValid",lt=30,ct={},ht=!1,pt=!1,dt=S.get(S.KEYS.rendezvousEnvId),vt=S.get(S.KEYS.rendezvousUmApiPluginLoaderDomain),mt=S.get(S.KEYS.rendezvousSkypeWebExperienceUrl),gt=S.get(S.KEYS.rendezvousSkypeWebExperienceHost),yt=S.get(S.KEYS.rendezvousSkypeWebExperienceGetCredentialsPath),bt=t.namespace("SkyJS.Live"),wt=t.namespace("SkyJS.Outlook");return SkyJS.namespace=t.namespace,n.addEventsTo(bt),bt.init=function(e){return w.init({hostproperty:C()}),s.init(o),it=g.stopwatch().start(),Y(e)?(j={success:e.success,error:e.error,mappingReady:e.mappingReady},F={pluginStarted:e.pluginStarted,callStarted:e.callStarted,callFinished:e.callFinished,pluginInstanceRunning:e.pluginInstanceRunning},tt=e.mwtEnv,nt="3.14.1802",I=v.isEnabled(e.cid,e.region),I.is?(X=i.setupLang(e.region),_(),D(),l.on(T.EVENTS.CALL_STATE.callSetupComplete,A),l.on(T.EVENTS.CALL_STATE.callSetupError,O),f.on(T.EVENTS.CALL_STATE.callStarted,F.callStarted),f.on(T.EVENTS.CALL_STATE.pluginStarted,F.pluginStarted),f.on(T.EVENTS.CALL_STATE.callFinished,F.callFinished),f.on(T.EVENTS.CALL_STATE.running,function(){i.checkToast()&&!b.isOutdatedFlag&&i.destroyToast(!1)}),h.on(x.EVENTS.pluginSetupComplete,M),h.on(x.EVENTS.pluginSetupRunning,f.running),h.on(x.EVENTS.pluginSetupAborted,f.reset),h.on(x.EVENTS.pluginSetupTimeout,function(){H("timeout",pt)}),h.on(x.EVENTS.pluginAcceptCall,function(){r.trigger(T.EVENTS.callSessionAccepted),f.setPluginTab()}),h.on(x.EVENTS.declineCall,function(){H("rejected",pt)}),r.on(x.EVENTS.pluginSetupStarted,function(){H("noplugin",pt),f.setup()}),r.on(T.EVENTS.initialized,Z),r.once(x.EVENTS.sweInitComplete,function(){G()}),!0):!1):!1},bt.isSkypeEnabled=function(){return I.is},bt.wasSkypeEnabled=function(){return I.was},bt.getSkypeId=function(){return ct.skypeId||null},bt.isInitialized=function(){return ht},bt.getMappingContainer=function(){return ct.mappingContainer},bt.openAccountLinking=function(e){i.openAccountLinking(e,U.getTrouterData().publicUrl,X)},bt.isUserLinkStatusActive=function(){return ct.linkingStatus==="ACTIVE"},bt.startCall=function(e,t,n,r,i){P(!0,null),l.handleOutgoing(e,t,n,r,i,tt,q.request)},C=function(){var n=e.location.hostname;return/skyjslocal\.(live|live-int|skype)?\.com$/.test(n)?"development":/mail\.live(-int)?\.com$/.test(n)?"outlook":/skydrive((-bvt)|(-current))?\.live(-int)?\.com$/.test(n)?"skydrive":/calendar\.live(-int)?\.com$/.test(n)?"calendar":/profile((-bvt)|(-current))?\.live(-int)?\.com$/.test(n)?"profile":null},k=function(){at+=1;if(at>10)return!1;rt=new Date,U.instance.needAuth&&R&&q.request({action:"initialize",target:"iframe",data:U.getTrouterData(),success:function(e){var t=(new Date-rt)/1e3;st(e.registrationTTL,e.registrationId,e.tpc),ct={mappingContainer:e.mappingContainer,linkingStatus:e.mappingStatus,registrationId:e.registrationId,hashedSkypeId:e.mappingSkypeName,registrationTTL:e.registrationTTL},j.mappingReady({container:ct.mappingContainer,linkingStatus:ct.linkingStatus,initialized:!0,hashedSkypeId:ct.hashedSkypeId,skypeId:""}),u.set(ft,1,new Date((new Date).setHours((new Date).getHours()+23))),r.trigger(x.EVENTS.sweInitComplete,{vars:{skypeId:V,totalSignInTime:t},sweConfig:ct})},error:function(e){if(typeof e=="object"&&e.code&&e.message)try{var t=JSON.parse(e.message);t.code&&/^(4\d\d|500|501)$/.test(String(t.code))?j.error(t):j.error({code:502,message:t})}catch(n){j.error({code:502,message:e})}else j.error({code:502,message:e})}})},L=function(){var t={registrationId:U.getRegistrationId(),trouterUrl:U.getTrouterData().publicUrl};q.request({action:"refreshPresence",target:"iframe",data:t,success:function(e){U.setPresenceTTL(e.registrationTTL)}})},A=function(t){if(f.isRunning())return;h.init(t)},O=function(){j.error({code:407})},M=function(t){f.handlePluginState(),z(t)},_=function(){W=p.createChannel("https://"+e.location.host,vt,"pluginStarter"),q=p.createChannel("https://"+e.location.host,gt,"SWEiFrame"),q.addIframeHandler("sweReady",{success:function(){R=!0,k()}}),d.createIframe("SWEiFrame",mt+"/swe-iframe.html",{origin:e.location.host}),y.setup(bt,q.request),y.setup(wt,q.request)},D=function Et(t){var n=!1;U=new a({trouterAuthNeeded:t?ut:k,ready:function(e){!n&&e.isNewUrl&&(j.success(),r.trigger(T.EVENTS.initialized),f.pluginStateCheck())},presenceTTLExpired:L,onRequest:function(e,t){$(e)},messageHandlers:{linkingSuccess:function(t,n){r.trigger(x.EVENTS.linkingSuccess),e.location.reload(),J(n)},pluginRunning:function(e,t){var n=e.callId;et=e.data,f.running(),f.setCallDuration(et),l.shouldStopRinging(n)?Q(t,n):J(t)},callFinished:function(e,t){f.reset(),F.callFinished&&F.callFinished(e.data),r.trigger(T.EVENTS.CALL_STATE.callFinished,e),J(t)},pluginStarted:function(e,t){F.pluginStarted&&F.pluginStarted(),r.trigger(T.EVENTS.CALL_STATE.pluginStarted),J(t)}},onReconnecting:function(){n=!0},onDisconnected:function(){U.destroy(),Et(!0)}})},ut=function(){var t=U.getTrouterData();q.request({action:"registerPresence",target:"iframe",data:{publicUrl:t.publicUrl,registrationId:ct.registrationId,connectionId:t.connectionId},success:function(e){st(e.registrationTTL,e.registrationId,e.tpc)},error:function(e){if(ot(e)){D();return}}})},st=function(t,n,r){U.setPresenceTTL(t),U.setRegistrationId(n),U.authenticate(r)},ot=function(t){return t&&t.code&&t.code===401?!0:!1},Y=function(t){return!t.cid||!t.region||!t.mwtEnv?(r.trigger(x.EVENTS.initError),t.error({code:406}),!1):!0},Z=function(){e.$WLXIM&&e.$WLXIM.user&&e.$WLXIM.user.add_signedOut(function(){r.trigger(x.EVENTS.userSignedOut)}),r.trigger(x.EVENTS.initialization,{vars:{event_subtype:"completed",initializationDurationSeconds:it.durationSeconds()}})},B=function(){wt.init=bt.init,wt.isSkypeEnabled=bt.isSkypeEnabled,wt.startCall=bt.startCall,wt.getMappingContainer=bt.getMappingContainer,wt.isUserLinkStatusActive=bt.isUserLinkStatusActive,wt.getSkypeId=bt.getSkypeId,wt.isInitialized=bt.isInitialized,wt.off=bt.off,wt.on=bt.on,wt.once=bt.once,wt.openAccountLinking=bt.openAccountLinking,wt.trigger=r.trigger,wt.wasSkypeEnabled=bt.wasSkypeEnabled},z=function(n){var r=dt,i=gt+yt;if(!u.get(ft)){k();return}W.addIframeHandler("request-mwt-data",{success:function(){W.sendToIframe({action:"response-mwt-data",data:t.extend({mappingContainer:ct.mappingContainer},n.get("mwtData"))})}}),f.running(lt),n.set("hashedSkypeId",ct.hashedSkypeId),n.set("inviterCid",n.get("calleeCID")),n.set("inviteeCid",n.get("callerCID")),n.set("webLang",X),n.set("env",dt),n.set("trouterPublicUrl",U.getTrouterData().publicUrl),(r==="DEV"||r==="DEVINT")&&n.set("urloverride",mt+"/inside-world-ol.html"),d.createIframe("pluginStarter",i,n.getCallData())},P=function(t,n){pt=t,c.processVersion(function(e){r.trigger(T.EVENTS.callSessionStarted,{vars:{callid:n,pluginVersion:e,isOutgoing:t}})})},H=function(t,n){c.processVersion(function(e){r.trigger(T.EVENTS.callSessionCompleted,{vars:{status:t,isOutgoing:n,pluginVersion:e}})})},$=function(t){var n;switch(t.evt){case T.NOTIFICATIONS.incomingCall:n=t.convoCallId,P(!1,n),l.handleIncoming(t,tt,q.request);break;case T.NOTIFICATIONS.stopRinging:n=t.callId,c.isPluginInstalled()?l.setCallToStopRinging(n):(i.destroyToast(),i.Toast.display.reset())}},J=function(t){K(t,"")},Q=function(t,n){var r=JSON.stringify({callId:n,status:T.CALL_STATUS.answeredInOtherEndpoint});K(t,r)},K=function(t,n){var r=n||"";t.writeHead(200,{"content-type":"text/plain","Access-Control-Allow-Origin":"*"}),t.end(r)},G=function(){if(!m.isBrowserConfigSupported()){var t={errorType:N.TYPES.browserNotSupported,browserAgentData:JSON.stringify(m.browserDetails())};E.handle(t,N.EVENTS.generic),j.error({code:403,text:"browser not supported - not white-listed or IE64bit"})}},r.on(T.EVENTS.startCallClicked,function(){P(!0,null)}),B(),bt}),window.SkyJS=window.SkyJS||{},window.SkyJS.Outlook=window.SkyJS.Outlook||{},require(["skyjs"],function(e){SkyJS.namespace=e.namespace});var requireLiveInit;window.SkyJS.Outlook.init=function(t){if(!window.SkyJS.Live||!window.SkyJS.Live.Rollout||!window.SkyJS.Live.Rollout.isEnabled)return requireLiveInit(t);if(!t.cid||!t.region||!t.mwtEnv)return t.error({code:406}),!1;var n=window.SkyJS.Live.Rollout,r=n.isEnabled(t.cid,t.region);return r.is?requireLiveInit(t):!1},requireLiveInit=function(t){return require(["skyjs.live.init"],function(e){e.init(t)}),!0},define("live.public",function(){}),require(["skyjs.console"])})();