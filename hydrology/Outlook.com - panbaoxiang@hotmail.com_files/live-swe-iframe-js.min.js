/*!
 * Require JS 2.1.5 
 * Microsoft grants you the right to use these script files for the sole purpose of either: interacting through your browser with the Microsoft website, subject to the website’s terms of use; or (ii) using the files as included with a Microsoft product subject to that product’s license terms. Microsoft reserves all other rights to the files not expressly granted by Microsoft, whether by implication, estoppel or otherwise. The notices and licenses below are for informational purposes only. 
 *
 * Copyright (c) 2010-2011, The Dojo Foundation 
 * 
 * Provided for Informational Purposes Only 
 * MIT License 
 * Permission is hereby granted, free of charge, to any person obtaining 
 * a copy of this software and associated documentation files (the 
 * "Software"), to deal in the Software without restriction, including 
 * without limitation the rights to use, copy, modify, merge, publish, 
 * distribute, sublicense, and/or sell copies of the Software, and to 
 * permit persons to whom the Software is furnished to do so, subject to 
 * the following conditions: 
 * The above copyright notice and this permission notice shall be 
 * included in all copies or substantial portions of the Software. 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */

/*!
 RequireJS 2.1.5 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/jrburke/requirejs for details
*/

/*! © Microsoft and/or Skype 2014 */

/*! � Microsoft and/or Skype 2014 */

(function(){var requirejs,require,define;(function(aa){function I(e){return"[object Function]"===L.call(e)}function J(e){return"[object Array]"===L.call(e)}function y(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function M(e,t){if(e){var n;for(n=e.length-1;-1<n&&(!e[n]||!t(e[n],n,e));n-=1);}}function s(e,t){return ga.call(e,t)}function m(e,t){return s(e,t)&&e[t]}function G(e,t){for(var n in e)if(s(e,n)&&t(e[n],n))break}function R(e,t,n,r){return t&&G(t,function(t,i){if(n||!s(e,i))r&&"string"!=typeof t?(e[i]||(e[i]={}),R(e[i],t,n,r)):e[i]=t}),e}function u(e,t){return function(){return t.apply(e,arguments)}}function ba(e){if(!e)return e;var t=aa;return y(e.split("."),function(e){t=t[e]}),t}function B(e,t,n,r){return t=Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e),t.requireType=e,t.requireModules=r,n&&(t.originalError=n),t}function ha(e){function t(e,t,n){var r,i,s,o,u,a,f,l=t&&t.split("/");r=l;var c=k.map,h=c&&c["*"];if(e&&"."===e.charAt(0))if(t){r=m(k.pkgs,t)?l=[t]:l.slice(0,l.length-1),t=e=r.concat(e.split("/"));for(r=0;t[r];r+=1)if(i=t[r],"."===i)t.splice(r,1),r-=1;else if(".."===i){if(1===r&&(".."===t[2]||".."===t[0]))break;0<r&&(t.splice(r-1,2),r-=2)}r=m(k.pkgs,t=e[0]),e=e.join("/"),r&&e===t+"/"+r.main&&(e=t)}else 0===e.indexOf("./")&&(e=e.substring(2));if(n&&c&&(l||h)){t=e.split("/");for(r=t.length;0<r;r-=1){s=t.slice(0,r).join("/");if(l)for(i=l.length;0<i;i-=1)if(n=m(c,l.slice(0,i).join("/")))if(n=m(n,s)){o=n,u=r;break}if(o)break;!a&&h&&m(h,s)&&(a=m(h,s),f=r)}!o&&a&&(o=a,u=f),o&&(t.splice(0,u,o),e=t.join("/"))}return e}function n(e){A&&y(document.getElementsByTagName("script"),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===x.contextName)return t.parentNode.removeChild(t),!0})}function r(e){var t=m(k.paths,e);if(t&&J(t)&&1<t.length)return n(e),t.shift(),x.require.undef(e),x.require([e]),!0}function i(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function o(e,n,r,s){var o,u,a=null,f=n?n.name:null,l=e,c=!0,h="";return e||(c=!1,e="_@r"+(F+=1)),e=i(e),a=e[0],e=e[1],a&&(a=t(a,f,s),u=m(H,a)),e&&(a?h=u&&u.normalize?u.normalize(e,function(e){return t(e,f,s)}):t(e,f,s):(h=t(e,f,s),e=i(h),a=e[0],h=e[1],r=!0,o=x.nameToUrl(h))),r=a&&!u&&!r?"_unnormalized"+(q+=1):"",{prefix:a,name:h,parentMap:n,unnormalized:!!r,url:o,originalName:l,isDefine:c,id:(a?a+"!"+h:h)+r}}function a(e){var t=e.id,n=m(L,t);return n||(n=L[t]=new x.Module(e)),n}function f(e,t,n){var r=e.id,i=m(L,r);s(H,r)&&(!i||i.defineEmitComplete)?"defined"===t&&n(H[r]):a(e).on(t,n)}function c(e,t){var n=e.requireModules,r=!1;t?t(e):(y(n,function(t){if(t=m(L,t))t.error=e,t.events.error&&(r=!0,t.emit("error",e))}),!r)&&l.onError(e)}function h(){T.length&&(ia.apply(D,[D.length-1,0].concat(T)),T=[])}function p(e){delete L[e],delete M[e]}function d(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,y(e.depMaps,function(r,i){var s=r.id,o=m(L,s);o&&!e.depMatched[i]&&!n[s]&&(m(t,s)?(e.defineDep(i,H[s]),e.check()):d(o,t,n))}),n[r]=!0)}function v(){var e,t,i,s,o=(i=1e3*k.waitSeconds)&&x.startTime+i<(new Date).getTime(),u=[],a=[],f=!1,l=!0;if(!E){E=!0,G(M,function(i){e=i.map,t=e.id;if(i.enabled&&(e.isDefine||a.push(i),!i.error))if(!i.inited&&o)r(t)?f=s=!0:(u.push(t),n(t));else if(!i.inited&&i.fetched&&e.isDefine&&(f=!0,!e.prefix))return l=!1});if(o&&u.length)return i=B("timeout","Load timeout for modules: "+u,null,u),i.contextName=x.contextName,c(i);l&&y(a,function(e){d(e,{},{})}),(!o||s)&&f&&(A||da)&&!C&&(C=setTimeout(function(){C=0,v()},50)),E=!1}}function g(e){s(H,e[0])||a(o(e[0],null,!0)).init(e[1],e[2])}function b(e){var e=e.currentTarget||e.srcElement,t=x.onScriptLoad;return e.detachEvent&&!Y?e.detachEvent("onreadystatechange",t):e.removeEventListener("load",t,!1),t=x.onScriptError,(!e.detachEvent||Y)&&e.removeEventListener("error",t,!1),{node:e,id:e&&e.getAttribute("data-requiremodule")}}function w(){var e;for(h();D.length;){e=D.shift();if(null===e[0])return c(B("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));g(e)}}var E,S,x,N,C,k={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},L={},M={},_={},D=[],H={},j={},F=1,q=1;return N={require:function(e){return e.require?e.require:e.require=x.makeRequire(e.map)},exports:function(e){e.usingExports=!0;if(e.map.isDefine)return e.exports?e.exports:e.exports=H[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return k.config&&m(k.config,e.map.id)||{}},exports:H[e.map.id]}}},S=function(e){this.events=m(_,e.id)||{},this.map=e,this.shim=m(k.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},S.prototype={init:function(e,t,n,r){r=r||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=u(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,x.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();x.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],u(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;j[e]||(j[e]=!0,x.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id;t=this.depExports;var r=this.exports,i=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(1>this.depCount&&!this.defined){if(I(i)){if(this.events.error)try{r=x.execCb(n,i,t,r)}catch(s){e=s}else r=x.execCb(n,i,t,r);this.map.isDefine&&((t=this.module)&&void 0!==t.exports&&t.exports!==this.exports?r=t.exports:void 0===r&&this.usingExports&&(r=this.exports));if(e)return e.requireMap=this.map,e.requireModules=[this.map.id],e.requireType="define",c(this.error=e)}else r=i;this.exports=r,this.map.isDefine&&!this.ignore&&(H[n]=r,l.onResourceLoad)&&l.onResourceLoad(x,this.map,this.depMaps),p(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,n=e.id,r=o(e.prefix);this.depMaps.push(r),f(r,"defined",u(this,function(r){var i,h;h=this.map.name;var d=this.map.parentMap?this.map.parentMap.name:null,v=x.makeRequire(e.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){if(r.normalize&&(h=r.normalize(h,function(e){return t(e,d,!0)})||""),r=o(e.prefix+"!"+h,this.map.parentMap),f(r,"defined",u(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),h=m(L,r.id))this.depMaps.push(r),this.events.error&&h.on("error",u(this,function(e){this.emit("error",e)})),h.enable()}else i=u(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),i.error=u(this,function(e){this.inited=!0,this.error=e,e.requireModules=[n],G(L,function(e){0===e.map.id.indexOf(n+"_unnormalized")&&p(e.map.id)}),c(e)}),i.fromText=u(this,function(t,r){var u=e.name,f=o(u),h=O;r&&(t=r),h&&(O=!1),a(f),s(k.config,n)&&(k.config[u]=k.config[n]);try{l.exec(t)}catch(p){return c(B("fromtexteval","fromText eval for "+n+" failed: "+p,p,[n]))}h&&(O=!0),this.depMaps.push(f),x.completeLoad(u),v([u],i)}),r.load(e.name,v,i,k)})),x.enable(r,this),this.pluginMaps[r.id]=r},enable:function(){M[this.map.id]=this,this.enabling=this.enabled=!0,y(this.depMaps,u(this,function(e,t){var n,r;if("string"==typeof e){e=o(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e;if(n=m(N,e.id)){this.depExports[t]=n(this);return}this.depCount+=1,f(e,"defined",u(this,function(e){this.defineDep(t,e),this.check()})),this.errback&&f(e,"error",this.errback)}n=e.id,r=L[n],!s(N,n)&&r&&!r.enabled&&x.enable(e,this)})),G(this.pluginMaps,u(this,function(e){var t=m(L,e.id);t&&!t.enabled&&x.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){y(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},x={config:k,contextName:e,registry:L,defined:H,urlFetched:j,defQueue:D,Module:S,makeModuleMap:o,nextTick:l.nextTick,onError:c,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=k.pkgs,n=k.shim,r={paths:!0,config:!0,map:!0};G(e,function(e,t){r[t]?"map"===t?(k.map||(k.map={}),R(k[t],e,!0,!0)):R(k[t],e,!0):k[t]=e}),e.shim&&(G(e.shim,function(e,t){J(e)&&(e={deps:e}),(e.exports||e.init)&&!e.exportsFn&&(e.exportsFn=x.makeShimExports(e)),n[t]=e}),k.shim=n),e.packages&&(y(e.packages,function(e){e="string"==typeof e?{name:e}:e,t[e.name]={name:e.name,location:e.location||e.name,main:(e.main||"main").replace(ja,"").replace(ea,"")}}),k.pkgs=t),G(L,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=o(t))}),(e.deps||e.callback)&&x.require(e.deps||[],e.callback)},makeShimExports:function(e){return function(){var t;return e.init&&(t=e.init.apply(aa,arguments)),t||e.exports&&ba(e.exports)}},makeRequire:function(n,r){function i(t,u,f){var h,p;return r.enableBuildCallback&&u&&I(u)&&(u.__requireJsBuild=!0),"string"==typeof t?I(u)?c(B("requireargs","Invalid require call"),f):n&&s(N,t)?N[t](L[n.id]):l.get?l.get(x,t,n,i):(h=o(t,n,!1,!0),h=h.id,s(H,h)?H[h]:c(B("notloaded",'Module name "'+h+'" has not been loaded yet for context: '+e+(n?"":". Use require([])")))):(w(),x.nextTick(function(){w(),p=a(o(null,n)),p.skipMap=r.skipMap,p.init(t,u,f,{enabled:!0}),v()}),i)}return r=r||{},R(i,{isBrowser:A,toUrl:function(e){var r,i=e.lastIndexOf("."),s=e.split("/")[0];return-1!==i&&("."!==s&&".."!==s||1<i)&&(r=e.substring(i,e.length),e=e.substring(0,i)),x.nameToUrl(t(e,n&&n.id,!0),r,!0)},defined:function(e){return s(H,o(e,n,!1,!0).id)},specified:function(e){return e=o(e,n,!1,!0).id,s(H,e)||s(L,e)}}),n||(i.undef=function(e){h();var t=o(e,n,!0),r=m(L,e);delete H[e],delete j[t.url],delete _[e],r&&(r.events.defined&&(_[e]=r.events),p(e))}),i},enable:function(e){m(L,e.id)&&a(e).enable()},completeLoad:function(e){var t,n,i=m(k.shim,e)||{},o=i.exports;for(h();D.length;){n=D.shift();if(null===n[0]){n[0]=e;if(t)break;t=!0}else n[0]===e&&(t=!0);g(n)}n=m(L,e);if(!t&&!s(H,e)&&n&&!n.inited){if(k.enforceDefine&&(!o||!ba(o)))return r(e)?void 0:c(B("nodefine","No define call for "+e,null,[e]));g([e,i.deps||[],i.exportsFn])}v()},nameToUrl:function(e,t,n){var r,i,s,o,u,a;if(l.jsExtRegExp.test(e))o=e+(t||"");else{r=k.paths,i=k.pkgs,o=e.split("/");for(u=o.length;0<u;u-=1){if(a=o.slice(0,u).join("/"),s=m(i,a),a=m(r,a)){J(a)&&(a=a[0]),o.splice(0,u,a);break}if(s){e=e===s.name?s.location+"/"+s.main:s.location,o.splice(0,u,e);break}}o=o.join("/"),o+=t||(/\?/.test(o)||n?"":".js"),o=("/"===o.charAt(0)||o.match(/^[\w\+\.\-]+:/)?"":k.baseUrl)+o}return k.urlArgs?o+((-1===o.indexOf("?")?"?":"&")+k.urlArgs):o},load:function(e,t){l.load(x,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if("load"===e.type||ka.test((e.currentTarget||e.srcElement).readyState))P=null,e=b(e),x.completeLoad(e.id)},onScriptError:function(e){var t=b(e);if(!r(t.id))return c(B("scripterror","Script error",e,[t.id]))}},x.require=x.makeRequire(),x}var l,w,x,D,t,E,P,K,Q,fa,la=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,ma=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,ea=/\.js$/,ja=/^\.\//;w=Object.prototype;var L=w.toString,ga=w.hasOwnProperty,ia=Array.prototype.splice,A="undefined"!=typeof window&&!!navigator&&!!document,da=!A&&"undefined"!=typeof importScripts,ka=A&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,Y="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),F={},r={},T=[],O=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(I(requirejs))return;r=requirejs,requirejs=void 0}"undefined"!=typeof require&&!I(require)&&(r=require,require=void 0),l=requirejs=function(e,t,n,r){var i,s="_";return!J(e)&&"string"!=typeof e&&(i=e,J(t)?(e=t,t=n,n=r):e=[]),i&&i.context&&(s=i.context),(r=m(F,s))||(r=F[s]=l.s.newContext(s)),i&&r.configure(i),r.require(e,t,n)},l.config=function(e){return l(e)},l.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=l),l.version="2.1.5",l.jsExtRegExp=/^\/|:|\?|\.js$/,l.isBrowser=A,w=l.s={contexts:F,newContext:ha},l({}),y(["toUrl","undef","defined","specified"],function(e){l[e]=function(){var t=F._;return t.require[e].apply(t,arguments)}}),A&&(x=w.head=document.getElementsByTagName("head")[0],D=document.getElementsByTagName("base")[0])&&(x=w.head=D.parentNode),l.onError=function(e){throw e},l.load=function(e,t,n){var r=e&&e.config||{},i;if(A)return i=r.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script"),i.type=r.scriptType||"text/javascript",i.charset="utf-8",i.async=!0,i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),i.attachEvent&&!(i.attachEvent.toString&&0>i.attachEvent.toString().indexOf("[native code"))&&!Y?(O=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)):(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)),i.src=n,K=i,D?x.insertBefore(i,D):x.appendChild(i),K=null,i;if(da)try{importScripts(n),e.completeLoad(t)}catch(s){e.onError(B("importscripts","importScripts failed for "+t+" at "+n,s,[t]))}},A&&M(document.getElementsByTagName("script"),function(e){x||(x=e.parentNode);if(t=e.getAttribute("data-main"))return r.baseUrl||(E=t.split("/"),Q=E.pop(),fa=E.length?E.join("/")+"/":"./",r.baseUrl=fa,t=Q),t=t.replace(ea,""),r.deps=r.deps?r.deps.concat(t):[t],!0}),define=function(e,t,n){var r,i;"string"!=typeof e&&(n=t,t=e,e=null),J(t)||(n=t,t=[]),!t.length&&I(n)&&n.length&&(n.toString().replace(la,"").replace(ma,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t)),O&&((r=K)||(P&&"interactive"===P.readyState||M(document.getElementsByTagName("script"),function(e){if("interactive"===e.readyState)return P=e}),r=P),r&&(e||(e=r.getAttribute("data-requiremodule")),i=F[r.getAttribute("data-requirecontext")])),(i?i.defQueue:T).push([e,t,n])},define.amd={jQuery:!0},l.exec=function(b){return eval(b)},l(r)}})(this),define("vendor/require",function(){}),define("skyjs.console",[],function(){var e,t,n={},r=function(){};if(!window.console){t=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","memoryProfile","memoryProfileEnd","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],window.console={};for(e=0;e<t.length;e+=1)console[t[e]]=r}return window.console&&!window.console.time&&(window.console.time=function(){}),window.console&&!window.console.timeEnd&&(window.console.timeEnd=function(){}),window.console&&!window.console.profile&&(window.console.profile=function(){}),window.console&&!window.console.profileEnd&&(window.console.profileEnd=function(){}),n}),define("window",[],function(){var e=function(){};return window.console||(window.console={log:e,info:e,warn:e,error:e}),window}),define("skyjs",["window"],function(e){function n(){window.SkyJS=t.extend(window.SkyJS||{},t,!0)}function r(){return t.require=require,t.define=define,n(),window.SkyJS}var t={};return t.namespace=function(t){var n,r=t.split("."),i=e;for(n=0;n<r.length;n+=1)i=i[r[n]]=i[r[n]]||{};return i},t.extend=function(e,n,r){var i,s;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r&&typeof n[i]=="object"&&n[i]!==null?(s={},e[i]=t.extend(s,n[i])):e[i]=n[i]);return e},r()}),define("skyjs.tools",["window"],function(e){var t={};return typeof Array.isArray=="function"?t.isArray=Array.isArray:t.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"},t.calculateDurationInSeconds=function(e,t){return Math.round((e-t)/1e3)},t.stopwatch=function(){var t,n={};return n.start=function(){return t=(new e.Date).getTime(),n},n.duration=function(){return t?(new e.Date).getTime()-t:0},n.durationSeconds=function(){return n.duration()/1e3},n},function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){if(this===undefined||this===null)throw new TypeError('"this" is null or not defined');var n,r=this.length>>>0;t=+t||0,Math.abs(t)===Infinity&&(t=0),t<0&&(t+=r,t<0&&(t=0));for(n=0;t<r;t+=1)if(this[t]===e)return t;return-1})}(),t.getUTCTimestamp=function(){var e=new Date;return e.getTime()},t}),define("skyjs.url",["window","skyjs","skyjs.tools"],function(e,t,n){var r,i={};return i.encodeParam=function(t){var n=t;return t===null||t===undefined||n!==t?"":e.encodeURIComponent(t)},i.decodeParam=function(t){return t?e.decodeURIComponent(t.replace(/\+/g,"%20")):t},i.getParams=function(t){var n={};return t=t||e.location.search,t.replace(/[?&]([^=&]+)(?:(=)([^&]*))?/g,function(e,t,r,s){return n[i.decodeParam(t)]=r?i.decodeParam(s):undefined,e}),n},i.getParam=function(e,t){return i.getParams(t)[e]||""},i.objectToQueryString=function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(!e[t]||typeof e[t]!="object")&&n.push(i.encodeParam(t)+"="+i.encodeParam(e[t]));return n.join("&")},i.urlBuilder=function(e,i,s){var o,u,a=e;i&&(a[a.length-1]!=="/"&&i[0]!=="/"&&(a+="/"),a+=i);if(n.isArray(s)){u={};for(o=0;o<s.length;o+=1)t.extend(u,s[o]);a=r(a,u)}else typeof s=="object"&&(a=r(a,s));return a},i.urlIsValid=function(t,n){return n.test(t)},r=function(e,t){return e=e.indexOf("?")===-1?e+"?":e,e+i.objectToQueryString(t)},i}),define("document",["window"],function(e){return e.document}),define("skyjs.global.event",[],function(){var e={};return e.callbacks=[],e.subscribe=function(n){return typeof n!="function"?!1:(e.callbacks.push(n),!0)},e.unsubscribe=function(n){if(typeof n!="function")return!1;var r=e.callbacks.indexOf(n);return r===-1?!1:(e.callbacks.splice(r,1),!0)},e.trigger=function(n){var r,i,s=e.callbacks.length;if(typeof n!="object")return!1;for(r=0;r<s;r+=1)i=e.callbacks[r],i(n)},e}),define("skyjs.module",["skyjs","skyjs.global.event"],function(e,t){var n={};return n.Event=function(){var e={};this.on=function(t,n){return e[t]||(e[t]=[]),e[t].push(n),this},this.once=function(e,t){var n=this,r;return r=function(){t.apply(n,arguments),n.off(e,r)},this.on(e,r)},this.off=function(t,n){var r,i=e[t]?e[t].length:0;if(n)for(r=i-1;r>=0;r-=1)e[t][r]===n&&e[t].splice(r,1);return(!n||e[t]&&e[t].length===0)&&delete e[t],this},this.trigger=function(n,r){var i,s=e[n]?e[n].length:0,o={};for(i=s-1;i>=0;i-=1)e[n]&&e[n][i](r);return o.name=n,r&&(o.data=r),t.trigger(o),this}},n.addEventsTo=function(t){return e.extend(t,new n.Event)},n}),define("skyjs.event",["skyjs.module"],function(e){var t={};return function(n){e.addEventsTo(t),n.addEventListener?(t.add=function(e,t,n){e.addEventListener(t,n,!1)},t.remove=function(e,t,n){e.removeEventListener(t,n)}):n.attachEvent&&(t.add=function(e,t,n){e.attachEvent("on"+t,n)},t.remove=function(e,t,n){e.detachEvent("on"+t,n)})}(window),t}),define("error.const",[],function(){return{EVENTS:{generic:"error"},TYPES:{ajax:"AJAX error",browserNotSupported:"browser not supported",init:"Initialization error",MWTConversationInitFailure:"MWT Conversation init failure"}}}),define("skyjs.error",["skyjs.event","error.const"],function(e,t){var n={};return n.handle=function(n,r){var i=r||t.EVENTS.generic,s=!0;n.errorType===t.TYPES.ajax&&(s=n.trackError),s&&e.trigger(i,{vars:n})},n}),define("common.const",[],function(){return{TELEMETRY_SYSTEMS:{SKYPE_DATA:"telemetry.skypeData"},FLOWS:{bing:"bing",outlook:"outlook"},CALL_STATUS:{answeredInOtherEndpoint:"answeredInOtherEndpoint"},CALL_DATA:{callId:"callId"},EVENTS:{click:"click",contextmenu:"contextmenu",focus:"focus",mousedown:"mousedown",mousemove:"mousemove",mouseleave:"mouseleave",mouseout:"mouseout",mouseover:"mouseover",mouseOutBlur:"mouseout blur",mouseup:"mouseup",resize:"resize",initialized:"initialized",translationReady:"translationReady",translationLoaded:"translationLoaded",callSessionStarted:"callSessionStarted",callSessionAccepted:"callSessionAccepted",callSessionConnected:"callSessionConnected",callSessionCompleted:"callSessionCompleted",startCallClicked:"startCallClicked",CALL_STATE:{callFinished:"callFinished",callSetupComplete:"callSetupComplete",callSetupError:"callSetupError",callStarted:"callStarted",pluginStarted:"pluginStarted",pluginRunning:"pluginRunning",running:"running",skyjsPluginRunning:"skyjsPluginRunning"},CRS:{CRSinviteInvalid:"CRSinviteInvalid",CRSinviteValid:"CRSinviteValid"}},NOTIFICATIONS:{incomingCall:100,stopRinging:104},PATHS:{profileAvatar:"/profile/avatar",pluginInstallModal:"/assets/images/plugin-install-modal/",pluginInstallPopup:"/plugin-install-popup.html",linkingImages:"/assets/images/linking/",outsideWorldOutlook:"/assets/js-locale/OutsideWorldOutlook/"},HTTP_HEADERS:{swxSessionId:"SWX-SessionId",swxClientRetry:"SWX-ClientRetry",VALUES:{disabled:"disabled"}},KEY_CODES:{escape:27,tab:9},BROWSERS:{CHROME:"chrome",FIREFOX:"firefox",MSIE:"msie",SAFARI:"safari"},PLATFORMS:{WINDOWS:"Windows",MAC:"MacOS"},INSTALL_STEPS:{WINDOWS:{CHROME:{img1:"imgPluginInstallChromeWin1.jpg",img2:"imgPluginInstallChromeWin2.jpg",text1:"msg_pluginInstall_chrome_win_step1",text2:"msg_pluginInstall_chrome_win_step2"},FIREFOX:{img1:"imgPluginInstallFirefoxWin1.jpg",img2:"imgPluginInstallFirefoxWin2.jpg",text1:"msg_pluginInstall_firefox_win_step1",text2:"msg_pluginInstall_firefox_win_step2"},MSIE:{img1:"imgPluginInstallIE1.jpg",img2:"imgPluginInstallIE2.jpg",text1:"msg_pluginInstall_msie_step1",text2:"msg_pluginInstall_msie_step2"}},MAC:{SAFARI:{img1:"imgPluginInstallSafari1.jpg",img2:"imgPluginInstallSafari2.jpg",text1:"msg_pluginInstall_safari_step1",text2:"msg_pluginInstall_safari_step2"}}},SELECTORS:{installStep1Image:".pluginInstall_step1 img",installStep2Image:".pluginInstall_step2 img",installStep1Paragraph:".pluginInstall_step1 p",installStep2Paragraph:".pluginInstall_step2 p",continueCall:".continueCall",closeWindow:".closeWindow",deviceLinks:".getHeadsetBtn, .headsetsLink, .getWebcamBtn, .webcamsLink, .supportLink",callState:"#callstate"},AJAX_DATA_TYPES:{html:"html",json:"json",jsonp:"jsonp",script:"script",text:"text"},HTTP_VERBS:{connect:"CONNECT","delete":"DELETE",get:"GET",head:"HEAD",options:"OPTIONS",post:"POST",put:"PUT",trace:"TRACE",track:"TRACK"},FORM_ENCODING:{urlEncoded:"application/x-www-form-urlencoded"}}}),define("skyjs.net",["skyjs","skyjs.url","window","document","skyjs.error","common.const","error.const"],function(e,t,n,r,i,s,o){function E(e,t){var n,r;for(n in t)t.hasOwnProperty(n)&&(r=t[n],r!==undefined&&r!==null&&e.setRequestHeader(n,r))}function S(e){this.name="SkyJS.Net:JsonpException",this.message=e||""}var u,a,f,l,c,h,p,d,v,m,g,y,b=function(){},w={};return w.loadJS=function(e,t,n,i,s){var o,u=+(new Date),a=r.createElement("script"),f=r.head||r.getElementsByTagName("head")[0];f&&(o=function(){i&&a.parentNode&&a.parentNode.removeChild(a);if(s===!1)return},a.readyState?a.onreadystatechange=function(){if(a.readyState==="loaded"||a.readyState==="complete")a.onreadystatechange=null,o(),t&&t()}:a.onload=function(){a.onload=null,o(),t&&t()},a.onerror=function(){o(),n&&n()},a.async="async",a.src=e,f.insertBefore(a,f.firstChild))},w.ajax=function(r){var i,o,u,f=function(){};if(!r||typeof r!="object")return!1;i={acceptContentType:null,async:!0,cache:!1,data:"",dataType:s.AJAX_DATA_TYPES.json,dataTypeFromHeader:!1,dontSerializeData:!1,headers:{},isCrossDomain:!1,method:s.HTTP_VERBS.get,password:null,postDataType:s.FORM_ENCODING.urlEncoded,retryInstance:null,skipDataEncoding:!1,timeout:3e4,trackError:!0,url:n.location.href,user:null,withCredentials:"false",success:f,error:f,cancel:f,retryCallback:f};for(u in r)r.hasOwnProperty(u)&&i[u]===undefined&&delete r[u];return o=e.extend(i,r,!0),o.url=o.url.replace(/#.*/,""),o.method===s.HTTP_VERBS.get&&o.data&&(o.url=o.url+(/\?/.test(o.url)?"&":"?")+t.objectToQueryString(o.data)),a(o)},a=function(e){var r,i,s=+(new Date);if(!e.isCrossDomain||w.isBrowserCORSCapable())r=f(e),E(r,e.headers),r.onreadystatechange=function(){r&&r.readyState===4&&(u(r.status)?(r.onreadystatechange=b,d(e,r)):v(e,r),n.clearTimeout(i))};else{if(!p())return!1;r=l(e),r.onload=function(){d(e,r)},r.onerror=function(){v(e,r)}}if(!r)return!1;!e.dontSerializeData&&!e.skipDataEncoding&&(e.data=t.objectToQueryString(e.data));try{/POST|PUT/.test(e.method)?r.send(e.data):r.send(),i=n.setTimeout(function(){e.success=b,v(e,r,"timeout")},e.timeout)}catch(o){return r.onreadystatechange&&(r.onreadystatechange=b),r.onload&&(r.onload=b),v(e,r,o),!1}return r.options=e,r},p=function(){return w.getXDomainRequestObject()!==undefined},w.getXDomainRequestObject=function(){return new n.XDomainRequest},f=function(e){var t=w.getXHR();return t.open(e.method,e.url,e.async,e.user,e.password),e.withCredentials==="true"&&(t.withCredentials="true"),t.setRequestHeader("Content-Type",e.postDataType),e.acceptContentType&&t.setRequestHeader("Accept",e.acceptContentType),e.overrideMimeType&&t.overrideMimeType&&t.overrideMimeType(e.overrideMimeType),e.cache&&e.method==="GET"&&(t.setRequestHeader("If-Modified-Since","Sat, 01 Jan 1990 00:00:00 GMT"),t.setRequestHeader("Cache-Control","no-cache")),t},l=function(e){var t=w.getXDomainRequestObject();return t.open(e.method,e.url),t.ontimeout=b,t.onprogress=b,t},u=function(e){return/\b(2\d\d|1223)\b/.test(e)},d=function(e,t){var n,r,i=t.responseText;if(i){n=t.contentType||t.getResponseHeader("Content-Type");if(!e.dataTypeFromHeader&&e.dataType==="json"||/\/json/i.test(n)&&e.dataType!=="jsonp")try{r=JSON.parse(i)}catch(s){v(e,t,"Could not parse JSON in response, "+i+", "+s)}else r=i}e.success(r,"success",t)},w.isBrowserCORSCapable=function(){return w.getXHR().withCredentials!==undefined},w.getXHR=function(){if(n.XMLHttpRequest)return new n.XMLHttpRequest;if(n.ActiveXObject)return new n.ActiveXObject("Microsoft.XMLHTTP")},S.prototype=Error.prototype,w.jsonp=function(e){var r,i,s,o,u,a,f,l=+(new Date);e=e||{},o=e.jsonpCallback||"skyjsjsonp"+ +(new Date),i=(e.data?t.objectToQueryString(e.data)+"&":"")+(e.jsonp||"callback")+"="+o,r=e.url+(/\?/.test(e.url)?"&":"?")+i,u=function(){e.retry-=1,typeof e.retryCallback=="function"&&e.retryCallback(e.retry),w.jsonp(e)},a=function(t){n[o]&&(n[o]=null),n.clearTimeout(s),e.success.apply(null,t)},f=function(){n[o]&&(n[o]=null),n.clearTimeout(s),e.retry>0?u():v(e,{},"JSONP error",400)},n[o]=function(){arguments.length===0?f():a(arguments)},w.loadJS(r,b,f,!0,!1),s=n.setTimeout(f,e.timeout||2e4)},v=function(e,t,n,r){if(c(e,t)&&y(t.status,n)){e.retryInstance.setMaxRetriesReached(function(){m(e,t,n,r)}),e.retryInstance.retry(function(){a(e)});return}m(e,t,n,r)},m=function(e,t,n,r){var s={errorType:o.TYPES.ajax,requestURL:e.url,trackError:e.trackError,message:t.responseText||n||"No error message",code:t.status||r||"No HTTP status code"};typeof e.error=="function"&&e.error(s),i.handle(s)},y=function(e,t){return parseInt(e,10)>=500||t==="timeout"},c=function(e,t){return g(e)&&!h(t)},g=function(e){return e.hasOwnProperty("retryInstance")&&e.retryInstance!==null&&typeof e.retryInstance.retry=="function"},h=function(e){return e.getResponseHeader(s.HTTP_HEADERS.swxClientRetry)===s.HTTP_HEADERS.VALUES.disabled},w}),define("skyjs.postMessage",["window","document","skyjs.event"],function(e,t,n){var r={},i=0,s=0,o;return r.createChannel=function(e,t,u){var a,f,l,c,h={parent:{},iframe:{}},p={},d=+(new Date)+(i+=1);if(!r.isHostWhitelisted(e))throw new Error("Parent origin not allowed");return a={addIframeHandler:function(e,t){h.iframe[e]=t},addParentHandler:function(e,t){h.parent[e]=t},sendToParent:function(t){f(parent,t,e)},sendToIframe:function(e){var n=document.getElementById(u);if(!u||!n)return;f(n.contentWindow,e,t)},onParentRequest:function(e){h.parent[e.action]={success:e.handler}},onIframeRequest:function(e){h.iframe[e.action]={success:e.handler}},request:function(e){e.uid="uid_"+(s+=1),p[e.uid]={success:e.success,error:e.error};if(e.target==="parent")a.sendToParent(e);else{if(e.target!=="iframe")throw new TypeError("Target undefined");a.sendToIframe(e)}},destroy:function(){n.remove(window,"message",c)}},f=function(t,n,r){t.postMessage(JSON.stringify({code:n.code||200,message:n.message||"success",action:n.action,data:n.data,uid:n.uid,channelId:d,target:n.target}),r)},l=function(t,n){if(n.code===200&&t.success)if(n.uid){var r={data:n.data},i=n.target==="parent"?"sendToIframe":"sendToParent";r.success=function(e){a[i]({data:e,uid:n.uid})},r.error=function(e){a[i]({code:400,data:e,uid:n.uid})},t.success(r)}else t.success(n);else t.error&&t.error(n)},c=function(r){var i,s,u;if(!o(r.origin,e)&&!o(r.origin,t))return!1;try{i=JSON.parse(r.data)}catch(a){return}if(!i||!i.code)return!1;if(i.channelId===d)return!1;i.uid&&p[i.uid]&&(o(r.origin,e)||o(r.origin,t))?i.code===200?p[i.uid].success(i.data||null):p[i.uid].error&&p[i.uid].error(i.data||null):i.action&&(s=h.parent[i.action],s&&o(r.origin,e)&&l(s,i),u=h.iframe[i.action],u&&o(r.origin,t)&&l(u,i))},n.add(window,"message",c),a},o=function(t,n){return n==="*"||t===n},r.isHostWhitelisted=function(e,t){var n,r,i=["skype\\.(com|net)","live(-int|-ext)?\\.com"];if(t)for(n=0;n<t.length;n+=1)i.push(t[n]);for(n=0;n<i.length;n+=1)i[n]="("+i[n]+")";return r=new RegExp("^(http(s)?://)?([0-9a-z\\-\\.]+\\.)?("+i.join("|")+")?(:\\d+)?(/)?$","i"),r.test(e)},r}),define("settings",[],function(){var e={},t={},n={rendezvousBingBaseUrl:"rendezvous.bing.baseUrl",rendezvousBuildVersionRequestedMod:"rendezvous.build.version.requested.MOD",rendezvousCdnUrl:"rendezvous.cdn.url",rendezvousCrsUrl:"rendezvous.crs.url",rendezvousEnvId:"rendezvous.envid",rendezvousMwt6LoaderDogfood:"rendezvous.mwt6.loader.dogfood",rendezvousMwt6LoaderInt:"rendezvous.mwt6.loader.int",rendezvousMwt6LoaderProd:"rendezvous.mwt6.loader.prod",rendezvousMwtLoader:"rendezvous.mwt.loader",rendezvousPluginDetailsUrlMac:"rendezvous.plugin.detailsURL.mac",rendezvousPluginDetailsUrlWindows:"rendezvous.plugin.detailsURL.windows",rendezvousPluginDetailsUrlRtcMac:"rendezvous.plugin.detailsURLrtc.mac",rendezvousPluginDetailsUrlRtcWindows:"rendezvous.plugin.detailsURLrtc.windows",rendezvousPluginMinimumMac:"rendezvous.plugin.minimum.mac",rendezvousPluginMinimumWindows:"rendezvous.plugin.minimum.windows",rendezvousRegistrarApiRegisterUrl:"rendezvous.registrar.api.registerurl",rendezvousSkypeDataUrl:"rendezvous.skypeData.url",rendezvousSkypeStaticContentUrl:"rendezvous.skype.static.content.url",rendezvousSkypeWebExperienceApiContactsAccept:"rendezvous.skypewebexperience.api.contacts.accept",rendezvousSkypeWebExperienceApiContactsAdd:"rendezvous.skypewebexperience.api.contacts.add",rendezvousSkypeWebExperienceApiContactsDecline:"rendezvous.skypewebexperience.api.contacts.decline",rendezvousSkypeWebExperienceApiContactsBlock:"rendezvous.skypewebexperience.api.contacts.block",rendezvousSkypeWebExperienceApiContactsList:"rendezvous.skypewebexperience.api.contacts.list",rendezvousSkypeWebExperienceApiContactsUnblock:"rendezvous.skypewebexperience.api.contacts.unblock",rendezvousSkypeWebExperienceHost:"rendezvous.skypewebexperience.host",rendezvousSkypeWebExperienceSwxLiteHost:"rendezvous.skypewebexperience.swxlite.host",rendezvousSkypeWebExperienceSwxLiteCdnUrl:"rendezvous.skypewebexperience.swxlite.cdn.url",rendezvousSkypeWebExperienceSsoUrl:"rendezvous.skypewebexperience.sso.url",rendezvousSkypeWebExperienceSsoWindowWidth:"rendezvous.skypewebexperience.sso.window.width",rendezvousSkypeWebExperienceSsoWindowHeight:"rendezvous.skypewebexperience.sso.window.height",rendezvousSkypeWebExperienceSsoReturnUrl:"rendezvous.skypewebexperience.sso.returnUrl",rendezvousSkypeWebExperienceSsoLoggedInUrl:"rendezvous.skypewebexperience.sso.loggedInUrl",rendezvousSkypeWebExperienceCallTokenPath:"rendezvous.skypewebexperience.api.calltoken.path",rendezvousSkypeWebExperienceGetUicPath:"rendezvous.skypewebexperience.api.getUic.path",rendezvousSkypeWebExperienceLoginPath:"rendezvous.skypewebexperience.api.login.path",rendezvousSkypeWebExperienceInitializationPath:"rendezvous.skypewebexperience.api.initialization.path",rendezvousSkypeWebExperienceRefreshPath:"rendezvous.skypewebexperience.api.refresh.path",rendezvousSkypeWebExperienceRegisterPresencePath:"rendezvous.skypewebexperience.api.register.presence.path",rendezvousSkypeWebExperienceGetCredentialsPath:"rendezvous.skypewebexperience.api.getcredentials.path",rendezvousSkypeWebExperienceSetCredentialsPath:"rendezvous.skypewebexperience.api.setcredentials.path",rendezvousSkypeWebExperienceSkypeHost:"rendezvous.skypewebexperience.skype.host",rendezvousSkypeWebExperienceUrl:"rendezvous.skypewebexperience.url",rendezvousSkypeWebExperienceUsermapPath:"rendezvous.skypewebexperience.api.usermap.path",rendezvousTpcApiSasUrl:"rendezvous.tpc.api.sasurl",rendezvousTpcServiceUrl:"rendezvous.tpc.service.url",rendezvousTelemetryPath:"rendezvous.telemetry.path",rendezvousTrouterUrl:"rendezvous.trouter.url",rendezvousUmApiAccessToken:"rendezvous.um.api.accesstoken",rendezvousUmApiContactsAcceptRequest:"rendezvous.um.api.contacts.acceptrequest",rendezvousUmApiContactsBlockContact:"rendezvous.um.api.contacts.blockcontact",rendezvousUmApiContactsDeclineRequest:"rendezvous.um.api.contacts.declinerequest",rendezvousUmApiContactsGetPending:"rendezvous.um.api.contacts.getpending",rendezvousUmApiContactsSendRequest:"rendezvous.um.api.contacts.sendrequest",rendezvousUmApiContactsUnblockContact:"rendezvous.um.api.contacts.unblockcontact",rendezvousUmApiLoginUic:"rendezvous.um.api.loginuic",rendezvousUmApiPluginLoaderDomain:"rendezvous.um.api.pluginLoaderDomain",rendezvousUmApiPluginLoaderVersion:"rendezvous.um.api.pluginLoaderVersion",rendezvousUmApiSkypeToken:"rendezvous.um.api.skypetoken",rendezvousUmApiTechnical:"rendezvous.um.api.technical",rendezvousUmApiUsermap:"rendezvous.um.api.usermap",rendezvousUmApiUsers:"rendezvous.um.api.users",rendezvousRetryTimeToIncrement:"rendezvous.retry.timeToIncrement",rendezvousRetryExponentialFactor:"rendezvous.retry.exponentialFactor",rendezvousRetryMaxRetries:"rendezvous.retry.maxRetries",rendezvousLiveApiUri:"rendezvous.live.api.uri"};return t[n.rendezvousBingBaseUrl]="http://www.bing.com",t[n.rendezvousBuildVersionRequestedMod]="3-14-1802",t[n.rendezvousCdnUrl]="https://az598575.vo.msecnd.net/3-14-1802",t[n.rendezvousCrsUrl]="https://rendezservice.skype.com",t[n.rendezvousEnvId]="PRODUCTION",t[n.rendezvousMwt6LoaderDogfood]="https://secure.wlxrs.com/_D/F$Live.SiteContent.Messenger/6.2.2236/loader.cxp.dogfood.js",t[n.rendezvousMwt6LoaderInt]="https://js.wlxrs-int.com/_D/F$Live.SiteContent.Messenger/6.2.2236/loader.cxp.int.js",t[n.rendezvousMwt6LoaderProd]="https://secure.wlxrs.com/_D/F$Live.SiteContent.Messenger/6.2.2236/loader.cxp.js",t[n.rendezvousMwtLoader]="https://js2.wlxrs.com/_D/F$Live.SiteContent.Messenger/5.4.1723/loader.cxp.js",t[n.rendezvousPluginDetailsUrlMac]="https://az379195.vo.msecnd.net/public/catalog/outlook-com-plugin/update-mac.json",t[n.rendezvousPluginDetailsUrlWindows]="https://az379195.vo.msecnd.net/public/catalog/outlook-com-plugin/update-win.json",t[n.rendezvousPluginDetailsUrlRtcMac]="https://az379195.vo.msecnd.net/public/catalog/outlook-com-plugin/update-mac.json",t[n.rendezvousPluginDetailsUrlRtcWindows]="https://az379195.vo.msecnd.net/public/catalog/outlook-com-plugin/update-win.json",t[n.rendezvousPluginMinimumMac]="2.13.0",t[n.rendezvousPluginMinimumWindows]="2.13.0",t[n.rendezvousRegistrarApiRegisterUrl]="https://prod.registrar.skype.com/v2/registrations",t[n.rendezvousSkypeDataUrl]="https://pipe.skype.com/Client/2.0/",t[n.rendezvousSkypeStaticContentUrl]="https://skypewebexperience.skype.com/content/3-14-1802",t[n.rendezvousSkypeWebExperienceApiContactsAccept]="/v1/users/{USERID}/contacts/accept/{CONTACTID}",t[n.rendezvousSkypeWebExperienceApiContactsAdd]="/v1/users/{USERID}/contacts/add/{CONTACTID}",t[n.rendezvousSkypeWebExperienceApiContactsBlock]="/v1/users/{USERID}/contacts/block/{CONTACTID}",t[n.rendezvousSkypeWebExperienceApiContactsDecline]="/v1/users/{USERID}/contacts/decline/{CONTACTID}",t[n.rendezvousSkypeWebExperienceApiContactsList]="/v1/users/{USERID}/contacts/requests",t[n.rendezvousSkypeWebExperienceApiContactsUnblock]="/v1/users/{USERID}/contacts/unblock/{CONTACTID}",t[n.rendezvousSkypeWebExperienceLoginPath]="/v1/User/Login",t[n.rendezvousSkypeWebExperienceInitializationPath]="/v1/User/Initialization",t[n.rendezvousSkypeWebExperienceRefreshPath]="/v1/User/RefreshPresence",t[n.rendezvousSkypeWebExperienceRegisterPresencePath]="/v1/User/RegisterPresence",t[n.rendezvousSkypeWebExperienceGetCredentialsPath]="/v1/WebLogin/GetCredentials",t[n.rendezvousSkypeWebExperienceSetCredentialsPath]="/v1/WebLogin/SetCredentials",t[n.rendezvousSkypeWebExperienceCallTokenPath]="/v1/WebLogin/CallToken",t[n.rendezvousSkypeWebExperienceHost]="https://skypewebexperience.live.com",t[n.rendezvousSkypeWebExperienceSwxLiteHost]="https://skypewebexperience.skype.com",t[n.rendezvousSkypeWebExperienceSwxLiteCdnUrl]="https://skypewebexperience.skype.com/v1/client/lite",t[n.rendezvousSkypeWebExperienceSsoUrl]="https://login.skype.com/login?application=swx&return_url={returnUrl}&frmrgtpe=2",t[n.rendezvousSkypeWebExperienceSsoWindowWidth]="500",t[n.rendezvousSkypeWebExperienceSsoWindowHeight]="400",t[n.rendezvousSkypeWebExperienceSsoReturnUrl]="https://skypewebexperience.skype.com/v1/WebLogin/Login?redirectUrl={loggedInUrl}",t[n.rendezvousSkypeWebExperienceSsoLoggedInUrl]="https://skypewebexperience.skype.com/v1/client/lite/swxlite-sso-logincomplete.html?openerOrigin={openerOrigin}",t[n.rendezvousSkypeWebExperienceGetUicPath]="/v1/User/Uic",t[n.rendezvousSkypeWebExperienceUrl]="https://skypewebexperience.live.com/content/3-14-1802",t[n.rendezvousSkypeWebExperienceSkypeHost]="https://skypewebexperience.skype.com",t[n.rendezvousSkypeWebExperienceUsermapPath]="/v1/UserMapping/UserMap",t[n.rendezvousTpcApiSasUrl]="https://prod.tpc.skype.com/v1/policies",t[n.rendezvousTpcServiceUrl]="https://skypewebexperience.skype.com/v1/BrowserDetection/TPC",t[n.rendezvousTelemetryPath]="assets/javascript/telemetry/",t[n.rendezvousTrouterUrl]="https://go.trouter.io/v2/a",t[n.rendezvousUmApiAccessToken]="https://api.skype.com/rps/access-token",t[n.rendezvousUmApiContactsSendRequest]="https://api.skype.com/users/{USERID}/contacts/auth-request/{CONTACTID}",t[n.rendezvousUmApiContactsAcceptRequest]="https://api.skype.com/users/{USERID}/contacts/auth-request/{CONTACTID}/accept",t[n.rendezvousUmApiContactsDeclineRequest]="https://api.skype.com/users/{USERID}/contacts/auth-request/{CONTACTID}/decline",t[n.rendezvousUmApiContactsBlockContact]="https://api.skype.com/users/{USERID}/contacts/{CONTACTID}/block",t[n.rendezvousUmApiContactsGetPending]="https://api.skype.com/users/{USERID}/contacts/auth-request",t[n.rendezvousUmApiContactsUnblockContact]="https://api.skype.com/users/{USERID}/contacts/{CONTACTID}/unblock",t[n.rendezvousUmApiLoginUic]="https://uic.login.skype.com/login/uic",t[n.rendezvousUmApiPluginLoaderDomain]="https://uic.login.skype.com",t[n.rendezvousUmApiPluginLoaderVersion]="3-14-1802",t[n.rendezvousUmApiSkypeToken]="https://uic.login.skype.com/skypetoken/mapping-container",t[n.rendezvousUmApiTechnical]="https://api.skype.com/users/technical",t[n.rendezvousUmApiUsermap]="https://api.skype.com/partners/999/usermap",t[n.rendezvousUmApiUsers]="https://api.skype.com/users",t[n.rendezvousRetryTimeToIncrement]="1000",t[n.rendezvousRetryExponentialFactor]="2",t[n.rendezvousRetryMaxRetries]="1",t[n.rendezvousLiveApiUri]="[[rendezvous.live.api.uri]]",e.get=function(e){return t[e]},e.set=function(e,n){n&&(t[e]=n)},e.KEYS=n,e}),define("skyjs.swe.contacts",["skyjs","skyjs.url","skyjs.net","skyjs.tools","settings"],function(e,t,n,r,i){var s={},o,u;return s.sendRequest=function(e){var r={20100:{code:200,text:"Contact request sent"},2e4:{code:201,text:"Already in contact list"},40010:{code:401,text:"Bad request"},40012:{code:402,text:"Contact blocked"},40020:{code:403,text:"Greeting too long"},40401:{code:404,text:"Contact not found"},40300:{code:500,text:"Cannot complete operation at this time."},502:{code:502,text:"Illegal data returned"}},s=i.get(i.KEYS.rendezvousSkypeWebExperienceHost)+i.get(i.KEYS.rendezvousSkypeWebExperienceApiContactsAdd);s=s.replace("{USERID}",t.encodeParam(e.data.userId)),s=s.replace("{CONTACTID}",t.encodeParam(e.data.contactId)),s+="?gt="+t.encodeParam(e.data.greeting),n.ajax({method:"PUT",url:s,async:!0,acceptContentType:"application/json",postDataType:"application/json",success:function(t){if(t&&t.code){var n=parseInt(t.code,10);n===20100?e.success(o(n,r)):n===2e4?e.success(o(n,r)):e.error(o(n,r,t))}else e.error(o(502,r,t))},error:function(t){var n=u(t);n&&n.code?e.error(o(n.code,r)):e.error(o(600,r,n))}})},s.acceptRequest=function(e){var r={20100:{code:200,text:"Contact request accepted"},2e4:{code:201,text:"Already in contact list"},40010:{code:401,text:"Bad request"},40012:{code:402,text:"Contact blocked"},40020:{code:403,text:"Greeting too long"},40401:{code:404,text:"Contact not found"},40300:{code:500,text:"Cannot complete operation at this time."},502:{code:502,text:"Illegal data returned"}},s=i.get(i.KEYS.rendezvousSkypeWebExperienceHost)+i.get(i.KEYS.rendezvousSkypeWebExperienceApiContactsAccept);s=s.replace("{USERID}",t.encodeParam(e.data.userId)),s=s.replace("{CONTACTID}",t.encodeParam(e.data.contactId)),n.ajax({method:"PUT",url:s,async:!0,acceptContentType:"application/json",postDataType:"application/json",success:function(t){if(t&&t.code){var n=parseInt(t.code,10);n===20100?e.success(o(n,r)):n===2e4?e.success(o(n,r)):e.error(o(n,r,t))}else e.error(o(502,r,t))},error:function(t){var n=u(t);n&&n.code?e.error(o(n.code,r)):e.error(o(600,r,n))}})},s.declineRequest=function(e){var r={20100:{code:200,text:"Contact request declined"},40010:{code:401,text:"Bad request"},40401:{code:404,text:"Contact not found"},40300:{code:500,text:"Cannot complete operation at this time."},502:{code:502,text:"Illegal data returned"}},s=i.get(i.KEYS.rendezvousSkypeWebExperienceHost)+i.get(i.KEYS.rendezvousSkypeWebExperienceApiContactsDecline);s=s.replace("{USERID}",t.encodeParam(e.data.userId)),s=s.replace("{CONTACTID}",t.encodeParam(e.data.contactId)),n.ajax({method:"PUT",url:s,async:!0,acceptContentType:"application/json",postDataType:"application/json",success:function(t){if(t&&t.code){var n=parseInt(t.code,10);n===20100?e.success(o(n,r)):e.error(o(n,r,t))}else e.error(o(502,r,t))},error:function(t){var n=u(t);n&&n.code?e.error(o(n.code,r)):e.error(o(600,r,n))}})},s.blockContact=function(e){var r={20100:{code:200,text:"Contact blocked"},40401:{code:404,text:"Contact not found"},40300:{code:500,text:"Cannot complete operation at this time."},502:{code:502,text:"Illegal data returned"}},s=i.get(i.KEYS.rendezvousSkypeWebExperienceHost)+i.get(i.KEYS.rendezvousSkypeWebExperienceApiContactsBlock);s=s.replace("{USERID}",t.encodeParam(e.data.userId)),s=s.replace("{CONTACTID}",t.encodeParam(e.data.contactId)),s+="?ip="+e.data.reporterIp+"&v=905/1.0.0.0&report="+(e.data.reportAbuse?1:0),n.ajax({method:"PUT",url:s,async:!0,acceptContentType:"application/json",postDataType:"application/json",success:function(t){if(t&&t.code){var n=parseInt(t.code,10);n===20100?e.success(o(n,r)):e.error(o(n,r,t))}else e.error(o(502,r,t))},error:function(t){var n=u(t);n&&n.code?e.error(o(n.code,r)):e.error(o(600,r,n))}})},s.unblockContact=function(e){var r={20100:{code:200,text:"Contact unblocked"},40401:{code:404,text:"Contact not found"},40300:{code:500,text:"Cannot complete operation at this time."},502:{code:502,text:"Illegal data returned"}},s=i.get(i.KEYS.rendezvousSkypeWebExperienceHost)+i.get(i.KEYS.rendezvousSkypeWebExperienceApiContactsUnblock);s=s.replace("{USERID}",t.encodeParam(e.data.userId)),s=s.replace("{CONTACTID}",t.encodeParam(e.data.contactId)),s+="?ip="+e.data.reporterIp+"&v=905/1.0.0.0&report="+(e.data.reportAbuse?1:0),n.ajax({method:"PUT",url:s,async:!0,acceptContentType:"application/json",postDataType:"application/json",success:function(t){if(t&&t.code){var n=parseInt(t.code,10);n===20100?e.success(o(n,r)):e.error(o(n,r,t))}else e.error(o(502,r,t))},error:function(t){var n=u(t);n&&n.code?e.error(o(n.code,r)):e.error(o(600,r,n))}})},s.getList=function(e){var s={40300:{code:500,text:"Cannot complete operation at this time."},502:{code:502,text:"Illegal data returned"}},u=i.get(i.KEYS.rendezvousSkypeWebExperienceHost)+i.get(i.KEYS.rendezvousSkypeWebExperienceApiContactsList);u=u.replace("{USERID}",t.encodeParam(e.data.userId)),n.ajax({method:"GET",url:u,async:!0,acceptContentType:"application/json",postDataType:"application/json",success:function(t){t&&r.isArray(t)&&e.success?e.success(t):e.error(t)},error:function(t){e.error&&(t&&t.code?e.error(o(t.code,s,t)):e.error(o(600,s,t)))}})},o=function(n,r,i){var s=r[n];return e.extend(s?e.extend({},s):{code:600,text:"Unknown error"},i)},u=function(t){if(!t||!t.message)return t;try{return JSON.parse(t.message)}catch(n){return t}},s}),define("skyjs.guid",[],function(){function t(e){var t=e.toString(16),n=4-t.length,r;for(r=0;r<n;r+=1)t="0"+t;return t}var e={};return e.create=function(){var e=new Array(8),n,r;for(r=0;r<e.length;r+=2)n=Math.floor(Math.random()*4294967296),e[r]=t(n&65535),e[r+1]=t(n>>>16),r+1===3&&(e[r+1]="4"+e[r+1].substring(1));return e[0]+e[1]+"-"+e[2]+"-"+e[3]+"-"+e[4]+"-"+e[5]+e[6]+e[7]},e}),define("skyjs.detect.supportedBrowsers",[],function(){var e={};return function(){e.OS={Windows:{msie:{min:8},firefox:{min:12},chrome:{min:19}},MacOS:{firefox:{min:12},chrome:{min:19},safari:{min:6}}}}(),e}),define("skyjs.detect",["window","skyjs.detect.supportedBrowsers"],function(e,t){var n,r={};return r.browserDetails=function(t){var n,i,s,o,u,a,f={};n=r.getNavigatorUserAgent(),i=(t||n).toLowerCase(),o=i.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i),s=function(t){return t.test(i)},s(/windows|win32/i)?f.OS="Windows":s(/macintosh|mac os x/i)?f.OS="MacOS":f.OS="Other",f.isOnWinRT=s(/ arm;/i),f.isOnWin8=s(/windows nt 6\.2;/i),o?(u=i.match(/version\/([\.\d]+)/i),f.name=o[1],f.version=parseFloat(u?u[1]:o[2]),f.name==="msie"&&s(/trident/)&&(a=parseFloat(i.match(/trident\/([\.\d]+)/i)[1]),f.version-a<4&&(f.version=a+4))):(f.name=e.navigator.appName,f.version=parseFloat(e.navigator.appVersion)),f.isIE11=s(/trident\/7\.0;/i)&&s(/ rv:11\.0/i),f.isIE11&&(f.name="msie",f.version=11);try{f.hasActiveXEnabled=Boolean(r.getActiveXObject("htmlfile"))}catch(l){f.hasActiveXEnabled=!1}return f.isIE10=s(/trident\/6\.0/i)&&s(/msie/i),f.isIE10modern=f.isIE10&&f.isOnWin8&&!f.hasActiveXEnabled,f.isIE64bits=s(/trident/)&&s(/win64/i),f.isOSXChrome64Bits=f.OS==="MacOS"&&f.version>=39,f},r.getNavigatorUserAgent=function(){return e.navigator.userAgent||""},r.isPluginInstallable=function(){return r.browser.name!=="msie"||!r.browser.isOnWinRT&&r.browser.hasActiveXEnabled},r.isBrowserConfigSupported=function(e){function o(){return n[s.OS]&&n[s.OS][s.name]}function u(){return s.version>=i.min}function a(){return!i.max||s.version<=i.max}function f(){var e;if(i.exc)for(e=0;e<i.exc.length;e+=1)if(s.version===i.exc[e])return!0;return!1}var n=t.OS,i,s=e||r.browser;return o()?(i=n[s.OS][s.name],u()&&a()&&!s.isIE64bits&&!s.isOSXChrome64Bits&&!f()):!1},r.hasSkypeClient=function(){var t,n;try{if(e.ActiveXObject&&r.getActiveXObject("Skype.Detection"))return!0}catch(i){}return t=r.getNavigatorMimeType("application/x-skype"),n=r.getNavigatorMimeType("application/x-skype-web-plugin-2"),typeof t=="object"||typeof n=="object"?!0:!1},r.getActiveXObject=function(t){return new e.ActiveXObject(t)},r.getNavigatorMimeType=function(t){var n=e.navigator.mimeTypes;return n[t]},n=function(){r.browser=r.browserDetails()},n(),r}),define("skyjs.rtc",["skyjs.detect","window","document"],function(e,t,n){function f(e){this.name="PluginError",this.message=e}var r={},i="skypewebplugin",s,o,u,a;return f.prototype=Error.prototype,r.createPlugin=function(e){o()&&r.removePlugin();var t=n.createElement("div");n.body.appendChild(t),t.innerHTML=s(i),u(e)},r.removePlugin=function(){var e=o();if(!e)throw new f("Not present");e.parentNode.parentNode.removeChild(e.parentNode),t.clearInterval(a)},r.getVersion=function(){t.navigator.plugins&&typeof t.navigator.plugins.refresh=="function"&&t.navigator.plugins.refresh(!1);var e,n=t.navigator.mimeTypes["application/x-skype-web-plugin-2"],r=n&&n.enabledPlugin?n.enabledPlugin.version:"";if(/^\d+(\.\d+)+$/.test(r))return r;e=o();try{return r=e.getVersion(),r}catch(i){return null}},s=function(n){var r="width: 0px; height: 0px; right: 0px; bottom: 0px; position: absolute;",i='<param name="L" value="ae2d36dbee900a2d1e107381cc9959da">';return e.browser.name==="msie"?'<object style="'+r+'" id="'+n+'" classid="CLSID:39D38FB8-13F8-4232-A409-01B920B0618C">'+i+"</object>":'<object style="'+r+'" id="'+n+'" type="application/x-skype-web-plugin-2">'+i+"</object>"},o=function(){return n.getElementById(i)},u=function(n){if(!n)return;var r=+(new Date),i;i=function(){var i=o(),s;i?(s=typeof i.startCallSequence,s!=="undefined"?(t.clearInterval(a),n(i)):+(new Date)-r>3e3&&(t.clearInterval(a),n(i))):t.clearInterval(a)},t.clearInterval(a),a=t.setInterval(i,20)},r}),define("skyjs.skype.plugin.const",[],function(){return{EVENTS:{downloadPlugin:"downloadPlugin",PluginUnsupportedOS:"PluginUnsupportedOS",downloadPluginCallback:"downloadPluginCallback",initializeSuccess:"initializeSuccess",notifyNeedImprint:"notifyNeedImprint",notifyLoginSuccess:"notifyLoginSuccess",notifyLoginFailure:"notifyLoginFailure",notifyMyVideoSizeChange:"notifyMyVideoSizeChange",notifyRemoteVideoSizeChange:"notifyRemoteVideoSizeChange",notifyMyVideoChange:"notifyMyVideoChange",notifyCallParticipantVideoChange:"notifyCallParticipantVideoChange",notifyCallConnected:"notifyCallConnected",notifyCallFinished:"notifyCallFinished",notifyMicDevListChange:"notifyMicDevListChange",notifyCamDevListChange:"notifyCamDevListChange",notifySpeakerDevListChange:"notifySpeakerDevListChange",notifyError:"notifyError",notifyCreditBalanceChange:"notifyCreditBalanceChange",notifyWindowStateChange:"notifyWindowStateChange",notifyParticipantListChange:"notifyParticipantListChange",setupComplete:"setupComplete",resizing:"resizing",callDurationChanged:"callDurationChanged"},FLOWS:{incoming:"in",outgoing:"out"}}}),define("skyjs.skype.plugin",["window","skyjs","skyjs.module","skyjs.detect","skyjs.url","skyjs.rtc","skyjs.net","skyjs.skype.plugin.const","settings"],function(e,t,n,r,i,s,o,u,a){function T(){return e.insideWorld||null}function N(e,t){var n={func:e,parameters:t||{}},r=T().javascriptCall(JSON.stringify(n)),i;if(r)return i=JSON.parse(r).parameters,i}function C(){var e;try{e=N("getVersion"),e&&y.compareVersion(e.version,"2.5")>=0?y.APIversion=2:y.APIversion=1}catch(t){y.APIversion=1}}function k(e){f.state=e}var f,l,c,h,p,d,v,m,g=r.browser,y={},b,w,E,S,x;return n.addEventsTo(y),y.APIversion=1,y.config={pluginFileURL:{Windows:a.get(a.KEYS.rendezvousPluginDetailsUrlWindows),MacOS:a.get(a.KEYS.rendezvousPluginDetailsUrlMac)},latestPluginDetectOptions:{activeXObjName:"Skype.SkypeWebPlugin.2",mimeType:"application/x-skype-web-plugin-2",mimeDescription:"SkypeWebPlugin Video Calling Plugin"},oldPluginDetectOptions:{activeXObjName:"Skype.SkypeWebPlugin.1",mimeType:"application/skype-web-plugin",mimeDescription:"SkypeWebPlugin Video Calling Plugin"}},y.SkypePlugin={isInstalled:!1,details:{}},e.navigator!==undefined&&(p=function(t,n){var r={},i=e.navigator;return i&&(i.plugins&&typeof i.plugins.refresh=="function"&&i.plugins.refresh(!1),t&&i.mimeTypes&&typeof i.mimeTypes.length=="number"&&i.mimeTypes.length?i.mimeTypes[t]&&i.mimeTypes[t].enabledPlugin&&(r=i.mimeTypes[t].enabledPlugin):n&&i.plugins&&typeof i.plugins.length=="number"&&i.plugins.length&&(r=i.plugins[n])),r||null}),y.isPluginInstalled=function(){var e,t,n=w(),r={};t=E(n),e=t.pluginObj||{},r.activex=t.isActiveX;try{r.description=e.description||"[Unknown]",r.filename=e.filename||"[Unknown]",r.name=e.name||"[Unknown]",r.version=e.version||"[Unknown]"}catch(i){r.description="[Unknown]",r.filename="[Unknown]",r.name="[Unknown]",r.version="[Unknown]"}return y.SkypePlugin.details=r,y.SkypePlugin.details.description!=="[Unknown]"||r.activex?(y.SkypePlugin.isInstalled=!0,!0):(y.SkypePlugin.isInstalled=!1,!1)},w=function(){var e={};return e.activeXObjNames=[y.config.latestPluginDetectOptions.activeXObjName,y.config.oldPluginDetectOptions.activeXObjName],e.mimeTypesAndDescriptions=[{mimeType:y.config.latestPluginDetectOptions.mimeType,mimeDescription:y.config.latestPluginDetectOptions.mimeType},{mimeType:y.config.oldPluginDetectOptions.mimeType,mimeDescription:y.config.oldPluginDetectOptions.mimeType}],e},E=function(e){var t,n=!1;return t=S(e.activeXObjNames),t&&(n=!0),t||(t=x(e.mimeTypesAndDescriptions)),{pluginObj:t,isActiveX:n}},S=function(t){var n,r,i;if(e.ActiveXObject||g.isIE11===!0||g.isIE10===!0)for(n=0;n<t.length;n+=1){r=t[n];try{i=new e.ActiveXObject(r);if(i!==undefined)return i}catch(s){}}return null},x=function(e){var t,n,r,i;for(t=0;t<e.length;t+=1){r=e[t].mimeType,i=e[t].mimeDescription;if(p){n=p(r,i);if(n&&n.description)return n}}return null},d=function(){y.processVersion(function(e){var t;g.OS==="MacOS"?t=a.get(a.KEYS.rendezvousPluginMinimumMac):t=a.get(a.KEYS.rendezvousPluginMinimumWindows),y.compareVersion(e,t)<0?y.isOutdatedFlag=1:y.isOutdatedFlag=0})},y.validatePluginVersion=function(e,t){function n(n){n&&n.version?y.isOutdatedFlag=y.compareVersion(e,n.version)<0?!0:!1:y.isOutdatedFlag=!1,t&&t()}y.getCurrentPluginDetails({success:function(e){n(e)},error:function(){n()}})},y.downloadPlugin=function(){y.trigger(u.EVENTS.downloadPlugin),y.getCurrentPluginDetails({success:function(t){i.getParam("id")==="bing"&&g.OS==="Windows"?t.download_url="https://az379195.vo.msecnd.net/public/download/win/SkypeWebPlugin-2.3.12417.17599.msi":i.getParam("id")==="bing"&&g.OS==="MacOS"&&(t.download_url="https://az379195.vo.msecnd.net/public/download/mac/SkypeWebPlugin-2.3.12417.17599.pkg"),e.location=t.download_url,y.startCheckInstall()},error:function(){return y.trigger(u.EVENTS.PluginUnsupportedOS),!1}})},y.startCheckInstall=function(){y.downloadPlugin.timeout=4e3,l=e.setTimeout(function(){y.downloadPlugin.checkInstall()},y.downloadPlugin.timeout)},y.downloadPlugin.checkInstall=function(){var t=y.isPluginInstalled();typeof l=="number"&&e.clearTimeout(l),t&&!y.isOutdatedFlag?y.trigger(u.EVENTS.downloadPluginCallback):t&&y.isOutdatedFlag?(d(),l=e.setTimeout(function(){y.downloadPlugin.checkInstall()},y.downloadPlugin.timeout)):l=e.setTimeout(function(){y.downloadPlugin.checkInstall()},y.downloadPlugin.timeout)},f={callerId:"",calleeId:"",skypeId:"",callId:"",nodeInfo:"",localCameraOn:!1,remoteCameraOn:!1,soundState:!0,callConnected:!1,state:"undefined",t:""},y.init=function(){var t;T()?(C(),e.clearTimeout(t),y.trigger(u.EVENTS.initializeSuccess)):(e.clearTimeout(t),t=e.setTimeout(y.init,200))},y.getCallData=function(){return y.APIversion===1?T().getCallData():N("getCallData").data},y.getState=function(){return f.state},y.getParam=function(e){return f[e]===undefined?null:f[e]},y.setParam=function(e,t){f[e]=t},y.isMicOn=function(){return y.getParam("soundState")},y.isOutgoing=function(){return y.getParam("type")===u.FLOWS.outgoing},y.isLocalCameraOn=function(){return y.getParam("localCameraOn")},y.isRemoteCameraOn=function(){return y.getParam("remoteCameraOn")},y.setWindowSize=function(e,t,n,r,i){if(y.APIversion===1)T().setWindowSize(e,String(t),String(n),String(r),String(i));else{var s={position:e,h_margin:t,v_margin:n,w:r,h:i};N("setWindowSize",s)}},y.setWindowMode=function(e){y.APIversion===1?T().setWindowMode(e):N("setWindowMode",{mode:e})},y.setup=function(){v={notifyNeedImprint:function(e){if(y.getState()==="connected")return!1;y.trigger(u.EVENTS.notifyNeedImprint,{id:e.id,key:e.key})},notifyLoginSuccess:function(e){k("logged"),y.isOutgoing()||y.awaitCall(),y.trigger(u.EVENTS.notifyLoginSuccess)},notifyLoginFailure:function(e){k("unauthorized"),y.trigger(u.EVENTS.notifyLoginFailure)},notifyMyVideoSizeChange:function(e){y.trigger(u.EVENTS.notifyMyVideoSizeChange,{width:e.w,height:e.h})},notifyRemoteVideoSizeChange:function(e){y.trigger(u.EVENTS.notifyRemoteVideoSizeChange,{width:e.w,height:e.h})},notifyMyVideoChange:function(e){y.trigger(u.EVENTS.notifyMyVideoChange,{running:e.running,available:e.available})},notifyCallParticipantVideoChange:function(e){y.setParam("remoteCameraOn",e.running),y.trigger(u.EVENTS.notifyCallParticipantVideoChange,{running:e.running,available:e.available,participantId:e.participantId})},notifyCallConnected:function(e){y.setParam("callConnected",!0),k("connected"),h(),y.trigger(u.EVENTS.notifyCallConnected,e.id)},notifyCallFinished:function(e){y.setParam("callConnected",!1),k("finished"),y.trigger(u.EVENTS.notifyCallFinished,{id:e.id,status:e.status})},notifyMicDevListChange:function(e){y.micDevList=m(e.names),y.trigger(u.EVENTS.notifyMicDevListChange,0)},notifyCamDevListChange:function(e){var t;y.camDevList=m(e.names),t=y.camDevList.length-1,y.trigger(u.EVENTS.notifyCamDevListChange,t)},notifySpeakerDevListChange:function(e){y.speakerDevList=m(e.names),y.trigger(u.EVENTS.notifySpeakerDevListChange,0)},notifyError:function(e){y.trigger(u.EVENTS.notifyError,{type:e.type,reason:e.reason})},notifyCreditBalanceChange:function(e){y.trigger(u.EVENTS.notifyCreditBalanceChange,{currency:e.currency,balance:e.balance,precision:e.precision})},notifyWindowStateChange:function(e){y.trigger(u.EVENTS.notifyWindowStateChange,{active:e.active||e.state})},notifyParticipantListChange:function(e){y.trigger(u.EVENTS.notifyParticipantListChange,{participant:e.participant,fullname:e.fullname,join:e.join})}},e.javascriptNotification=function(e){if(y.APIversion===2){var t;try{t=JSON.parse(e)}catch(n){return!1}v[t.func]&&v[t.func](t.parameters)}},y.APIversion===1&&(e.notifyNeedImprint=function(e,t){v.notifyNeedImprint({id:e,key:t})},e.notifyLoginSuccess=function(e){v.notifyLoginSuccess({id:e})},e.notifyLoginFailure=function(e){v.notifyLoginFailure({id:e})},e.notifyMyVideoSizeChange=function(e,t){v.notifyMyVideoSizeChange({w:e,h:t})},e.notifyRemoteVideoSizeChange=function(e,t){v.notifyRemoteVideoSizeChange({w:e,h:t})},e.notifyMyVideoChange=function(e,t){v.notifyMyVideoChange({running:e,available:t})},e.notifyCallParticipantVideoChange=function(e,t,n){v.notifyCallParticipantVideoChange({running:n,available:t,participantId:e})},e.notifyCallConnected=function(e){v.notifyCallConnected({id:e})},e.notifyCallFinished=function(e,t){v.notifyCallFinished({id:e,status:t})},e.notifyMicDevListChange=function(e,t){v.notifyMicDevListChange({names:t,index:e})},e.notifyCamDevListChange=function(e,t){v.notifyCamDevListChange({names:t,index:e})},e.notifySpeakerDevListChange=function(e,t){v.notifySpeakerDevListChange({names:t,index:e})},e.notifyError=function(e,t){v.notifyError({type:t,reason:e})},e.notifyCreditBalanceChange=function(e,t,n){v.notifyCreditBalanceChange({currency:e,balance:t,precision:n})},e.notifyWindowStateChange=function(e){v.notifyWindowStateChange({active:e})});var n,r,s,o,a=y.getCallData();if(!a)return;s=i.getParams("?"+a);for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(o=n);t.extend(f,s),r=+s.sts,r&&(o=1),y.trigger(u.EVENTS.setupComplete)},y.getVersion=function(){return y.APIversion===1?y.getParam("pv"):N("getVersion").version},y.processVersion=function(e){if(!y.isPluginInstalled()){e(null);return}b=s.getVersion(),/^\d+(\.\d+)+$/.test(b)?e(b):s.createPlugin(function(){b=s.getVersion(),e(b),s.removePlugin()})},y.getCurrentPluginDetails=function(e){var n=function(){},r={};e=t.extend({success:n,error:n},e||{}),o.jsonp({jsonpCallback:"getskypepluginversion",url:y.config.pluginFileURL[g.OS],success:function(t){r.version=t.version.join("."),r.download_url=t.download_url,r.size=t.size,r.sha1_checksum=t.sha1_checksum,r.effective_date=t.effective_date,e.success(r)},error:function(){}})},y.compareVersion=function(e,t){if(e===undefined||e===null)return-1;if(e===t)return 0;var n=e.split("."),r=t.split("."),i=Math.min(n.length,r.length),s,o;for(s=0;s<i;s+=1){o=n[s]-r[s];if(o>0)return 1;if(o<0)return-1}return n.length>r.length?1:n.length<r.length?-1:0},y.login=function(){k("logging");if(y.APIversion===1)T().tryLogin(y.getParam("calleeId"),"false");else{var e={id:y.getParam("calleeId"),save:!1};N("tryLogin",e)}},y.loginWithToken=function(e){if(y.APIversion===1)T().login(y.getParam("calleeId"),e);else{var t={id:y.getParam("calleeId"),token:e};N("login",t)}},y.sendDtmf=function(e){y.APIversion===1?T().sendDtmf(e):N("sendDtmf",{code:e})},y.startCall=function(e,n){var r,i="",s="",o=y.getParam("flowName");e=e||"WL",k("connecting"),o==="outlook-out"?e==="WL"&&y.getParam("liveId")?(i="1:"+y.getParam("liveId"),s=i):s=y.getParam("calleeId"):o==="bing"?(s=y.getParam("callerId"),i=""):t.Messenger?i="CID="+t.Messenger.cidToHex(y.getParam("inviteeCid")):i="",y.APIversion===2||n&&y.compareVersion(y.getVersion(),"2.3.12355.17491")>=0?(r={caller:y.getParam("calleeId"),callee:y.getParam("callerId"),nonce:i,convo_id:s,origin:n||"",video:!1},N("startCall",r)):T().startCall(y.getParam("calleeId"),y.getParam("callerId"),i,s)},y.answerCall=function(){var e=y.getParam("payload")?JSON.parse(y.getParam("payload")):{};y.APIversion===1?T().answerCall():N("answerCall")},y.show=function(){y.APIversion===1?T().showUI():N("showUI")},y.getCameraDevicesList=function(){var e,t;return y.APIversion===1?(t=T().getCameraDevicesList(),t instanceof Array?e=t:e=t.toArray()):e=N("getCameraDevicesList"),e},y.getSpeakerDevicesList=function(){var e,t;return y.APIversion===1?(t=T().getSpeakerDevicesList(),t instanceof Array?e=t:e=t.toArray()):e=N("getSpeakerDevicesList"),e},y.getMicrophoneDevicesList=function(){var e,t;return y.APIversion===1?(t=T().getMicrophoneDevicesList(),t instanceof Array?e=t:e=t.toArray()):e=N("getMicrophoneDevicesList"),e},y.startViewParticipantVideo=function(){y.APIversion===1?T().startViewParticipantVideo():N("startViewParticipantVideo")},y.stopViewParticipantVideo=function(){y.APIversion===1?T().stopViewParticipantVideo():N("stopViewParticipantVideo")},y.startSendingMyVideo=function(){y.APIversion===1?T().startSendingMyVideo():N("startSendingMyVideo"),y.setParam("localCameraOn",!0),y.setParam("enableVideo",1)},y.stopSendingMyVideo=function(){y.APIversion===1?T().stopSendingMyVideo():N("stopSendingMyVideo"),y.setParam("localCameraOn",!0),y.setParam("enableVideo",0)},y.toggleCamera=function(e){y.getState()==="connected"&&(e?y.startSendingMyVideo():y.stopSendingMyVideo())},y.toggleMute=function(e){y.APIversion===1?T().muteCall(String(e)):N("muteCall",{mute:e}),y.setParam("soundState",!e)},y.endCall=function(e){y.APIversion===1?T().endCall(y.getParam("callId")):N("endCall"),e&&e()},y.awaitCall=function(){var e=JSON.parse(y.getParam("payload")),t;y.APIversion===1?T().awaitCall(y.getParam("callerId"),y.getParam("calleeId"),e.nsp,e.gp):(t={caller:y.getParam("callerId"),callee:y.getParam("calleeId"),node_payload:e.nsp,generic_payload:e.gp},N("awaitCall",t))},y.setOnTop=function(e){y.APIversion===1?T().setAlwaysOnTop(e?"true":"false"):N("setAlwaysOnTop",{ontop:e})},y.startResizing=function(e){e=t.extend({minWidth:800,minHeight:600,maxWidth:-1,maxHeight:-1},e||{});if(y.APIversion===1)T().startResizingConstrained(String(e.minWidth),String(e.minHeight),String(e.maxWidth),String(e.maxHeight));else{var n={minw:e.minWidth,minh:e.minHeight,maxw:e.maxWidth,maxh:e.maxHeight};N("setWindowConstrain",n),N("startResizing",{location:8})}y.trigger(u.EVENTS.resizing)},y.startDragging=function(){y.APIversion===1?T().startDragging():N("startDragging")},y.setVideoRect=function(e,t,n,r){if(y.APIversion===1)T().setVideoRect(String(e),String(t),String(n),String(r));else{var i={x:e,y:t,w:n,h:r};N("setVideoRect",i)}},y.setPreviewRect=function(e,t,n,r){if(y.APIversion===1)T().setPreviewRect(String(e),String(t),String(n),String(r));else{var i={x:e,y:t,w:n,h:r};N("setPreviewRect",i)}},y.setCamera=function(e){y.APIversion===1?T().setCamera(String(e)):N("setCamera",{index:e})},y.setMicrophone=function(e){y.APIversion===1?T().setMicrophone(String(e)):N("setMicrophone",{index:e})},y.setSpeaker=function(e){y.APIversion===1?T().setSpeaker(String(e)):N("setSpeaker",{index:e})},y.closeWindow=function(){y.APIversion===1?T().closeWindow():N("closeWindow")},c={seconds:0,minutes:0,hours:0},h=function(){var t=+(new Date),n;n=function(){var r=+(new Date)-t,i=Math.floor(r/1e3);c.seconds=i%60,c.minutes=Math.floor(i/60)%60,c.hours=Math.floor(i/3600),y.trigger(u.EVENTS.callDurationChanged,c),y.getState()==="connected"&&e.setTimeout(n,1e3-r%1e3+10)},n()},y.getCurrentCallDuration=function(){return c},m=function(e){var t;return e instanceof Array?t=e:t=e.toArray(),t},y}),define("skyjs.session",["skyjs.guid","skyjs.url","skyjs.skype.plugin"],function(e,t,n){function s(e){var n=t.getParam(e)||null;return n}function o(e){var t=n.getParam(e)||null;return t}function u(e){if(!e)return;var t,n;for(t in r.KEYS)r.KEYS.hasOwnProperty(t)&&(n=r.KEYS[t],e.hasOwnProperty(n)&&!i.hasOwnProperty(n)&&(i[n]=e[n]))}function a(){i.hasOwnProperty(r.KEYS.SESSIONID)||(i[r.KEYS.SESSIONID]=e.create())}var r={},i={};return r.KEYS={SESSIONID:"sessionid",HOSTPROPERTY:"hostproperty"},r.getProperty=function(e){return i[e]=i[e]||s(e)||o(e)||null,i.hasOwnProperty(e)?i[e]:null},r.getSessionId=function(){return r.getProperty(r.KEYS.SESSIONID)},r.getData=function(){var e,t,n,i={};for(e in r.KEYS)r.KEYS.hasOwnProperty(e)&&(t=r.KEYS[e],n=r.getProperty(t),n!=="undefined"&&(i[t]=n));return i},r.init=function(e){u(e),a()},r}),define("skyjs.iframe",["document","skyjs.url","skyjs.session"],function(e,t,n){var r,i={};return r=function(e,r){return t.urlBuilder(e,null,[{sts:+(new Date)},n.getData(),r])},i.createIframe=function(t,n,i){var s=e.getElementById(t),o=e.body||e.getElementsByTagName("body")[0];s&&s.parentNode.removeChild(s),o&&(s=e.createElement("iframe"),s.id=t,s.src=r(n,i),s.width="0",s.height="0",s.style.border="0",s.style.position="absolute",s.style.top="0",s.style.left="0",e.body.appendChild(s))},i}),define("skyjs.buffer",[],function(){var e=function(e,t){if(!e)throw{name:"Buffer error",message:"Required callback not passed to constructor"};if(typeof e!="function")throw{name:"Buffer error",message:"Callback is not a method"};if(t&&typeof t!="number")throw{name:"Buffer error",message:"retryTimeout parameter is not numerical"}};return function(t,n){var r,i,s=this,o=[],u=null;e(t,n),r=function(){while(o.length>0){if(!t(o[0])){u=window.setTimeout(r,n||1e3);break}u&&s.resetTimer(),o.shift()}},i=function(){var e=n?n/1e3:1,t=e>1?" seconds":" second";return"[SkyJSBuffer] object not pushed, retry in "+e+t},s.resetTimer=function(){window.clearTimeout(u),u=null},s.add=function(e){if(typeof e!="object"||e===null)return!1;o.push(e),r()},s.getBuffered=function(){return o},s.getTimer=function(){return u}}}),define("telemetry/telemetry",["skyjs.iframe","skyjs.postMessage","skyjs.global.event","skyjs.buffer","settings"],function(e,t,n,r,i){var s={};return function(o){function c(){u=t.createChannel(f,i.get(i.KEYS.rendezvousSkypeWebExperienceHost),"telemetryIframe"),u.addIframeHandler("telemetry-iframe-ready",{success:function(){l=!0}})}function h(){return{origin:f,dynamicConfig:JSON.stringify(o.dynamicConfig||{})}}function p(e){var t,n,r,i;a={};if(!e)return;for(n in e)if(e.hasOwnProperty(n)){r=e[n];for(t=0;t<=r.length;t+=1)i=r[t],a[i]=a[i]||[],a[i].push(n)}}function d(e){var t;return!e||!e.name?!1:(e.telemetrySystems=a[e.name]||[],t=e.telemetrySystems.length!==0,t)}function v(e){n.subscribe(function(t){d(t)&&e.add(t)})}function m(t){var n,o,u=h();o=new r(s.trackEvent),v(o),t=t?"-"+t:"",n=i.get(i.KEYS.rendezvousSkypeWebExperienceUrl)+"/telemetry-iframe"+t+".html",e.createIframe("telemetryIframe",n,u),c()}var u,a={},f=[window.location.protocol,window.location.host].join("//"),l=!1;o=o||{},s.trackEvent=function(e){return l?(u.sendToIframe({action:"trackEvent",data:e}),!0):!1},s.init=function(e){p(e.eventsToTrack),m(e.flowName)}}(window.SkyJS),s}),define("live.const",[],function(){return{EVENTS:{aftershow:"aftershow",browserNotSupported:"browserNotSupported",callEnded:"callEnded",callSetupComplete:"callSetupComplete",callSetupError:"callSetupError",callStarted:"callStarted",completeWithSuccess:"completeWithSuccess",declineCall:"declineCall",errorScreenOW:"errorScreenOW",externalPluginInstallSetupCompletePage:"externalPluginInstallSetupCompletePage",externalPluginInstallPluginInstallPageStart:"externalPluginInstallPluginInstallPageStart",externalPluginInstallPluginInstallPageInstalled:"externalPluginInstallPluginInstallPageInstalled",externalPluginInstallGetStartedPage:"externalPluginInstallGetStartedPage",externalPluginInstallAlreadyInstalled:"externalPluginInstallAlreadyInstalled",externalPluginInstallTermsOfUsePage:"externalPluginInstallTermsOfUsePage",getLiveAccessTokenError:"getLiveAccessTokenError",getLiveAccessTokenSuccess:"getLiveAccessTokenSuccess",incomingNotificationTimeout:"incomingNotificationTimeout",initialization:"initialization",initError:"initError",initializeTests:"initializeTests",installModalInit:"installModalInit",installPopupInit:"installPopupInit",initCallbackCalled:"initCallbackCalled",initStarted:"initStarted",linkingCancelSignIn:"linkingCancelSignIn",linkingExisting:"linkingExisting",linkingLearnMore:"linkingLearnMore",linkingStarted:"linkingStarted",linkingSuccess:"linkingSuccess",linkingNewToSkype:"linkingNewToSkype",linkingNoPopupInit:"linkingNoPopupInit",linkingSignIn:"linkingSignIn",linkingProblemSignIn:"linkingProblemSignIn",linkingCompleted:"linkingCompleted",mappingSuccess:"mappingSuccess",MWTDataRequested:"MWTDataRequested",olABtestDifferentLocationsStart:"olABtestDifferentLocationsStart",olABtestDifferentLocationsEnd:"olABtestDifferentLocationsEnd",olPluginDownloadABTestA:"olPluginDownloadABTestA",olPluginDownloadABTestB:"olPluginDownloadABTestB",pluginAcceptCall:"pluginAcceptCall",pluginInstallCancelled:"PluginInstallCancelled",pluginInstallConfirm:"PluginInstallConfirm",pluginInstallDontStartCall:"PluginInstallDontStartCall",pluginInstallStartCall:"PluginInstallStartCall",pluginInstallStarted:"PluginInstallStarted",pluginInstallFinished:"PluginInstallFinished",pluginInstallEvent:"pluginInstallEvent",pluginInstallIframeEvent:"pluginInstallIframeEvent",pluginSetupAborted:"pluginSetupAborted",pluginSetupComplete:"pluginSetupComplete",pluginSetupRunning:"pluginSetupRunning",pluginSetupStarted:"pluginSetupStarted",pluginSetupTimeout:"pluginSetupTimeout",pluginVersion:"pluginVersion",skyJsInitStarted:"skyJsInitStarted",startCall:"startCall",startDownloadPlugin:"startDownloadPlugin",sweInitComplete:"sweInitComplete",userSignedOut:"userSignedOut"},PATHS:{pluginInstallModal:"/assets/images/plugin-install-modal/",pluginInstallPopup:"/plugin-install-popup.html",outsideWorldOutlook:"/assets/js-locale/OutsideWorldOutlook/",linkingImages:"/assets/images/linking/"},URLS:{outlook:"https://www.outlook.com/",liveAccessTokenIframe:"/live-access-token-iframe.html"}}}),define("live.telemetry.init",["common.const","live.const","error.const"],function(e,t,n){var r={};return r[e.TELEMETRY_SYSTEMS.SKYPE_DATA]=[t.EVENTS.pluginInstallStarted,t.EVENTS.pluginInstallFinished,t.EVENTS.pluginInstallCancelled,t.EVENTS.pluginInstallConfirm,t.EVENTS.pluginInstallDontStartCall,t.EVENTS.pluginInstallStartCall,t.EVENTS.linkingStarted,t.EVENTS.linkingExisting,t.EVENTS.linkingNewToSkype,t.EVENTS.linkingLearnMore,t.EVENTS.linkingSignIn,t.EVENTS.linkingCancelSignIn,t.EVENTS.linkingProblemSignIn,t.EVENTS.linkingCompleted,t.EVENTS.initialization,e.EVENTS.callSessionAccepted,e.EVENTS.callSessionStarted,e.EVENTS.callSessionCompleted,n.EVENTS.generic],{eventsToTrack:r,flowName:e.FLOWS.outlook}}),define("skyjs.retry",["settings","window"],function(e,t){var n=function(n){var r,i,s,o,u,a,f=0,l={};return i=n&&n.timeToIncrement?n.timeToIncrement:e.get(e.KEYS.rendezvousRetryTimeToIncrement),s=n&&n.exponentialFactor?n.exponentialFactor:e.get(e.KEYS.rendezvousRetryExponentialFactor),o=n&&n.maxRetries?n.maxRetries:e.get(e.KEYS.rendezvousRetryMaxRetries),a=n&&n.maxRetriesReachedCallback?n.maxRetriesReachedCallback:null,l.getTimeToIncrement=function(){return i},l.getExponentialFactor=function(){return s},l.getMaxRetries=function(){return o},l.getRetriesSoFar=function(){return f},l.getTimerId=function(){return u},l.getMaxRetriesReachedCallback=function(){return a},l.setMaxRetriesReached=function(e){if(!e)return;a=e},l.stop=function(e){t.clearTimeout(u),u=null,f=o,e&&n.maxRetriesReachedCallback&&n.maxRetriesReachedCallback()},l.retry=function(e){var n;if(!e)throw{name:"Retry error",message:"Required callback not passed to method - nothing to retry"};if(f>=o){a&&a();return}n=r(),f+=1,u=t.setTimeout(function(){e()},n)},r=function(){return i*Math.pow(f,s)},l};return{create:function(e){return n(e)}}}),define("live-swe-iframe",["window","skyjs.url","skyjs.net","skyjs.postMessage","skyjs.swe.contacts","skyjs.session","settings","common.const","telemetry/telemetry","live.telemetry.init","skyjs.retry"],function(e,t,n,r,i,s,o,u,a,f,l){function w(e){return!isNaN(e)}function E(e){return e.TPC.Issuer&&e.TPC.Se&&e.TPC.Sr&&e.TPC.St&&e.TPC.Sp&&e.TPC.Signature&&e.MappingContainer&&e.MappingSkypeName&&e.MappingStatus&&e.RegistrationId}function S(e){return e.TPC&&e.TPC.Issuer&&e.TPC.Se&&e.TPC.Sr&&e.TPC.St&&e.TPC.Sp&&e.TPC.Signature&&e.RegistrationId&&w(e.registrationTTLRefreshSeconds)}function x(e){return e*1e3}function T(){var e={};return e[u.HTTP_HEADERS.swxSessionId]=s.getSessionId(),e}var c,h={},p=t.getParam("origin"),d=36e5,v=o.get(o.KEYS.rendezvousSkypeWebExperienceUsermapPath),m=o.get(o.KEYS.rendezvousSkypeWebExperienceHost),g=o.get(o.KEYS.rendezvousSkypeWebExperienceInitializationPath),y=o.get(o.KEYS.rendezvousSkypeWebExperienceRefreshPath),b=o.get(o.KEYS.rendezvousSkypeWebExperienceRegisterPresencePath);return h.refreshPresence=function(e){var t=!1;return n.ajax({method:"POST",url:m+y,async:!0,acceptContentType:"application/json",postDataType:"application/json",dontSerializeData:!0,data:JSON.stringify({registrationid:e.data.registrationId,trouterurl:e.data.trouterUrl}),headers:T(),success:function(n){w(n.registrationTTLRefreshSeconds)?(e.success({registrationTTL:x(n.registrationTTLRefreshSeconds)||d}),t=!0):e.error({code:502,message:"invalid data returned"})},error:e.error}),t},h.registerPresence=function(t){var r=!1;return n.ajax({method:"POST",url:m+b,async:!0,acceptContentType:"application/json",postDataType:"application/json",dontSerializeData:!0,data:JSON.stringify({registrationid:t.data.registrationId,trouterurl:t.data.publicUrl,connectionid:t.data.connectionId}),headers:T(),success:function(e){S(e)?(t.success({tpc:{issuer:e.TPC.Issuer,se:e.TPC.Se,sr:e.TPC.Sr,st:e.TPC.St,sp:e.TPC.Sp,sig:e.TPC.Signature},registrationId:e.RegistrationId,registrationTTL:x(e.registrationTTLRefreshSeconds)||d}),r=!0):t.error({code:502,message:"invalid data returned"})},error:t.error}),r},h.init=function(e){var t=!1;return a.init(f),n.ajax({method:"POST",url:m+g,async:!0,acceptContentType:"application/json",postDataType:"application/json",dontSerializeData:!0,data:JSON.stringify({trouterurl:e.data.publicUrl,connectionid:e.data.connectionId}),retryInstance:l.create(),headers:T(),success:function(n){E(n)?(e.success({tpc:{issuer:n.TPC.Issuer,se:n.TPC.Se,sr:n.TPC.Sr,st:n.TPC.St,sp:n.TPC.Sp,sig:n.TPC.Signature},mappingContainer:decodeURIComponent(n.MappingContainer),mappingSkypeName:n.MappingSkypeName,mappingStatus:n.MappingStatus,registrationId:n.RegistrationId,registrationTTL:x(n.registrationTTLRefreshSeconds)||d}),t=!0):e.error({code:502,message:"invalid data returned"})},error:e.error}),t},p&&(c=r.createChannel("https://"+p,"https://"+e.location.host),c.onParentRequest({action:"initialize",handler:h.init}),c.onParentRequest({action:"refreshPresence",handler:h.refreshPresence}),c.onParentRequest({action:"registerPresence",handler:h.registerPresence}),c.onParentRequest({action:"usermap-request",handler:function(e){n.ajax({method:"GET",url:m+v,async:!0,acceptContentType:"application/json",postDataType:"application/json",headers:T(),success:function(t){t.username?e.success(t.username):e.error()},error:function(t){e.error()}})}}),c.onParentRequest({action:"contact-send",handler:function(e){i.sendRequest(e)}}),c.onParentRequest({action:"contact-accept",handler:function(e){i.acceptRequest(e)}}),c.onParentRequest({action:"contact-decline",handler:function(e){i.declineRequest(e)}}),c.onParentRequest({action:"contact-block",handler:function(e){i.blockContact(e)}}),c.onParentRequest({action:"contact-unblock",handler:function(e){i.unblockContact(e)}}),c.onParentRequest({action:"contact-getlist",handler:function(e){i.getList(e)}}),c.sendToParent({action:"sweReady"})),h}),require(["skyjs.console","live-swe-iframe"])})();